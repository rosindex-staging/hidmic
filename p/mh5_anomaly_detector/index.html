<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Index</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    <link rel="canonical" href="https://ros-infrastructure.github.io/index.ros.org//p/mh5_anomaly_detector/">
    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie-1.4.1/jquery.cookie.js type="text/javascript"></script>

    <script type="text/javascript" src=/js/ga.js async></script>
    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">

      <div align="center">
        <br>
        <table id="topnav-table">
          <tr>
            <td valign="middle">
                ROS Resources:
              <a href="http://wiki.ros.org/">Documentation</a>
              |
              <a href="http://wiki.ros.org/Support">Support</a>
              |
              <a href="http://discourse.ros.org/">Discussion Forum</a>
              |
              <a href="http://status.ros.org/">Service Status</a>
              |
              <a href="http://answers.ros.org/">Q&A answers.ros.org</a>
            </td>
          </tr>
        </table> <!-- topnav-table -->
      </div>

      <div class="row">

        <div class="col-sm-12 col-md-9" style="margin-top: 8px">
          <div class="row">
            <!-- title -->
            <div class="col-xs-12 col-sm-3 col-md-3" style="white-space:nowrap;">
              <a class="site-title" href="/">ROS Index</a> <sup><a href="https://github.com/ros-infrastructure/rosindex/issues/new" style="vertical-align:super;" class="label label-warning" target="_blank">BETA</a></sup>
            </div>

            <!-- main links -->
            <div class="col-xs-12 col-sm-9 col-md-9 text-right">
              <ul class="list-inline" style="margin-bottom:0px;">
                <li><a class="btn btn-link" href="/about">About</a></li>

                <li class="dropdown">
                  <button id="dLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Index <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                    <li><a href="/packages/page/1/time/">Package List</a></li>
                    <li><a href="/repos/page/1/time/">Repository List</a></li>

                    <li class="hidden" class="divider"></li>


                    <li class="hidden"><a href="/srvs/">Nodes</a></li>
                    <li class="hidden"><a href="/msgs/">Messages</a></li>
                    <li class="hidden"><a href="/srvs/">Services</a></li>
                    <li class="hidden"><a href="/srvs/">Plugins</a></li>

                    <li class="divider"></li>

                    <li><a href="/deps/">System Dependencies</a></li>
                  </ul>
                </li>

                <li class="dropdown disabled">
                  <button id="dLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Doc <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                    
                    <li>
                      <a href="/doc/ros2">
                        ROS2 Overview
                      </a>
                    </li>
                    
                    <li class="hidden" class="divider"></li>

                    <li class="hidden"><a href="/doc/tutorials">Tutorials</a></li>
                    <li class="hidden"><a href="/doc/readmes">Readmes</a></li>
                    <li class="hidden"><a href="/doc/apis">APIs</a></li>
                  </ul>
                </li>

                <li><a class="btn btn-link" href="/contribute">Contribute</a></li>
                <li><a class="btn btn-link" href="/stats">Stats</a></li>
              </ul>

            </div>
          </div>
        </div>

        <!-- searchbox -->
        <div class="col-sm-12 col-md-3" style="margin-top: 12px">
          <form id="top-searchbox" action="/search/" role="form" method="get">
            <div class="input-group input-group-sm">
              <input type="text" class="form-control" name="q" placeholder="Search ROS">
              <span class="input-group-btn">
                <button class="btn btn-default btn-sm" title="Search ROS" type="submit">
                  <span class="glyphicon glyphicon-search"></span>
                </button>
                <a href="https://lunrjs.com/guides/searching.html"
                   title="Help to Search" class="btn btn-default btn-sm">
                  <span class="glyphicon glyphicon-question-sign"></span>
                </a>
              </span>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!--
    <a class="site-title" href="/">ROS Index</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        <a class="page-link" href="/packages">Packages</a>
        <a class="page-link" href="/repos">Repositories</a>
        <a class="page-link" href="/search">Search</a>
      </div>
    </nav>
    -->

  </div>
  <script type="text/javascript">
    $('#top-searchbox').submit(function() {
        return $('#top-searchbox input:text').filter(function() {
          return $(this).val() == "";
        }).length == 0;
    });
  </script>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top: 20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/packages">Packages</a></li>
        <li class="active">mh5_anomaly_detector</li>
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="crystal-option" class="distro-button btn btn-xs btn-default" href="#crystal" data="crystal">
      <input type="radio" name="options" id="crystal-radio" autocomplete="off"> crystal
    </label>
  
    <label id="bouncy-option" class="distro-button btn btn-xs btn-default" href="#bouncy" data="bouncy">
      <input type="radio" name="options" id="bouncy-radio" autocomplete="off"> bouncy
    </label>
  
    <label id="melodic-option" class="distro-button btn btn-xs btn-default" href="#melodic" data="melodic">
      <input type="radio" name="options" id="melodic-radio" autocomplete="off"> melodic
    </label>
  
    <label id="lunar-option" class="distro-button btn btn-xs btn-default" href="#lunar" data="lunar">
      <input type="radio" name="options" id="lunar-radio" autocomplete="off"> lunar
    </label>
  
    <label id="kinetic-option" class="distro-button btn btn-xs btn-primary" href="#kinetic" data="kinetic">
      <input type="radio" name="options" id="kinetic-radio" autocomplete="off"> kinetic
    </label>
  
    <label id="indigo-option" class="distro-button btn btn-xs btn-default" href="#indigo" data="indigo">
      <input type="radio" name="options" id="indigo-radio" autocomplete="off"> indigo
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-default" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="ardent" id="ardent-option" class="disabled older-distro-option"  href="#ardent">
          <a href="#ardent" data="ardent" id="ardent-button">ardent</a>
        </li>
      
        <li data="jade" id="jade-option" class="disabled older-distro-option"  href="#jade">
          <a href="#jade" data="jade" id="jade-button">jade</a>
        </li>
      
        <li data="hydro" id="hydro-option" class="disabled older-distro-option"  href="#hydro">
          <a href="#hydro" data="hydro" id="hydro-button">hydro</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
  </div>
</div>


  <div class="distro distro-crystal">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>crystal</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-bouncy">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>bouncy</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>melodic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-lunar">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>lunar</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-kinetic">
    <div class="container-fluid">
      
        
        
        

        <div class="row">
          <div class="col-md-10">
            

<div class="well well-sm">
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px" src="/assets/package.png">
      </td>
      <td>
        <h3 style="margin-top: 5px">
          <a style="text-decoration:none" href="/p/mh5_anomaly_detector">mh5_anomaly_detector</a> <small>package from <a style="text-decoration:none" href="/r/mh5_anomaly_detector/github-narayave-mh5_anomaly_detector">mh5_anomaly_detector</a> repo</small>
        </h3>
          
            
            
              <span class="label label-default pkg-label">

mh5_anomaly_detector
</span>
            
          
      </td>
    </tr>
  </table>
  <div class="top-buffer distro distro-kinetic">
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 50px">
          <a type="button" class="btn btn-xs btn-default" data-toggle="tooltip" data-placement="left" title="View Instances" 
            href="/packages/mh5_anomaly_detector"><span class="glyphicon glyphicon-th"></span></a>
        </div>
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-none"></span>
                  github-narayave-mh5_anomaly_detector
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-narayave-mh5_anomaly_detector" role="menuitem" tabindex="-1" href="/p/mh5_anomaly_detector/github-narayave-mh5_anomaly_detector" data="github-narayave-mh5_anomaly_detector">
                    <span class="glyphicon glyphicon-none"></span>
                    github-narayave-mh5_anomaly_detector
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
</div>

            <div class="visible-xs visible-sm">
              
              
              



<div class="list-group list-group-sm list-group-horizontal list-group-justified">
  <a class="list-group-item text-center" target="_blank" href="http://docs.ros.org/kinetic/api/mh5_anomaly_detector/html/" ><span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span><br> API Docs</a>
  <a class="list-group-item text-center" target="_blank" href="https://github.com/narayave/mh5_anomaly_detector/tree/master/."><span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span><br> Browse Code</a>
  <a class="list-group-item text-center inactive" target="_blank" href="http://wiki.ros.org/mh5_anomaly_detector?distro=kinetic"><span style="margin-right: 5px;" class="glyphicon glyphicon-info-sign"></span><br> Wiki</a>
  <a class="list-group-item text-center inactive" target="_blank" href="http://http404error.github.io/roseco/graph.html?id=ros.json&focus=mh5_anomaly_detector&height=1&depth=2&tred=standard&metagroup=false&colorby=Health&direction=LR" ><span style="margin-right: 5px;" class="glyphicon glyphicon-tree-deciduous"></span><br></a>
  
</div>

            </div>
            



<ul class="nav nav-tabs nav-justified" id="kinetic-tabs" style="margin-bottom:20px">
  <li class="better-tabs active">
    <a href="#kinetic-overview" data-toggle="tab">Overview</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    
    <a href="#kinetic-assets" data-toggle="tab"><span class="label label-primary">2</span> Assets</a>
  </li>
  <li class="better-tabs">
    
    
    
    
    <a href="#kinetic-deps" data-toggle="tab"><span class="label label-default">0</span> Dependencies</a>
  </li>
  <li class="better-tabs">
    
    <a href="#kinetic-tutorials" data-toggle="tab"><span class="label label-default">0</span> Tutorials</a>
  </li>
  <li class="better-tabs">
    <a href="#kinetic-questions" data-toggle="tab"><span id="kinetic-questions-count" class="label label-primary">0</span> Q & A</a>
  </li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="kinetic-overview">
    
    <div class="row">
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h4 class="panel-title">Package Summary</h4></div>
          <div class="panel-body">
            <table class="table table-condensed">
              <tr>
                <td style="width:100px;" class="text-right"><strong>Tags</strong></td>
                <td>
                  
                  
                    <em>No category tags.</em>
                  
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Version</strong></td>
                <td>0.1.6</td>
              </tr>
              <tr>
                <td class="text-right"><strong>License</strong></td>
                <td>BSD</td>
              </tr>
              <tr>
                <td class="text-right"><strong>Build type</strong></td>
                <td>
                  
                    <span class="label label-info">
                  
                    CATKIN</span>
                </td>
              </tr>
              <tr>
                <td class="text-right"><strong>Use</strong></td>
                <td>
                
                  <span class="label label-success">RECOMMENDED</span>
                
                </td>
              </tr>
            </table>
          </div>
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body">
            
            
            

  <table class="table table-condensed">
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/narayave/mh5_anomaly_detector.git">https://github.com/narayave/mh5_anomaly_detector.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2018-08-18
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-default">UNRELEASED
        </span>
      </td>
    </tr>
  </table>

          </div>
        </div>
      </div>
      <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Package Description</h3></div>
          <div class="panel-body">
            ROS Anomaly Detector for Motoman MH5 robot arm
          </div>
          <div class="panel-heading"><h4 class="panel-title">Additional Links</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li><a href="http://wiki.ros.org/mh5_anomaly_detector">Website</a></li>
                
                  <li><a href="https://github.com/narayave/mh5_anomaly_detector">Repository</a></li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Maintainers</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Vedanth Narayanan</li>
                
              </ul>
            
          </div>
          <div class="panel-heading"><h4 class="panel-title">Authors</h4></div>
          <div class="panel-body">
            
            
              <ul class="list-unstyled">
                
                  <li>Vedanth Narayanan</li>
                
              </ul>
            
          </div>
        </div>
      </div>
    </div>
    
      
        <div class="row">
          <div class="col-xs-12">
            <div class="panel panel-default">
              <div class="panel-heading"><span class="glyphicon glyphicon-file"></span><a href="https://github.com/narayave/mh5_anomaly_detector/tree/master/./README.md" title="Open in git repository">README.md</a></div>
              <div class="panel-body">
                    <div class="rendered-markdown">
<h1 id="ros-anomaly-detector-package">ROS Anomaly Detector package</h1>

<h2 id="overview">Overview</h2>

<p>The ROS Anomaly Detector Module (ADM) is designed to execute alongside
industrial robotic arm tasks to detect unintended deviations at the application
level. The ADM utilizes a learning based technique to achieve this. The process
has been made efficient by building the ADM as a ROS package that aptly fits in
the ROS ecosystem. While this module is specific to anomaly detection for an
industrial arm, it is extensible to other projects with similar goals. This
is meant to be a starting point for other such projects.
&lt;!-- Figure \ref{fig:ros_i_overview} presents the ROS-I
architecture. The red box around ROS ADM in the ROS Layer shows where the ADM
exists within the ROS ecosystem. --&gt;</p>

<p>The crux of anomaly detection within this module relies on a three step
process. The steps includes creating datasets out of the published messages
within ROS, training learning models from those datasets, and deploying it in
production. Appropriately, the three modes that the ROS ADM can be executed in
are Collect, Learn, and Operate. The following image presents the high level
workflow that is meant to be followed.</p>

<p><img src="https://raw.githubusercontent.com/narayave/mh5_anomaly_detector/master/./images/adm_flow.png" alt="Image"></p>

<!-- To evaluate our anomaly detection methodology we considered an industrial arm
programmed and controlled with ROS. We developed a ROS Anomaly Detection Module
(ADM) that is designed to execute alongside manufacturing tasks to detect
unintended arm deviations. ADM can be executed in three different modes for
collecting data (Collect mode), learning models (Learn mode), and detecting
anomalies (Operate mode). -->

<!-- % % Also important, the IDM is designed to integrate well
% % with the development of any ROS application.
% The IDM addresses the integrity of the industrial arm task by
% monitoring the captured joint states that are relayed back to the
% control system from the sensors. At any given point, when the joints
% have progressed into an unseen state, they should be marked anomalous.
-->

<h3 id="collect-mode">Collect Mode</h3>

<p>The ADM is first run in the Collect mode after the task has been programmed and
assessed in the commissioning phase of the robot. This mode runs AND collects
data as a node by subscribing to the '/joint_states' topic, of message type
'sensor_msgs/JointState,' within ROS.</p>

<h3 id="learn-mode">Learn Mode</h3>

<p>The goal of this mode is submitting the user with trained classifiers. In
order to accomplish this the user is depended on to supply not only the datasets
for training, but also the classifiers of interest.
These are supplied to an internal library via a script. The internal library semi-automates the learning process. Particularly, the user is only required to supply their script to the Interface component. It in turn, pre-processes the
data (dimensionality reduction if specified), and the set of classifiers are
all trained with their appropriate datasets. After training, the classifiers are
saved in storage.</p>

<p>At a high level, the user's responsibilities includes writing a simple script,
and supplying the names of datasets in a structured manner. From a small set of
functions calls to the Interface class, the classifiers are quickly trained
and are efficiently prepared for deployment.
There are four key, programmatic steps to accomplish in order to get training
predictions and its associated accuracies. First, the Interface class needs to
be instantiated by passing a YAML input file as an
argument. YAML is a human-friendly data serialization method, that is
interoperable between programming languages and systems. Next, the user creates
instances of the classifiers they want trained. The user then passes off the
classifiers to the Interface class for training, by calling the 
<code>genmodel_train()
</code> function. Lastly, testing predictions can be gathered for all classifiers, by calling 
<code>get_testing_predictions()
</code>.</p>

<p>The following python script presents an example of a script utilizing the learning library.</p>
<div class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">unsupervised_models</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">supervised_models</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># Step 1
</span>    <span class="n">input_file</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="c1"># YAML input
</span>    <span class="n">interface</span> <span class="o">=</span> <span class="n">Interface</span><span class="p">(</span><span class="n">input_file</span><span class="p">)</span>

<span class="c1"># Step 2
</span>    <span class="n">ocsvm</span> <span class="o">=</span> <span class="n">svm</span><span class="o">.</span><span class="n">OneClassSVM</span><span class="p">(</span><span class="n">nu</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">kernel</span><span class="o">=</span><span class="s">"rbf"</span><span class="p">,</span> <span class="n">gamma</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
    <span class="n">unsupervised_models</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s">'ocsvm'</span><span class="p">,</span> <span class="n">clf_ocsvm</span><span class="p">))</span>

    <span class="n">svm1</span> <span class="o">=</span> <span class="n">svm</span><span class="o">.</span><span class="n">SVC</span><span class="p">(</span><span class="n">kernel</span><span class="o">=</span><span class="s">'rbf'</span><span class="p">,</span> <span class="n">gamma</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">C</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">supervised_models</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s">'rbfsvm1'</span><span class="p">,</span> <span class="n">svm1</span><span class="p">))</span>
    <span class="n">svm2</span> <span class="o">=</span> <span class="n">svm</span><span class="o">.</span><span class="n">SVC</span><span class="p">(</span><span class="n">kernel</span><span class="o">=</span><span class="s">'rbf'</span><span class="p">,</span> <span class="n">gamma</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">C</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">supervised_models</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s">'rbfsvm2'</span><span class="p">,</span> <span class="n">svm2</span><span class="p">))</span>

<span class="c1"># Step 3
</span>    <span class="n">interface</span><span class="o">.</span><span class="n">genmodel_train</span><span class="p">(</span><span class="n">unsupervised_models</span><span class="p">,</span> <span class="n">supervised_models</span><span class="p">)</span>

<span class="c1"># Step 4
</span>    <span class="n">unsup</span><span class="p">,</span> <span class="n">sup</span> <span class="o">=</span> <span class="n">interface</span><span class="o">.</span><span class="n">get_testing_predictions</span><span class="p">()</span>

</code></pre></div>
<h4 id="learning-library">Learning library</h4>

<ul>
<li>Interface</li>
<li>Data Process</li>
<li>Data Persist</li>
<li>Anomaly Detector</li>
<li>Output Matrix</li>
</ul>

<p>The following image shows the design of the different components of
the library, and how they interact with each other.
<img src="https://raw.githubusercontent.com/narayave/mh5_anomaly_detector/master/./images/library_architecture.png" alt="Image"></p>

<!-- - Listening mode - Collect data, specify topics.
- Training option - Use collected data and train a model.
    Needs lots of options and cover various attributes.
    How many different models?
    How much data?
    Use incoming data for training?
    The ML techniques details are here

    Split unlabeled data collection, and labeled data collection
        process to make sure correct labels are presented.

- Operational mode - Import trained model and run task. -->

<h3 id="operate-mode">Operate Mode</h3>

<p>In the Operate mode, the
classifier that was determined the best is put into effect as the robot is
deployed to execute its task, along with the other saved preprocessing models.
It is worth noting that the task the robot executes is the same one that was
initially programmed in the commissioning phase. The Operate mode runs as a
node, so it subscribes to the '/joint_states' topic. The data is preprocessed
and fed to the determined classifier for a prediction. The user is warned of
anomalous data points, and is encourages to take action when the anomaly score
surpasses the threshold.</p>

<hr>

<h2 id="dependencies">Dependencies</h2>

<p><a href="http://wiki.ros.org/ROS/Installation">ROS</a> needs to be first installed</p>

<p>catkin build
ros related items needed</p>

<p>ros-core</p>

<p>moveit
 - ros_moveit_core
 - moveit_setup_assistant</p>

<p>ros industrial core
motoman driver</p>

<h3 id="dependencies-independet-of-ros">Dependencies independet of ROS</h3>

<ul>
<li><p>Sci-Kit Learn - <a href="https://github.com/scikit-learn/scikit-learn/blob/master/COPYING">License</a></p></li>
<li><p>Numpy - <a href="https://docs.scipy.org/doc/numpy-1.10.0/license.html">License</a></p></li>
<li><p>Pandas - <a href="https://pandas.pydata.org/pandas-docs/stable/overview.html#license">License</a></p></li>
</ul>

<hr>

<h2 id="build">Build</h2>

<p>setup.py should run from home directory
specify the 'learn_lib' package to build within the src/ directory</p>

<p>then go back and build the whole ROS workspace
Then scripts should be able to run</p>

<p>-- Build entire workspace!!!!!</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">    python setup.py build

</code></pre></div>
<hr>

<!-- ## Install


```bash
    python setup.py install

```

--- -->

<h2 id="usage">Usage</h2>

<p>The ADM can be included and initiated by placing each of the codes in the appropriate project. Items within the &lt; &gt; brackets need to be modified by user.</p>

<h4 id="collect-mode">Collect Mode</h4>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;include</span> <span class="na">file=</span><span class="s">"$(find mh5_anomaly_detector)/launch/module.launch"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">"mode_arg"</span> <span class="na">value=</span><span class="s">"-collect"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">"other_args"</span> <span class="na">value=</span><span class="s">"&lt;tpc_name&gt;'
    `$(find pkg)/data/&lt;output_file&gt;.csv' &lt;out_label&gt;"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/include&gt;</span>

</code></pre></div>
<h4 id="learn-mode">Learn Mode</h4>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;include</span> <span class="na">file=</span><span class="s">"$(find mh5_anomaly_detector)/launch/module.launch"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">"mode_arg"</span> <span class="na">value=</span><span class="s">"-train"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">"other_args"</span> <span class="na">value=</span><span class="s">"&lt;script&gt;.py"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">"pkg_name"</span> <span class="na">value=</span><span class="s">"pkg"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">"file_name"</span> <span class="na">value=</span><span class="s">"'$(find pkg)/scripts/&lt;yaml_input_file&gt;.yaml'"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/include&gt;</span>

</code></pre></div>
<h4 id="operate-mode">Operate Mode</h4>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;include</span> <span class="na">file=</span><span class="s">"$(find mh5_anomaly_detector)/launch/module.launch"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">"mode_arg"</span> <span class="na">value=</span><span class="s">"-operate"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;arg</span> <span class="na">name=</span><span class="s">"other_args"</span> <span class="na">value=</span><span class="s">"'&lt;tpc_name&gt;' &lt;classifier_name&gt; &lt;threshold_value&gt;"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/include&gt;</span>

</code></pre></div>
<p>The ADM can also be initiated from the command line, following the bash command. It's important that all arguments are properly supplied.</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">roslaunch mh5_anomaly_detector module.launch arg_1:<span class="o">=</span>arg1_value ...

</code></pre></div>
<hr>

<!-- ## Demo

- Demo includes moveit_setup_assistant package, data collected,
    and the trained classifiers
- User should be able to use it out of the box for testing.

--- -->

<h2 id="gotchas-limitations-and-things-to-keep-in-mind">Gotchas (Limitations and things to keep in mind)</h2>

<ol>
<li>Make sure to always supply full paths, instead of relative paths</li>
<li>To properly use in production, learning models should be trained and tested to be precise.</li>
<li>ROS ADM needs to be protected itself. Not only should be there be preventive mechanisms, but also ways to hinder attackers from exploiting the ADM.</li>
</ol>

<h2 id="4-adm-works-in-the-application-space-and-other-methods-must-be-explored-to-protect-lower-levels-as-well">4. ADM works in the application space, and other methods must be explored to protect lower levels as well.</h2>

<h2 id="todos">TODOs</h2>

<ol>
<li>Decrease the large overhead involved when making changes to task.</li>
</ol>

<h2 id="2-adm-needs-to-be-flexible-to-account-for-multiple-tasks">2. ADM needs to be flexible to account for multiple tasks.</h2>

<h2 id="license">License</h2>

<p>BSD-3</p>
</div>
              </div>
            </div>
          </div>
        </div>
      
    
    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading"><span class="glyphicon glyphicon-list"></span> CHANGELOG</div>
          <div class="panel-body">
            
              <em>No CHANGELOG found.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="kinetic-tutorials">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Wiki Tutorials</h3>
      </div>
      <div class="panel-body">
        
        <em>See <a href="http://wiki.ros.org/mh5_anomaly_detector/Tutorials" target="_blank">ROS Wiki Tutorials</a> for more details.</em>
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Source Tutorials</h3>
      </div>
      <div class="panel-body">
        <em>Not currently indexed.</em>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="kinetic-deps">
    <div class="row">
      <div class="col-sm-5">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Package Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <em>No dependencies on ROS packages.</em>
            
          </div>
          <div class="panel-heading">
            <h3 class="panel-title">System Dependencies</h3>
          </div>
          <div class="panel-body">
            
              <em>No direct system dependencies.</em>
            
          </div>
        </div>
      </div>

      <div class="col-sm-7">
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Dependant Packages</h3>
          </div>
          <div class="panel-body">
            
              <em>No known dependants.</em>
            
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-pane" id="kinetic-assets">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Launch files</h3>
      </div>
      <div class="panel-body">
        
          <ul>
            
              <li><a href="https://github.com/narayave/mh5_anomaly_detector/tree/master/./launch/run.launch" target="_blank">launch/run.launch</a>
                <ul class="list-unstyled">
                  
                    <li><em> THIS IS AN EXAMPLE FILE </em></li>
                  
                  <li>
                    <ul>
                      
                        
                      
                        
                      
                        
                      
                        
                      
                    </ul>
                  </li>
                </ul>
              </li>
            
              <li><a href="https://github.com/narayave/mh5_anomaly_detector/tree/master/./launch/module.launch" target="_blank">launch/module.launch</a>
                <ul class="list-unstyled">
                  
                    <li><em></em></li>
                  
                  <li>
                    <ul>
                      
                        
                          <li><strong>mode_arg</strong>  </em></li>
                        
                      
                        
                          <li><strong>other_args</strong>  </em></li>
                        
                      
                        
                          <li><strong>file_name</strong>  </em></li>
                        
                      
                        
                          <li><strong>pkg_name</strong>  </em></li>
                        
                      
                    </ul>
                  </li>
                </ul>
              </li>
            
          </ul>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Messages</h3>
      </div>
      <div class="panel-body">
        
          <em>No message files found.</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Services</h3>
      </div>
      <div class="panel-body">
        
          <em>No service files found</em>
        
      </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Plugins</h3>
      </div>
      <div class="panel-body">
        
          <em>No plugins found.</em>
        
      </div>
    </div>
  </div>

  <div class="tab-pane" id="kinetic-questions">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Recent questions tagged <kbd>mh5_anomaly_detector</kbd> at <strong><a href="https://answers.ros.org" target="_blank">answers.ros.org</a></strong></h3>
      </div>
      <div id="kinetic-question-list" class="panel-body" style="display: none;"></div>
      <div id="kinetic-no-question-list" class="panel-body" style="display: none;">
        <p>No questions yet, you can ask one <a href="https://answers.ros.org/questions/ask/?tags=mh5_anomaly_detector,kinetic">here</a>.</p>
      </div>
      <div id="kinetic-get-question-fail" class="panel-body alert alert-warning" style="display: none;">
        <p>Failed to get question list, you can ticket an issue <a href="https://github.com/ros2/rosindex/issues/new" target="_blank" class="alert-link">here</a> </p>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript" src="/js/package_body_tabs.js"></script>

<script id="kinetic-question-list-template" type="text/html">
  <p>
    Browse <a href="https://answers.ros.org/questions/scope:all/sort:activity-desc/tags:mh5_anomaly_detector/page:1/">recent questions</a>
    or see the <a href="https://answers.ros.org/questions/scope:all/sort:votes-desc/tags:mh5_anomaly_detector/page:1/">higest voted ones</a>.
  </p>
  
  <div class="list-group">
    {{#questions}}
    <div class="list-group-item mb-1">
      <a href="{{link}}">
        <h4 class="w-75 float-left">{{title}}</h4>
        <small class="w-25">{{updated}}</small>
      </a>
      <hr>
      {{&description}}
    </div>
    {{/questions}}
  </div>
  
</script>

<script type="text/javascript" src="/js/jquery.jfeed.pack.js"></script>
<link rel="stylesheet" type="text/css" href="/css/prettify.css"/>
<script type="text/javascript" src="/js/prettify.js"></script>
<script type="text/javascript" src="/js/mustache.js"></script>
<script type="text/javascript" src="/js/showdown.min.js"></script>

<script type="text/javascript">
jQuery.browser = {};
(function () {
    jQuery.browser.msie = false;
    jQuery.browser.version = 0;
    if (navigator.userAgent.match(/MSIE ([0-9]+)\./)) {
        jQuery.browser.msie = true;
        jQuery.browser.version = RegExp.$1;
    }
})();
jQuery(function() {
    jQuery.getFeed({
        url: "https://answers.ros.org/feeds/rss/?tags=mh5_anomaly_detector",
        success: function(feed) {
            if (feed.items.length > 0) {
              var converter = new showdown.Converter();
              var questions = feed.items.slice(0, 10).map(function(question) {
                  question.description = converter.makeHtml(question.description);
                  return question;
              });
              var template = jQuery("#kinetic-question-list-template").text();
              Mustache.parse(template);
              var rendered = Mustache.render(template, {questions: questions});
              jQuery("#kinetic-question-list").html(rendered);
              jQuery("#kinetic-question-list pre").addClass("prettyprint");
              jQuery("#kinetic-question-list img").each(function() {
                if (jQuery(this).attr("src").startsWith("/upfiles")) {
                   jQuery(this).attr("src", "https://answers.ros.org" + jQuery(this).attr("src"));
                }
              });
              jQuery("#kinetic-question-list").show();
              PR.prettyPrint();
            } else {
              jQuery("#kinetic-no-question-list").show();
            }
            jQuery("#kinetic-questions-count").text(feed.items.length);
        },
        error: function(res, err) {
          console.error("Failed to get feed:", err)
          jQuery("#kinetic-get-question-fail").show();
        }
    });
});
</script>

          </div>
          <div class="col-md-2 hidden-xs hidden-sm">
            
            
            



<div class="list-group list-group-sm ">
  <a class="list-group-item" target="_blank" href="http://docs.ros.org/kinetic/api/mh5_anomaly_detector/html/" ><span style="margin-right: 5px;" class="glyphicon glyphicon-file"></span> API Docs</a>
  <a class="list-group-item" target="_blank" href="https://github.com/narayave/mh5_anomaly_detector/tree/master/."><span class="glyphicon glyphicon-folder-open" style="margin-right:5px;"></span> Browse Code</a>
  <a class="list-group-item inactive" target="_blank" href="http://wiki.ros.org/mh5_anomaly_detector?distro=kinetic"><span style="margin-right: 5px;" class="glyphicon glyphicon-info-sign"></span> Wiki</a>
  <a class="list-group-item inactive" target="_blank" href="http://http404error.github.io/roseco/graph.html?id=ros.json&focus=mh5_anomaly_detector&height=1&depth=2&tred=standard&metagroup=false&colorby=Health&direction=LR" ><span style="margin-right: 5px;" class="glyphicon glyphicon-tree-deciduous"></span></a>
  
</div>

          </div>
        </div>
      
    </div>
  </div>

  <div class="distro distro-indigo">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>indigo</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-ardent">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>ardent</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-jade">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>jade</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-hydro">
    <div class="container-fluid">
      
          <div class="alert alert-warning">No version for distro <strong>hydro</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>


<script type="text/javascript">
  $(document).ready(function() {
    setupDistroSwitch("crystal");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-4 col-md-4">
          
            <a href="https://github.com/ros-infrastructure" title="Find rosindex in Github">
            <span class="icon  icon--github">
              <svg viewBox="0 0 16 16">
                <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
              </svg>
            </span>

            <span class="username">ros-infrastructure</span>
          </a>
          |
          <em>generated on 2019-01-10</em>
        
        </div>
        <div class="col-sm-8 col-md-8 text-right">
          <p class="text">a community-maintained index of robotics software
 | <a href="/privacy.txt">privacy</a></p>
        </div>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
