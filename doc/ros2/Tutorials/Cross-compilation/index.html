<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>Cross-Compilation</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="https://ros-infrastructure.github.io/index.ros.org//doc/ros2/Tutorials/Cross-compilation/">
    
    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/sphinx.css">
    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie-1.4.1/jquery.cookie.js type="text/javascript"></script>

    <script type="text/javascript" src=/js/ga.js async></script>
    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">

      <div align="center">
        <br>
        <table id="topnav-table">
          <tr>
            <td valign="middle">
                ROS Resources:
              <a href="http://wiki.ros.org/">Documentation</a>
              |
              <a href="http://wiki.ros.org/Support">Support</a>
              |
              <a href="http://discourse.ros.org/">Discussion Forum</a>
              |
              <a href="http://status.ros.org/">Service Status</a>
              |
              <a href="http://answers.ros.org/">Q&A answers.ros.org</a>
            </td>
          </tr>
        </table> <!-- topnav-table -->
      </div>

      <div class="row">

        <div class="col-sm-12 col-md-9" style="margin-top: 8px">
          <div class="row">
            <!-- title -->
            <div class="col-xs-12 col-sm-3 col-md-3" style="white-space:nowrap;">
              <a class="site-title" href="/">ROS Index</a> <sup><a href="https://github.com/ros-infrastructure/rosindex/issues/new" style="vertical-align:super;" class="label label-warning" target="_blank">BETA</a></sup>
            </div>

            <!-- main links -->
            <div class="col-xs-12 col-sm-9 col-md-9 text-right">
              <ul class="list-inline" style="margin-bottom:0px;">
                <li><a class="btn btn-link" href="/about">About</a></li>

                <li class="dropdown">
                  <button id="dLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Index <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                    <li><a href="/packages/page/1/time/">Package List</a></li>
                    <li><a href="/repos/page/1/time/">Repository List</a></li>

                    <li class="hidden" class="divider"></li>


                    <li class="hidden"><a href="/srvs/">Nodes</a></li>
                    <li class="hidden"><a href="/msgs/">Messages</a></li>
                    <li class="hidden"><a href="/srvs/">Services</a></li>
                    <li class="hidden"><a href="/srvs/">Plugins</a></li>

                    <li class="divider"></li>

                    <li><a href="/deps/">System Dependencies</a></li>
                  </ul>
                </li>

                <li class="dropdown disabled">
                  <button id="dLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Doc <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                    
                    <li>
                      <a href="/doc/ros2">
                        ROS2 Overview
                      </a>
                    </li>
                    
                    <li class="hidden" class="divider"></li>

                    <li class="hidden"><a href="/doc/tutorials">Tutorials</a></li>
                    <li class="hidden"><a href="/doc/readmes">Readmes</a></li>
                    <li class="hidden"><a href="/doc/apis">APIs</a></li>
                  </ul>
                </li>

                <li><a class="btn btn-link" href="/contribute">Contribute</a></li>
                <li><a class="btn btn-link" href="/stats">Stats</a></li>
              </ul>

            </div>
          </div>
        </div>

        <!-- searchbox -->
        <div class="col-sm-12 col-md-3" style="margin-top: 12px">
          <form id="top-searchbox" action="/search/" role="form" method="get">
            <div class="input-group input-group-sm">
              <input type="text" class="form-control" name="term" placeholder="Search ROS">
              <span class="input-group-btn">
                <button class="btn btn-default btn-sm" title="Search ROS" type="submit">
                  <span class="glyphicon glyphicon-search"></span>
                </button>
                <a href="https://lunrjs.com/guides/searching.html"
                   title="Help to Search" class="btn btn-default btn-sm">
                  <span class="glyphicon glyphicon-question-sign"></span>
                </a>
              </span>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!--
    <a class="site-title" href="/">ROS Index</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        <a class="page-link" href="/packages">Packages</a>
        <a class="page-link" href="/repos">Repositories</a>
        <a class="page-link" href="/search">Search</a>
      </div>
    </nav>
    -->

  </div>
  <script type="text/javascript">
    $('#top-searchbox').submit(function() {
        return $('#top-searchbox input:text').filter(function() {
          return $(this).val() == "";
        }).length == 0;
    });
  </script>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top: 20px">
  <div class="row">
    <ol class="breadcrumb">
      <li><a href="/">Home</a></li>
      
      <li>
        <a href="/doc/ros2/">
          ROS2 Overview
        </a>
      </li>
      
      <li>
        <a href="/doc/ros2/Tutorials/">
          Tutorials
        </a>
      </li>
      
      <li class="active">Cross-Compilation</li>
    </ol>
  </div>
  <div class="row">
    <nav class="col-md-4 well">
      <h3 style="margin-top: 10px;">Index</h3>
      
      
      <div class="list-group list-group-root">
  



<div class="list-group-item">
  <a href="/doc/ros2/">ROS2 Overview</a>
  
  <a href="#_doc_ros2__children" class="list-group-toggle pull-right"
     data-toggle="collapse" aria-expanded="false">
    
    <span class="glyphicon glyphicon-chevron-up"></span>
    
  </a>
  
</div>

  
<div id="_doc_ros2__children" class="list-group collapse in">
  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/About/">About this documentation</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Concepts/">ROS 2 Concepts</a>
  
  <a href="#_doc_ros2_Concepts__children" class="list-group-toggle pull-right"
     data-toggle="collapse" aria-expanded="false">
    
    <span class="glyphicon glyphicon-chevron-down"></span>
    
  </a>
  
</div>

  
<div id="_doc_ros2_Concepts__children" class="list-group collapse">
  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Concepts/About-Quality-of-Service-Settings/">About Quality of Service Settings</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Concepts/About-ROS-Interfaces/">About ROS 2 Interfaces</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Concepts/ROS-2-Client-Libraries/">About ROS2 client libraries</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Concepts/Logging/">Logging and logger configuration</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Concepts/Overview-of-ROS-2-concepts/">Overview of ROS 2 Concepts</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Concepts/DDS-and-ROS-middleware-implementations/">ROS 2 and different DDS/RTPS vendors</a>
  
</div>



  
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Contributing/">Contributing to ROS 2</a>
  
  <a href="#_doc_ros2_Contributing__children" class="list-group-toggle pull-right"
     data-toggle="collapse" aria-expanded="false">
    
    <span class="glyphicon glyphicon-chevron-down"></span>
    
  </a>
  
</div>

  
<div id="_doc_ros2_Contributing__children" class="list-group collapse">
  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Contributing/Build-Cop-and-Build-Farmer-Guide/">Build Cop and Build Farmer Guide</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Contributing/Design-Guide/">Design Guide: Common patterns in ROS 2</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Contributing/Examples-and-Tools-for-ROS1----ROS2-Migrations/">Examples and tools for ROS1-to-ROS2 Migration</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Contributing/Set-up-a-new-Linux-CI-node/">How to setup Linux Jenkins nodes</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Contributing/Set-up-a-new-Windows-CI-node/">How to setup a Windows Jenkins node</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Contributing/Set-up-a-new-macOS-CI-node/">How to setup a macOS Jenkins node</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Contributing/CI-Server-Setup/">How to setup the Jenkins master</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Contributing/MISRA-Compliance-Guide/">MISRA Compliance Guide</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Contributing/Migration-Guide/">Migration guide from ROS 1</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Contributing/Migration-Guide-Python/">Python Migration guide from ROS 1</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Contributing/Quality-Guide/">Quality Guide: Ensuring code quality</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Contributing/Developer-Guide/">ROS 2 Developer Guide</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Contributing/ROS-2-On-boarding-Guide/">ROS 2 On-boarding Guide</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Contributing/Inter-Sphinx-Support/">Using Sphinx for cross-referencing packages</a>
  
</div>



  
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Contact/">Contact us</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Features/">Features Status</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Installation/">Installation</a>
  
  <a href="#_doc_ros2_Installation__children" class="list-group-toggle pull-right"
     data-toggle="collapse" aria-expanded="false">
    
    <span class="glyphicon glyphicon-chevron-down"></span>
    
  </a>
  
</div>

  
<div id="_doc_ros2_Installation__children" class="list-group collapse">
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Installation/Crystal/">Installing ROS 2 Crystal and earlier</a>
  
  <a href="#_doc_ros2_Installation_Crystal__children" class="list-group-toggle pull-right"
     data-toggle="collapse" aria-expanded="false">
    
    <span class="glyphicon glyphicon-chevron-down"></span>
    
  </a>
  
</div>

  
<div id="_doc_ros2_Installation_Crystal__children" class="list-group collapse">
  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Installation/Crystal/Fedora-Development-Setup/">Building ROS 2 on Fedora Linux</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Installation/Crystal/Linux-Development-Setup/">Building ROS 2 on Linux</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Installation/Crystal/OSX-Development-Setup/">Building ROS 2 on OS X</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Installation/Crystal/Windows-Development-Setup/">Building ROS 2 on Windows</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Installation/Crystal/Install-Connext-Security-Plugins/">Installing Connext security plugins</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Installation/Crystal/Linux-Install-Binary/">Installing ROS 2 on Linux</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Installation/Crystal/OSX-Install-Binary/">Installing ROS 2 on OS X</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Installation/Crystal/Windows-Install-Binary/">Installing ROS 2 on Windows</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Installation/Crystal/Linux-Install-Debians/">Installing ROS2 via Debian Packages</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Installation/Crystal/Maintaining-a-Source-Checkout/">Maintaining a Source Checkout of ROS 2</a>
  
</div>



  
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Installation/Dashing/">Installing ROS 2 Dashing Diademata</a>
  
  <a href="#_doc_ros2_Installation_Dashing__children" class="list-group-toggle pull-right"
     data-toggle="collapse" aria-expanded="false">
    
    <span class="glyphicon glyphicon-chevron-down"></span>
    
  </a>
  
</div>

  
<div id="_doc_ros2_Installation_Dashing__children" class="list-group collapse">
  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Installation/Dashing/Fedora-Development-Setup/">Building ROS 2 on Fedora Linux</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Installation/Dashing/Linux-Development-Setup/">Building ROS 2 on Linux</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Installation/Dashing/OSX-Development-Setup/">Building ROS 2 on OS X</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Installation/Dashing/Windows-Development-Setup/">Building ROS 2 on Windows</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Installation/Dashing/Install-Connext-Security-Plugins/">Installing Connext security plugins</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Installation/Dashing/Linux-Install-Binary/">Installing ROS 2 on Linux</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Installation/Dashing/OSX-Install-Binary/">Installing ROS 2 on OS X</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Installation/Dashing/Windows-Install-Binary/">Installing ROS 2 on Windows</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Installation/Dashing/Linux-Install-Debians/">Installing ROS2 via Debian Packages</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Installation/Dashing/Maintaining-a-Source-Checkout/">Maintaining a Source Checkout of ROS 2</a>
  
</div>



  
  
</div>



  
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Releases/">ROS 2 Distributions</a>
  
  <a href="#_doc_ros2_Releases__children" class="list-group-toggle pull-right"
     data-toggle="collapse" aria-expanded="false">
    
    <span class="glyphicon glyphicon-chevron-down"></span>
    
  </a>
  
</div>

  
<div id="_doc_ros2_Releases__children" class="list-group collapse">
  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Releases/Beta1-Overview/">Beta 1 (codename ‘Asphalt’; December 2016)</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Releases/Beta2-Overview/">Beta 2 (codename ‘r2b2’; July 2017)</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Releases/Beta3-Overview/">Beta 3 (codename ‘r2b3’; September 2017)</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Releases/Release-Howto/">How to Release</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Releases/Release-Ardent-Apalone/">ROS 2 Ardent Apalone (codename ‘ardent’; December 2017)</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Releases/Release-Bouncy-Bolson/">ROS 2 Bouncy Bolson (codename ‘bouncy’; June 2018)</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Releases/Release-Crystal-Clemmys/">ROS 2 Crystal Clemmys (codename ‘crystal’; December 2018)</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Releases/Release-Dashing-Diademata/">ROS 2 Dashing Diademata (codename ‘dashing’; May 31st, 2019)</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Releases/Alpha-Overview/">ROS 2 alpha releases (Aug 2015 - Oct 2016)</a>
  
</div>



  
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Related-Projects/">Related Projects</a>
  
  <a href="#_doc_ros2_Related-Projects__children" class="list-group-toggle pull-right"
     data-toggle="collapse" aria-expanded="false">
    
    <span class="glyphicon glyphicon-chevron-down"></span>
    
  </a>
  
</div>

  
<div id="_doc_ros2_Related-Projects__children" class="list-group collapse">
  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Related-Projects/Intel-ROS2-Projects/">Intel ROS2 Projects</a>
  
</div>



  
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Roadmap/">Roadmap</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/">Tutorials</a>
  
  <a href="#_doc_ros2_Tutorials__children" class="list-group-toggle pull-right"
     data-toggle="collapse" aria-expanded="false">
    
    <span class="glyphicon glyphicon-chevron-up"></span>
    
  </a>
  
</div>

  
<div id="_doc_ros2_Tutorials__children" class="list-group collapse in">
  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/Actions/">Actions</a>
  
  <a href="#_doc_ros2_Tutorials_Actions__children" class="list-group-toggle pull-right"
     data-toggle="collapse" aria-expanded="false">
    
    <span class="glyphicon glyphicon-chevron-down"></span>
    
  </a>
  
</div>

  
<div id="_doc_ros2_Tutorials_Actions__children" class="list-group collapse">
  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/Actions/Creating-an-Action/">Creating an Action</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/Actions/Writing-an-Action-Client-CPP/">Writing an Action Client (C++)</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/Actions/Writing-an-Action-Client-Python/">Writing an Action Client (Python)</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/Actions/Writing-an-Action-Server-CPP/">Writing an Action Server (C++)</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/Actions/Writing-an-Action-Server-Python/">Writing an Action Server (Python)</a>
  
</div>



  
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/Building-ROS-2-on-Linux-with-Eclipse-Oxygen/">Building ROS2 on Linux with Eclipse Oxygen [community-contributed]</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/RQt-Source-Install/">Building RQt from Source</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/RQt-Source-Install-Windows10/">Building RQt from Source on Windows 10</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/RQt-Source-Install-MacOS/">Building RQt from Source on macOS</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/Building-Realtime-rt_preempt-kernel-for-ROS-2/">Building Realtime Linux for ROS 2 [community-contributed]</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/Composition/">Composing multiple nodes in a single process</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/Cross-compilation/">Cross-Compilation</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/Defining-custom-interfaces-(msg-srv)/">Defining custom interfaces (msg/srv)</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/Eclipse-Oxygen-with-ROS-2-and-rviz2/">Eclipse Oxygen with ROS 2 and rviz2 [community-contributed]</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/Intra-Process-Communication/">Efficient intra-process communication</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/Allocator-Template-Tutorial/">Implement a custom memory allocator</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/Rosidl-Tutorial/">Introduction to msg and srv interfaces</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/Introspection-with-command-line-tools/">Introspection with command line tools</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/Launch-system/">Launching/monitoring multiple nodes with Launch</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/Logging-and-logger-configuration/">Logging and logger configuration demo</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/Managed-Nodes/">Management of nodes with managed lifecycles</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/New-features-in-ROS-2-interfaces-(msg-srv)/">New features in ROS 2 interfaces</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/catment/">On the mixing of ament and catkin (catment)</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/RQt-Overview-Usage/">Overview and Usage of RQt</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/Node-arguments/">Passing ROS arguments to nodes via the command-line</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/RQt-Port-Plugin-Windows/">Porting RQt plugins to Windows</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/Python-Programming/">Python Programming in ROS 2</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/Real-Time-Programming/">Real-Time Programming in ROS 2</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/Rosbag-with-ROS1-Bridge/">Recording and playback of topic data with rosbag using the ROS 1 bridge</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/Releasing-a-ROS-2-package-with-bloom/">Releasing a ROS 2 package with bloom</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/Run-2-nodes-in-two-separate-docker-containers/">Running 2 nodes in 2 separate docker containers [community-contributed]</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/Run-2-nodes-in-a-single-docker-container/">Running 2 nodes in a single docker container [community-contributed]</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/dummy-robot-demo/">Trying the dummy robot demo</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/Quality-of-Service/">Use quality-of-service settings to handle lossy networks</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/Ament-Tutorial/">Using Ament</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/Colcon-Tutorial/">Using Colcon to build packages</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/tf2/">Using tf2 with ROS 2</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/Working-with-multiple-RMW-implementations/">Working with multiple ROS 2 middleware implementations</a>
  
</div>



  
  
  
  



<div class="list-group-item">
  <a href="/doc/ros2/Tutorials/Ament-CMake-Documentation/">ament_cmake User Documentation</a>
  
</div>



  
  
</div>



  
  
</div>



</div>

<script type="text/javascript">
  $(function() {
    $('.list-group-toggle').on('click', function() {
      $(this).find('span').toggleClass(
        'glyphicon-chevron-up glyphicon-chevron-down'
      );
    });
  });
</script>

    </nav>
    <div class="col-md-8">
      <a type="button" href="https://github.com/ros2/ros2_documentation/edit/master/source/Tutorials/Cross-compilation.rst"
         class="btn btn-success pull-right"
         style="margin-top: 20px;">
        Edit on Github
      </a>
      <div class="section" id="cross-compilation">
<h1>Cross-Compilation<a class="headerlink" href="#cross-compilation" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#overview" id="id1">Overview</a></p></li>
<li><p><a class="reference internal" href="#how-does-it-work" id="id2">How does it work ?</a></p></li>
<li><p><a class="reference internal" href="#cross-compiling-ros2" id="id3">Cross-compiling ROS2</a></p>
<ul>
<li><p><a class="reference internal" href="#cmake-toolchain-file" id="id4">CMake toolchain-file</a></p></li>
<li><p><a class="reference internal" href="#target-file-system" id="id5">Target file-system</a></p></li>
<li><p><a class="reference internal" href="#build-process" id="id6">Build process</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#cross-compiling-examples-for-arm" id="id7">Cross-compiling examples for Arm</a></p>
<ul>
<li><p><a class="reference internal" href="#install-development-tools" id="id8">1. Install development tools</a></p></li>
<li><p><a class="reference internal" href="#download-ros2-source-code" id="id9">2. Download ROS2 source code</a></p></li>
<li><p><a class="reference internal" href="#prepare-the-sysroot" id="id10">3. Prepare the sysroot</a></p></li>
<li><p><a class="reference internal" href="#build" id="id11">4. Build</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#automated-cross-compilation" id="id12">Automated Cross-compilation</a></p></li>
<li><p><a class="reference internal" href="#cross-compiling-against-a-pre-built-ros2" id="id13">Cross-compiling against a pre-built ROS2</a></p></li>
<li><p><a class="reference internal" href="#run-on-the-target" id="id14">Run on the target</a></p></li>
</ul>
</div>
<div class="section" id="overview">
<h2><a class="toc-backref" href="#id1">Overview</a><a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<dl class="simple">
<dt>Open Robotics provides pre-built ROS2 packages for multiple platforms, but a number of developers still rely on <a class="reference external" href="https://en.wikipedia.org/wiki/Cross_compiler">cross-compilation</a> for different reasons such as:</dt><dd><ul class="simple">
<li><p>The development machine does not match the target system.</p></li>
<li><p>Tuning the build for specific core architecture (e.g. setting -mcpu=cortex-a53 -mfpu=neon-fp-armv8 when building for Raspberry Pi3).</p></li>
<li><p>Targeting a different file systems other than the ones supported by the pre-built images released by Open Robotics.</p></li>
</ul>
</dd>
</dl>
<p>This document provides you with details on how to cross-compile the ROS2 software stack as well as provide examples for cross-compiling to systems based on the Arm cores.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There are a few ROS2 packages that fail cross-compilation and have to be disabled during the build. See <a class="reference internal" href="#build">4. Build</a> section.</p>
</div>
</div>
<div class="section" id="how-does-it-work">
<h2><a class="toc-backref" href="#id2">How does it work ?</a><a class="headerlink" href="#how-does-it-work" title="Permalink to this headline">¶</a></h2>
<p>Cross-compiling simple software (e.g. no dependencies on external libraries) is relatively simple and only requiring a cross-compiler toolchain to be used instead of the native toolchain.</p>
<dl class="simple">
<dt>There are a number of factors which make this process more complex:</dt><dd><ul class="simple">
<li><p>The software being built must support the target architecture. Architecture specific code must be properly isolated and enabled during the build according to the target architecture. Examples include assembly code.</p></li>
<li><p>All dependencies (e.g. libraries) must be present, either as pre-built packages or also cross-compiled before the target software using them is cross-compiled.</p></li>
<li><p>When building software stacks (as opposed to an standalone software) using build tools (e.g. colcon), it is expected from the build tool a mechanism to allow the developer to enable cross-compilation on the underlying build system used by each of software in the stack.</p></li>
</ul>
</dd>
</dl>
</div>
<div class="section" id="cross-compiling-ros2">
<h2><a class="toc-backref" href="#id3">Cross-compiling ROS2</a><a class="headerlink" href="#cross-compiling-ros2" title="Permalink to this headline">¶</a></h2>
<dl class="simple">
<dt>Although ROS2 is a rich software stack with a number of dependencies, it primarily uses two different types of packages:</dt><dd><ul class="simple">
<li><p>Python based software, which requires no cross-compilation.</p></li>
<li><p>CMake based software, which provides a mechanism to do cross-compilation.</p></li>
</ul>
</dd>
</dl>
<p>Furthermore, the ROS2 software stack is built with <a class="reference external" href="https://github.com/colcon/colcon-core">Colcon</a> which provides a mechanism to forward parameters to the CMake instance used for the individual build of each package/library that is part of the ROS2 distribution.</p>
<p>When building ROS2 natively, the developer is required to download all the dependencies (e.g. Python and other libraries) before compiling the packages that are part of the ROS2 distribution. When cross-compiling, the same approach is required. The developer must first have the target system’s filesystem with all dependencies already installed.</p>
<p>The next sections of this document explain in detail the use of <a class="reference external" href="https://cmake.org/cmake/help/latest/manual/cmake-toolchains.7.html">cmake-toolchains</a> and the <a class="reference external" href="https://cmake.org/cmake/help/latest/variable/CMAKE_SYSROOT.html">CMAKE_SYSROOT</a> feature to cross-compile ROS2.</p>
<div class="section" id="cmake-toolchain-file">
<h3><a class="toc-backref" href="#id4">CMake toolchain-file</a><a class="headerlink" href="#cmake-toolchain-file" title="Permalink to this headline">¶</a></h3>
<p>A CMake toolchain-file is a file which defines variables to configure CMake for cross-compilation. The basic entries are:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CMAKE_SYSTEM_NAME</span></code>: the target platform, e.g. <code class="docutils literal notranslate"><span class="pre">linux</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CMAKE_SYSTEM_PROCESSOR</span></code>: the target architecture, e.g. <code class="docutils literal notranslate"><span class="pre">aarch64</span></code> or <code class="docutils literal notranslate"><span class="pre">arm</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CMAKE_SYSROOT</span></code>: the path to the target file-system</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CMAKE_C_COMPILER</span></code>: the C cross-compiler, e.g. <code class="docutils literal notranslate"><span class="pre">aarch64-linux-gnu-gcc</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CMAKE_CXX_COMPILER</span></code>: the C++ cross-compiler, e.g. <code class="docutils literal notranslate"><span class="pre">aarch64-linux-gnu-g++</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CMAKE_FIND_ROOT_PATH</span></code>: an alternative path used by the <code class="docutils literal notranslate"><span class="pre">find_*</span></code> command to find the file-system</p></li>
</ul>
</div></blockquote>
<p>When cross-compiling ROS2, the following options are required to be set:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CMAKE_FIND_ROOT_PATH</span></code>: the alternative path used by the <code class="docutils literal notranslate"><span class="pre">find_*</span></code> command, use it to specify the path to ROS2 <code class="docutils literal notranslate"><span class="pre">/install</span></code> folder</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CMAKE_FIND_ROOT_PATH_MODE_*</span></code>: the search strategy for program,package,library, and include, usually: <code class="docutils literal notranslate"><span class="pre">NEVER</span></code> (look on the host-fs), <code class="docutils literal notranslate"><span class="pre">ONLY</span></code> (look on sysroot), <code class="docutils literal notranslate"><span class="pre">ONLY</span></code> (look on sysroot) and <code class="docutils literal notranslate"><span class="pre">ONLY</span></code> (look on sysroot)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PYTHON_SOABI</span></code>: the index name of the python libraries generated by ROS2, e.g. <code class="docutils literal notranslate"><span class="pre">cpython-36m-aarch64-linux-gnu</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">THREADS_PTHREAD_ARG</span> <span class="pre">&quot;0&quot;</span> <span class="pre">CACHE</span> <span class="pre">STRING</span> <span class="pre">&quot;Result</span> <span class="pre">from</span> <span class="pre">TRY_RUN&quot;</span> <span class="pre">FORCE</span></code>: Force the result of the <code class="docutils literal notranslate"><span class="pre">TRY_RUN</span></code> cmd to 0 (success) because binaries can not run on the host system.</p></li>
</ul>
</div></blockquote>
<p>The toolchain-file is provided to CMake with the <code class="docutils literal notranslate"><span class="pre">-DCMAKE_TOOLCHAIN_FILE=path/to/file</span></code> parameter. This will also set the <code class="docutils literal notranslate"><span class="pre">CMAKE_CROSSCOMPILING</span></code> variable to <code class="docutils literal notranslate"><span class="pre">true</span></code> which can be used by the software being built.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">CMAKE_SYSROOT</span></code> is particularly important for ROS2 as the packages need many dependencies (e.g. python, openssl, opencv, poco, eigen3, …).
Setting <code class="docutils literal notranslate"><span class="pre">CMAKE_SYSROOT</span></code> to a target file-system with all the dependencies installed on it will allow CMake to find them during the cross-compilation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can find more information on the CMake <a class="reference external" href="https://cmake.org/cmake/help/latest/manual/cmake-toolchains.7.html">documentation</a> page.</p>
</div>
<p>When dowloading the ROS2 source code, a generic toolchain-file is available in the repository <a class="reference external" href="https://github.com/ros2/cross_compile">ros2/cross_compile/cmake-toolchains</a> which can be downloaded separately. Further examples on using it can be found on the <a class="reference internal" href="#cross-compiling-examples-for-arm">Cross-compiling examples for Arm</a> section.</p>
</div>
<div class="section" id="target-file-system">
<h3><a class="toc-backref" href="#id5">Target file-system</a><a class="headerlink" href="#target-file-system" title="Permalink to this headline">¶</a></h3>
<p>As mentioned previously, ROS2 requires different libraries which needs to be provided to cross-compile.</p>
<dl class="simple">
<dt>There are a number of ways to obtain the file-system:</dt><dd><ul class="simple">
<li><p>downloading a pre-built image</p></li>
<li><p>installing the dependencies on the target and exporting the file-system (e.g. with sshfs)</p></li>
<li><p>using qemu + docker (or chroot) to generate the file-system on the host machine.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can find information on how to use Docker + qemu on the next <a class="reference internal" href="#cross-compiling-examples-for-arm">Cross-compiling examples for Arm</a> section.</p>
</div>
</div>
<div class="section" id="build-process">
<h3><a class="toc-backref" href="#id6">Build process</a><a class="headerlink" href="#build-process" title="Permalink to this headline">¶</a></h3>
<p>The build process is similar to native compilation. The only difference is an extra argument to <code class="docutils literal notranslate"><span class="pre">Colcon</span></code> to specify the <code class="docutils literal notranslate"><span class="pre">toolchain-file</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>colcon build --merge-install <span class="se">\</span>
    --cmake-force-configure <span class="se">\</span>
    --cmake-args <span class="se">\</span>
        -DCMAKE_TOOLCHAIN_FILE<span class="o">=</span><span class="s2">&quot;&lt;path_to_toolchain/toolchainfile.cmake&gt;&quot;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">toolchain-file</span></code> provide to CMake the information of the <code class="docutils literal notranslate"><span class="pre">cross-compiler</span></code> and the <code class="docutils literal notranslate"><span class="pre">target</span> <span class="pre">file-system</span></code>.
<code class="docutils literal notranslate"><span class="pre">Colcon</span></code> will call CMake with the given toolchain-file on every package of ROS2.</p>
</div>
</div>
<div class="section" id="cross-compiling-examples-for-arm">
<h2><a class="toc-backref" href="#id7">Cross-compiling examples for Arm</a><a class="headerlink" href="#cross-compiling-examples-for-arm" title="Permalink to this headline">¶</a></h2>
<p>After <a class="reference external" href="../Installation/Linux-Development-Setup">downloading the ROS2 source code</a>, you can add cross-compilation assets to the workspace via <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">https://github.com/ros2/cross_compile.git</span> <span class="pre">src/ros2/cross_compile</span></code>. These are working examples on how to cross-compile for Arm cores.</p>
<dl class="simple">
<dt>The following targets are supported:</dt><dd><ul class="simple">
<li><p>Ubuntu-arm64: To be used with any ARMv8-A based system.</p></li>
<li><p>Ubuntu-armhf: To be used with any modern ARMv7-A based system.</p></li>
</ul>
</dd>
<dt>These are the main steps:</dt><dd><ul class="simple">
<li><p>Installing development tools</p></li>
<li><p>Downloading ROS2 source code</p></li>
<li><p>Downloading the ROS2 cross-compilation assets</p></li>
<li><p>Preparing the sysroot</p></li>
<li><p>Cross-compiling the ROS2 software stack</p></li>
</ul>
</dd>
</dl>
<p>The next sections explains in detail each of these steps.
For a quick-setup, have a look at the <a class="reference internal" href="#automated-cross-compilation">Automated Cross-compilation</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These steps were tested on an Ubuntu 18.04 (Bionic)</p>
</div>
<div class="section" id="install-development-tools">
<h3><a class="toc-backref" href="#id8">1. Install development tools</a><a class="headerlink" href="#install-development-tools" title="Permalink to this headline">¶</a></h3>
<p>This step is similar to when building natively. The difference is that some of the libraries and tools are not required because they will be in the sysroot instead.
The following packages are required</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt update <span class="o">&amp;&amp;</span> sudo apt install -y <span class="se">\</span>
    cmake <span class="se">\</span>
    git <span class="se">\</span>
    wget <span class="se">\</span>
    python3-pip <span class="se">\</span>
    qemu-user-static <span class="se">\</span>
    g++-aarch64-linux-gnu <span class="se">\</span>
    g++-arm-linux-gnueabihf <span class="se">\</span>
    pkg-config-aarch64-linux-gnu

python3 -m pip install -U <span class="se">\</span>
    vcstool <span class="se">\</span>
    colcon-common-extensions
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can install vcstool and colcon-common-extensions via pip. This
means you are not required to add extra apt repositories.</p>
</div>
<p>Docker is used to build the target environment. Follow the official <a class="reference external" href="https://docs.docker.com/install/linux/docker-ce/ubuntu/">documentation</a> for the installation.</p>
</div>
<div class="section" id="download-ros2-source-code">
<h3><a class="toc-backref" href="#id9">2. Download ROS2 source code</a><a class="headerlink" href="#download-ros2-source-code" title="Permalink to this headline">¶</a></h3>
<p>Then create a workspace and download the ROS2 source code:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir -p ~/cc_ws/ros2_ws/src
<span class="nb">cd</span> ~/cc_ws/ros2_ws
wget https://raw.githubusercontent.com/ros2/ros2/release-latest/ros2.repos
vcs-import src &lt; ros2.repos
git clone https://github.com/ros2/cross_compile.git src/ros2/cross_compile
<span class="nb">cd</span> ..
</pre></div>
</div>
</div>
<div class="section" id="prepare-the-sysroot">
<h3><a class="toc-backref" href="#id10">3. Prepare the sysroot</a><a class="headerlink" href="#prepare-the-sysroot" title="Permalink to this headline">¶</a></h3>
<p>Build an arm Ubuntu image with all the ROS2 dependencies using Docker and qemu:
Copy the <code class="docutils literal notranslate"><span class="pre">qemu-static</span></code> binary to the workspace.
It will be used to install the ros2 dependencies on the target file-system with docker.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir qemu-user-static
cp /usr/bin/qemu-*-static qemu-user-static
</pre></div>
</div>
<p>The standard <a class="reference external" href="../Installation/Linux-Development-Setup">setup</a> process of ROS2 is run inside an arm docker. This is possible thanks to <code class="docutils literal notranslate"><span class="pre">qemu-static</span></code>, which will emulate an arm machine. The base image used is an Ubuntu Bionic from Docker Hub.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker build -t arm_ros2:latest -f ros2_ws/src/ros2/cross_compile/sysroot/Dockerfile_ubuntu_arm .
docker run --name arm_sysroot arm_ros2:latest
</pre></div>
</div>
<p>Export the resulting container to a tarball and extract it:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker container <span class="nb">export</span> -o sysroot_docker.tar arm_sysroot
mkdir sysroot_docker
tar -C sysroot_docker -xf sysroot_docker.tar lib usr opt etc
docker rm arm_sysroot
</pre></div>
</div>
<p>This container can be used later as virtual target to run the created file-system and run the demo code.</p>
</div>
<div class="section" id="build">
<h3><a class="toc-backref" href="#id11">4. Build</a><a class="headerlink" href="#build" title="Permalink to this headline">¶</a></h3>
<p>Set the variables used by the generic toolchain-file</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">TARGET_ARCH</span><span class="o">=</span>aarch64
<span class="nb">export</span> <span class="nv">TARGET_TRIPLE</span><span class="o">=</span>aarch64-linux-gnu
<span class="nb">export</span> <span class="nv">CC</span><span class="o">=</span>/usr/bin/<span class="nv">$TARGET_TRIPLE</span>-gcc
<span class="nb">export</span> <span class="nv">CXX</span><span class="o">=</span>/usr/bin/<span class="nv">$TARGET_TRIPLE</span>-g++
<span class="nb">export</span> <span class="nv">CROSS_COMPILE</span><span class="o">=</span>/usr/bin/<span class="nv">$TARGET_TRIPLE</span>-
<span class="nb">export</span> <span class="nv">SYSROOT</span><span class="o">=</span>~/cc_ws/sysroot_docker
<span class="nb">export</span> <span class="nv">ROS2_INSTALL_PATH</span><span class="o">=</span>~/cc_ws/ros2_ws/install
<span class="nb">export</span> <span class="nv">PYTHON_SOABI</span><span class="o">=</span>cpython-36m-<span class="nv">$TARGET_TRIPLE</span>
</pre></div>
</div>
<p>The following packages still cause errors during the cross-compilation (under investigation) and must be disabled for now.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>touch <span class="se">\</span>
    ros2_ws/src/ros2/rviz/COLCON_IGNORE <span class="se">\</span>
    ros2_ws/src/ros-visualization/COLCON_IGNORE
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">Poco</span></code> pre-built has a known issue where it is searching for <code class="docutils literal notranslate"><span class="pre">libz</span></code> and <code class="docutils literal notranslate"><span class="pre">libpcre</span></code> on the host system instead of SYSROOT.
As a workaround for the moment, please link both libraries into the the host’s file-system.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir -p /usr/lib/<span class="nv">$TARGET_TRIPLE</span>
ln -s <span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span>/sysroot_docker/lib/<span class="nv">$TARGET_TRIPLE</span>/libz.so.1 /usr/lib/<span class="nv">$TARGET_TRIPLE</span>/libz.so
ln -s <span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span>/sysroot_docker/lib/<span class="nv">$TARGET_TRIPLE</span>/libpcre.so.3 /usr/lib/<span class="nv">$TARGET_TRIPLE</span>/libpcre.so
</pre></div>
</div>
<p>Then, start a build with colcon specifying the toolchain-file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ros2_ws

colcon build --merge-install <span class="se">\</span>
    --cmake-force-configure <span class="se">\</span>
    --cmake-args <span class="se">\</span>
        -DCMAKE_VERBOSE_MAKEFILE:BOOL<span class="o">=</span>ON <span class="se">\</span>
        -DCMAKE_TOOLCHAIN_FILE<span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span><span class="s2">/src/ros2/cross_compile/cmake-toolchains/generic_linux.cmake&quot;</span> <span class="se">\</span>
        -DSECURITY<span class="o">=</span>ON
</pre></div>
</div>
<p>Done! The install and build directories will contain the cross-compiled assets.</p>
</div>
</div>
<div class="section" id="automated-cross-compilation">
<h2><a class="toc-backref" href="#id12">Automated Cross-compilation</a><a class="headerlink" href="#automated-cross-compilation" title="Permalink to this headline">¶</a></h2>
<p>All the steps above are also included into a Dockerfile and can be used for automation/CI.</p>
<p>First, download the dockerfile and build the image:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>wget https://raw.githubusercontent.com/ros2/cross_compile/master/Dockerfile_cc_for_arm
docker build -t ros2-crosscompiler:latest - &lt; Dockerfile_cc_for_arm
</pre></div>
</div>
<p>Now run the image with:
(it will take a while !)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker run -it --name ros2_cc <span class="se">\</span>
    -v /var/run/docker.sock:/var/run/docker.sock <span class="se">\</span>
    ros2-crosscompiler:latest
</pre></div>
</div>
<p>..note:: The -v /var/run/docker.sock allow us to use Docker inside Docker.</p>
<p>The result of the build will be inside the <code class="docutils literal notranslate"><span class="pre">ros2_ws</span></code> directory, which can be exported with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker cp ros2_cc:/root/cc_ws/ros2_ws .
</pre></div>
</div>
</div>
<div class="section" id="cross-compiling-against-a-pre-built-ros2">
<h2><a class="toc-backref" href="#id13">Cross-compiling against a pre-built ROS2</a><a class="headerlink" href="#cross-compiling-against-a-pre-built-ros2" title="Permalink to this headline">¶</a></h2>
<p>It is possible to cross-compile your packages against a pre-built ROS2. The steps are similar to the previous <a class="reference internal" href="#cross-compiling-examples-for-arm">Cross-compiling examples for Arm</a> section, with the following modifications:</p>
<p>Instead of downloading the ROS2 stack, just populate your workspace with your package (ros2 examples on this case) and the cross-compilation assets:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir -p ~/cc_ws/ros2_ws/src
<span class="nb">cd</span> ~/cc_ws/ros2_ws/src
git clone https://github.com/ros2/examples.git
git clone https://github.com/ros2/cross_compile.git
<span class="nb">cd</span> ..
</pre></div>
</div>
<p>Generate and export the file-system as described in <a class="reference internal" href="#prepare-the-sysroot">3. Prepare the sysroot</a>, but with the provided <code class="docutils literal notranslate"><span class="pre">Dockerfile_ubuntu_arm64_prebuilt</span></code>. These <code class="docutils literal notranslate"><span class="pre">_prebuilt</span></code> Dockerfile will use the <a class="reference external" href="https://index.ros.org/doc/ros2/Linux-Install-Debians/">binary packages</a> to install ROS2 instead of building from source.</p>
<p>Modify the environment variable <code class="docutils literal notranslate"><span class="pre">ROS2_INSTALL_PATH</span></code> to point to the installation directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">ROS2_INSTALL_PATH</span><span class="o">=</span>~/cc_ws/sysroot_docker/opt/ros/crystal
</pre></div>
</div>
<p>Source the <code class="docutils literal notranslate"><span class="pre">setup.bash</span></code> script on the target file-system:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span> <span class="nv">$ROS2_INSTALL_PATH</span>/setup.bash
</pre></div>
</div>
<p>Then, start a build with <code class="docutils literal notranslate"><span class="pre">Colcon</span></code> specifying the <code class="docutils literal notranslate"><span class="pre">toolchain-file</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>colcon build <span class="se">\</span>
    --merge-install <span class="se">\</span>
    --cmake-force-configure <span class="se">\</span>
    --cmake-args <span class="se">\</span>
        -DCMAKE_VERBOSE_MAKEFILE:BOOL<span class="o">=</span>ON <span class="se">\</span>
        -DCMAKE_TOOLCHAIN_FILE<span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span><span class="s2">/src/cross_compile/cmake-toolchains/generic_linux.cmake&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="run-on-the-target">
<h2><a class="toc-backref" href="#id14">Run on the target</a><a class="headerlink" href="#run-on-the-target" title="Permalink to this headline">¶</a></h2>
<p>Copy the file-system on your target or use the previously built docker image:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker run -it --rm -v <span class="sb">`</span><span class="nb">pwd</span><span class="sb">`</span>/ros2_ws:/ros2_ws arm_ros2:latest
</pre></div>
</div>
<p>Source the environment:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span> /ros2_ws/install/local_setup.bash
</pre></div>
</div>
<p>Run some of the C++ or python examples:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2 run demo_nodes_cpp listener <span class="p">&amp;</span>
ros2 run demo_nodes_py talker
</pre></div>
</div>
</div>
</div>

    </div>
  </div>
</div>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-4 col-md-4">
          
            <a href="https://github.com/ros-infrastructure" title="Find rosindex in Github">
            <span class="icon  icon--github">
              <svg viewBox="0 0 16 16">
                <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
              </svg>
            </span>

            <span class="username">ros-infrastructure</span>
          </a>
          |
          <em>generated on 2019-05-24</em>
        
        </div>
        <div class="col-sm-8 col-md-8 text-right">
          <p class="text">a community-maintained index of robotics software
 | <a href="/privacy.txt">privacy</a></p>
        </div>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
