<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Index</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="https://ros-infrastructure.github.io/index.ros.org//r/uav_testing/github-osrf-uav_testing/">
    
    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/sphinx.css">
    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie-1.4.1/jquery.cookie.js type="text/javascript"></script>

    <script type="text/javascript" src=/js/ga.js async></script>
    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">

      <div align="center">
        <br>
        <table id="topnav-table">
          <tr>
            <td valign="middle">
                ROS Resources:
              <a href="http://wiki.ros.org/">Documentation</a>
              |
              <a href="http://wiki.ros.org/Support">Support</a>
              |
              <a href="http://discourse.ros.org/">Discussion Forum</a>
              |
              <a href="http://status.ros.org/">Service Status</a>
              |
              <a href="http://answers.ros.org/">Q&A answers.ros.org</a>
            </td>
          </tr>
        </table> <!-- topnav-table -->
      </div>

      <div class="row">

        <div class="col-sm-12 col-md-9" style="margin-top: 8px">
          <div class="row">
            <!-- title -->
            <div class="col-xs-12 col-sm-3 col-md-3" style="white-space:nowrap;">
              <a class="site-title" href="/">ROS Index</a> <sup><a href="https://github.com/ros-infrastructure/rosindex/issues/new" style="vertical-align:super;" class="label label-warning" target="_blank">BETA</a></sup>
            </div>

            <!-- main links -->
            <div class="col-xs-12 col-sm-9 col-md-9 text-right">
              <ul class="list-inline" style="margin-bottom:0px;">
                <li><a class="btn btn-link" href="/about">About</a></li>

                <li class="dropdown">
                  <button id="dLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Index <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                    <li><a href="/packages/page/1/time/">Package List</a></li>
                    <li><a href="/repos/page/1/time/">Repository List</a></li>

                    <li class="hidden" class="divider"></li>


                    <li class="hidden"><a href="/srvs/">Nodes</a></li>
                    <li class="hidden"><a href="/msgs/">Messages</a></li>
                    <li class="hidden"><a href="/srvs/">Services</a></li>
                    <li class="hidden"><a href="/srvs/">Plugins</a></li>

                    <li class="divider"></li>

                    <li><a href="/deps/">System Dependencies</a></li>
                  </ul>
                </li>

                <li class="dropdown disabled">
                  <button id="dLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Doc <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                    
                    <li>
                      <a href="/doc/ros2">
                        ROS2 Overview
                      </a>
                    </li>
                    
                    <li class="hidden" class="divider"></li>

                    <li class="hidden"><a href="/doc/tutorials">Tutorials</a></li>
                    <li class="hidden"><a href="/doc/readmes">Readmes</a></li>
                    <li class="hidden"><a href="/doc/apis">APIs</a></li>
                  </ul>
                </li>

                <li><a class="btn btn-link" href="/contribute">Contribute</a></li>
                <li><a class="btn btn-link" href="/stats">Stats</a></li>
              </ul>

            </div>
          </div>
        </div>

        <!-- searchbox -->
        <div class="col-sm-12 col-md-3" style="margin-top: 12px">
          <form id="top-searchbox" action="/search/" role="form" method="get">
            <div class="input-group input-group-sm">
              <input type="text" class="form-control" name="term" placeholder="Search ROS">
              <span class="input-group-btn">
                <button class="btn btn-default btn-sm" title="Search ROS" type="submit">
                  <span class="glyphicon glyphicon-search"></span>
                </button>
                <a href="https://lunrjs.com/guides/searching.html"
                   title="Help to Search" class="btn btn-default btn-sm">
                  <span class="glyphicon glyphicon-question-sign"></span>
                </a>
              </span>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!--
    <a class="site-title" href="/">ROS Index</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        <a class="page-link" href="/packages">Packages</a>
        <a class="page-link" href="/repos">Repositories</a>
        <a class="page-link" href="/search">Search</a>
      </div>
    </nav>
    -->

  </div>
  <script type="text/javascript">
    $('#top-searchbox').submit(function() {
        return $('#top-searchbox input:text').filter(function() {
          return $(this).val() == "";
        }).length == 0;
    });
  </script>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top:20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/repos">Repos</a></li>
        <li class="active">uav_testing</li>
        <!--<li class="active">uav_testing</li>-->
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="crystal-option" class="distro-button btn btn-xs btn-default" href="#crystal" data="crystal">
      <input type="radio" name="options" id="crystal-radio" autocomplete="off"> crystal
    </label>
  
    <label id="bouncy-option" class="distro-button btn btn-xs btn-default" href="#bouncy" data="bouncy">
      <input type="radio" name="options" id="bouncy-radio" autocomplete="off"> bouncy
    </label>
  
    <label id="melodic-option" class="distro-button btn btn-xs btn-primary" href="#melodic" data="melodic">
      <input type="radio" name="options" id="melodic-radio" autocomplete="off"> melodic
    </label>
  
    <label id="lunar-option" class="distro-button btn btn-xs btn-default" href="#lunar" data="lunar">
      <input type="radio" name="options" id="lunar-radio" autocomplete="off"> lunar
    </label>
  
    <label id="kinetic-option" class="distro-button btn btn-xs btn-primary" href="#kinetic" data="kinetic">
      <input type="radio" name="options" id="kinetic-radio" autocomplete="off"> kinetic
    </label>
  
    <label id="indigo-option" class="distro-button btn btn-xs btn-default" href="#indigo" data="indigo">
      <input type="radio" name="options" id="indigo-radio" autocomplete="off"> indigo
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-default" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="ardent" id="ardent-option" class="disabled older-distro-option"  href="#ardent">
          <a href="#ardent" data="ardent" id="ardent-button">ardent</a>
        </li>
      
        <li data="jade" id="jade-option" class="disabled older-distro-option"  href="#jade">
          <a href="#jade" data="jade" id="jade-button">jade</a>
        </li>
      
        <li data="hydro" id="hydro-option" class="disabled older-distro-option"  href="#hydro">
          <a href="#hydro" data="hydro" id="hydro-button">hydro</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
    <div class="row">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/uav_testing">uav_testing</a> <small>repository</small></h3>
        
      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 50px">
          <a type="button" class="btn btn-xs btn-default" data-toggle="tooltip" data-placement="left" title="View Instances" 
            href="/repos/uav_testing"><span class="glyphicon glyphicon-th"></span></a>
        </div>
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-osrf-uav_testing
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-osrf-uav_testing" role="menuitem" tabindex="-1" href="/r/uav_testing/github-osrf-uav_testing" data="github-osrf-uav_testing">
                    <span class="glyphicon glyphicon-star"></span>
                    github-osrf-uav_testing
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

    </div>
  </div>
</div>


  <div class="distro distro-crystal">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>crystal</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-bouncy">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>bouncy</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            

  <table class="table table-condensed">
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/osrf/uav_testing.git">https://github.com/osrf/uav_testing.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2019-05-14
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/ksql_airport/github-osrf-uav_testing">ksql_airport</a></td>
                    <td>0.0.1</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/mcmillan_airfield/github-osrf-uav_testing">mcmillan_airfield</a></td>
                    <td>0.0.1</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/sand_island/github-osrf-uav_testing">sand_island</a></td>
                    <td>0.0.1</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/yosemite_valley/github-osrf-uav_testing">yosemite_valley</a></td>
                    <td>0.0.1</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<p>This is a repository with example worlds generated from real world examples.</p>

<p>Here are some notes </p>

<h1 id="download-content">Download content</h1>

<p>Go to 
<a href="https://earthexplorer.usgs.gov/">https://earthexplorer.usgs.gov/</a></p>

<p>Create an account</p>

<p>Find the region of interest. Select a point or set of points.</p>

<p>Select Data Set(s):</p>

<ul>
<li>Aerial Imagry -&gt; High Resolution Orthoimagery</li>
<li>Digital Elevation -&gt; SRTM -&gt; SRTM 1 Arc-Second Global</li>
</ul>

<p>Go to the Results and download all the tiles.
You can download them individually or in a bulk download.</p>

<p>Alternative data sources should be fine as well.</p>

<p>There will be a lot of data.
The 9 tiles I used for McMillan were each approximately 400MB
And the height map arc tile is ~ 25MB.</p>

<h1 id="isolate-area-of-interest">Isolate area of interest</h1>

<p>Once you have the region of interest use gdalwarp to extract the regions of interest.
This is the script I used for mcmillan and yosemite</p>
<div class="highlight"><pre><code class="language-" data-lang=""><span class="c">#!/bin/bash                                                                     </span>

<span class="nb">set</span> <span class="nt">-x</span>

<span class="c"># Yosemite                                                                      </span>
<span class="nv">SOUTH</span><span class="o">=</span>37.6993
<span class="nv">NORTH</span><span class="o">=</span>37.7690
<span class="nv">EAST</span><span class="o">=</span><span class="nt">-119</span>.5285
<span class="nv">WEST</span><span class="o">=</span><span class="nt">-119</span>.5978
<span class="nv">NAME</span><span class="o">=</span>yosemite
<span class="nv">RESOLUTION</span><span class="o">=</span>5000
<span class="nv">SOURCE_DIR</span><span class="o">=</span>/data/temp_gis
<span class="nv">PACKAGE_DIR</span><span class="o">=</span>/tmp/ws/src/uav_testing/yosemite_valley
<span class="nv">SOURCE_DEM</span><span class="o">=</span>n37_w120_1arc_v3.tif
<span class="nv">SOURCE_IMAGES</span><span class="o">=</span><span class="s1">'m_3711912_se_11_h_20160701.tif m_3711912_sw_11_h_20160701.tif m_\
3711920_ne_11_h_20160701.tif m_3711920_nw_11_h_20160701.tif'</span>

<span class="c"># mcmillan                                                                      </span>
<span class="nv">SOUTH</span><span class="o">=</span>35.692125
<span class="nv">NORTH</span><span class="o">=</span>35.755904
<span class="nv">EAST</span><span class="o">=</span><span class="nt">-120</span>.735120
<span class="nv">WEST</span><span class="o">=</span><span class="nt">-120</span>.798966
<span class="nv">NAME</span><span class="o">=</span>mcmillan
<span class="nv">RESOLUTION</span><span class="o">=</span>5000
<span class="nv">SOURCE_DIR</span><span class="o">=</span>/data/temp_gis/mcmillan
<span class="nv">PACKAGE_DIR</span><span class="o">=</span>/tmp/ws/src/uav_testing/mcmillan_airfield
<span class="nv">SOURCE_DEM</span><span class="o">=</span>n35_w121_1arc_v3.tif
<span class="nv">SOURCE_IMAGES</span><span class="o">=</span><span class="s1">'5724_2452.tif 5724_2462.tif 5724_2472.tif 5734_2452.tif 5734_246\
2.tif 5734_2472.tif 5744_2452.tif 5744_2462.tif 5744_2472.tif'</span>


<span class="nv">OUTPUT_IMAGE</span><span class="o">=</span><span class="k">${</span><span class="nv">NAME</span><span class="k">}</span>_color.tif
<span class="nv">OUTPUT_DEM</span><span class="o">=</span><span class="k">${</span><span class="nv">PACKAGE_DIR</span><span class="k">}</span>/media/<span class="k">${</span><span class="nv">NAME</span><span class="k">}</span>_elevation.tif
<span class="nv">OUTPUT_PNG</span><span class="o">=</span><span class="k">${</span><span class="nv">PACKAGE_DIR</span><span class="k">}</span>/media/textures/<span class="k">${</span><span class="nv">NAME</span><span class="k">}</span>_color.png


<span class="nb">cd</span> <span class="nv">$SOURCE_DIR</span>

<span class="nb">rm</span> <span class="nt">-f</span> <span class="nv">$OUTPUT_DEM</span> <span class="nv">$OUTPUT_IMAGE</span> <span class="nv">$OUTPUT_PNG</span>


gdalwarp <span class="nt">-te</span> <span class="nv">$WEST</span> <span class="nv">$SOUTH</span> <span class="nv">$EAST</span> <span class="nv">$NORTH</span> <span class="nv">$SOURCE_DEM</span>  <span class="nv">$OUTPUT_DEM</span>

gdalwarp <span class="nt">-t_srs</span> <span class="s1">'+proj=longlat +datum=WGS84 +no_defs '</span> <span class="nt">-ts</span> <span class="nv">$RESOLUTION</span> 0 <span class="nt">-te</span> <span class="nv">$W</span><span class="se">\</span>
EST <span class="nv">$SOUTH</span> <span class="nv">$EAST</span> <span class="nv">$NORTH</span> <span class="nv">$SOURCE_IMAGES</span> <span class="nv">$OUTPUT_IMAGE</span>
convert <span class="nv">$OUTPUT_IMAGE</span> <span class="nv">$OUTPUT_PNG</span>
</code></pre></div>
<p>Save these files into your gazebo resource path that's exported by the package.</p>

<p>Note that the 5000 is the resolution of the file laterally.</p>

<h1 id="generate-world">Generate World</h1>

<p>Then create a world that references them.</p>

<p>I pushed the pose down such that the airfield is at zero height in gazebo.
The size of the texture is the width of the content in meters.</p>

<p>Note that there's a scaling issue with the textures. I have ticketed it here: <a href="https://bitbucket.org/osrf/gazebo/issues/2603/texture-scaling-on-heightmaps-does-not">https://bitbucket.org/osrf/gazebo/issues/2603/texture-scaling-on-heightmaps-does-not</a></p>

<p>It looks like a rendering of about 80% width is necessary.</p>

<p>Gazebo also seems to work better with square content, this might have been an artifact from before validating the above ratio.</p>

<h1 id="developmet-tip">Developmet tip</h1>

<p>If you are changing any textures on the height map.
Whether content or meta data it is all cached.
To change anything you will need to remove the cached paging content in <code>~/.gazebo/paging/VISUAL_ELEMENT</code></p>

<p>Ticketed at: <a href="https://bitbucket.org/osrf/gazebo/issues/2604/the-default-caching-behavior-of-caching">https://bitbucket.org/osrf/gazebo/issues/2604/the-default-caching-behavior-of-caching</a></p>

<h1 id="resources">Resources:</h1>

<p>A potential other approach is to overlay in QGIS: <a href="https://opengislab.com/blog/2018/3/20/3d-dem-visualization-in-qgis-30">https://opengislab.com/blog/2018/3/20/3d-dem-visualization-in-qgis-30</a></p>

<p>gdalwarp docs: <a href="https://www.gdal.org/gdalwarp.html">https://www.gdal.org/gdalwarp.html</a></p>

<p>SDF geometry documentation: <a href="http://sdformat.org/spec?elem=geometry&amp;ver=1.6">http://sdformat.org/spec?elem=geometry&amp;ver=1.6</a></p>
</div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-lunar">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>lunar</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-kinetic">
    <div class="container-fluid">
      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            

  <table class="table table-condensed">
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/osrf/uav_testing.git">https://github.com/osrf/uav_testing.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2019-05-14
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/ksql_airport/github-osrf-uav_testing">ksql_airport</a></td>
                    <td>0.0.1</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/mcmillan_airfield/github-osrf-uav_testing">mcmillan_airfield</a></td>
                    <td>0.0.1</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/sand_island/github-osrf-uav_testing">sand_island</a></td>
                    <td>0.0.1</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/yosemite_valley/github-osrf-uav_testing">yosemite_valley</a></td>
                    <td>0.0.1</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<p>This is a repository with example worlds generated from real world examples.</p>

<p>Here are some notes </p>

<h1 id="download-content">Download content</h1>

<p>Go to 
<a href="https://earthexplorer.usgs.gov/">https://earthexplorer.usgs.gov/</a></p>

<p>Create an account</p>

<p>Find the region of interest. Select a point or set of points.</p>

<p>Select Data Set(s):</p>

<ul>
<li>Aerial Imagry -&gt; High Resolution Orthoimagery</li>
<li>Digital Elevation -&gt; SRTM -&gt; SRTM 1 Arc-Second Global</li>
</ul>

<p>Go to the Results and download all the tiles.
You can download them individually or in a bulk download.</p>

<p>Alternative data sources should be fine as well.</p>

<p>There will be a lot of data.
The 9 tiles I used for McMillan were each approximately 400MB
And the height map arc tile is ~ 25MB.</p>

<h1 id="isolate-area-of-interest">Isolate area of interest</h1>

<p>Once you have the region of interest use gdalwarp to extract the regions of interest.
This is the script I used for mcmillan and yosemite</p>
<div class="highlight"><pre><code class="language-" data-lang=""><span class="c">#!/bin/bash                                                                     </span>

<span class="nb">set</span> <span class="nt">-x</span>

<span class="c"># Yosemite                                                                      </span>
<span class="nv">SOUTH</span><span class="o">=</span>37.6993
<span class="nv">NORTH</span><span class="o">=</span>37.7690
<span class="nv">EAST</span><span class="o">=</span><span class="nt">-119</span>.5285
<span class="nv">WEST</span><span class="o">=</span><span class="nt">-119</span>.5978
<span class="nv">NAME</span><span class="o">=</span>yosemite
<span class="nv">RESOLUTION</span><span class="o">=</span>5000
<span class="nv">SOURCE_DIR</span><span class="o">=</span>/data/temp_gis
<span class="nv">PACKAGE_DIR</span><span class="o">=</span>/tmp/ws/src/uav_testing/yosemite_valley
<span class="nv">SOURCE_DEM</span><span class="o">=</span>n37_w120_1arc_v3.tif
<span class="nv">SOURCE_IMAGES</span><span class="o">=</span><span class="s1">'m_3711912_se_11_h_20160701.tif m_3711912_sw_11_h_20160701.tif m_\
3711920_ne_11_h_20160701.tif m_3711920_nw_11_h_20160701.tif'</span>

<span class="c"># mcmillan                                                                      </span>
<span class="nv">SOUTH</span><span class="o">=</span>35.692125
<span class="nv">NORTH</span><span class="o">=</span>35.755904
<span class="nv">EAST</span><span class="o">=</span><span class="nt">-120</span>.735120
<span class="nv">WEST</span><span class="o">=</span><span class="nt">-120</span>.798966
<span class="nv">NAME</span><span class="o">=</span>mcmillan
<span class="nv">RESOLUTION</span><span class="o">=</span>5000
<span class="nv">SOURCE_DIR</span><span class="o">=</span>/data/temp_gis/mcmillan
<span class="nv">PACKAGE_DIR</span><span class="o">=</span>/tmp/ws/src/uav_testing/mcmillan_airfield
<span class="nv">SOURCE_DEM</span><span class="o">=</span>n35_w121_1arc_v3.tif
<span class="nv">SOURCE_IMAGES</span><span class="o">=</span><span class="s1">'5724_2452.tif 5724_2462.tif 5724_2472.tif 5734_2452.tif 5734_246\
2.tif 5734_2472.tif 5744_2452.tif 5744_2462.tif 5744_2472.tif'</span>


<span class="nv">OUTPUT_IMAGE</span><span class="o">=</span><span class="k">${</span><span class="nv">NAME</span><span class="k">}</span>_color.tif
<span class="nv">OUTPUT_DEM</span><span class="o">=</span><span class="k">${</span><span class="nv">PACKAGE_DIR</span><span class="k">}</span>/media/<span class="k">${</span><span class="nv">NAME</span><span class="k">}</span>_elevation.tif
<span class="nv">OUTPUT_PNG</span><span class="o">=</span><span class="k">${</span><span class="nv">PACKAGE_DIR</span><span class="k">}</span>/media/textures/<span class="k">${</span><span class="nv">NAME</span><span class="k">}</span>_color.png


<span class="nb">cd</span> <span class="nv">$SOURCE_DIR</span>

<span class="nb">rm</span> <span class="nt">-f</span> <span class="nv">$OUTPUT_DEM</span> <span class="nv">$OUTPUT_IMAGE</span> <span class="nv">$OUTPUT_PNG</span>


gdalwarp <span class="nt">-te</span> <span class="nv">$WEST</span> <span class="nv">$SOUTH</span> <span class="nv">$EAST</span> <span class="nv">$NORTH</span> <span class="nv">$SOURCE_DEM</span>  <span class="nv">$OUTPUT_DEM</span>

gdalwarp <span class="nt">-t_srs</span> <span class="s1">'+proj=longlat +datum=WGS84 +no_defs '</span> <span class="nt">-ts</span> <span class="nv">$RESOLUTION</span> 0 <span class="nt">-te</span> <span class="nv">$W</span><span class="se">\</span>
EST <span class="nv">$SOUTH</span> <span class="nv">$EAST</span> <span class="nv">$NORTH</span> <span class="nv">$SOURCE_IMAGES</span> <span class="nv">$OUTPUT_IMAGE</span>
convert <span class="nv">$OUTPUT_IMAGE</span> <span class="nv">$OUTPUT_PNG</span>
</code></pre></div>
<p>Save these files into your gazebo resource path that's exported by the package.</p>

<p>Note that the 5000 is the resolution of the file laterally.</p>

<h1 id="generate-world">Generate World</h1>

<p>Then create a world that references them.</p>

<p>I pushed the pose down such that the airfield is at zero height in gazebo.
The size of the texture is the width of the content in meters.</p>

<p>Note that there's a scaling issue with the textures. I have ticketed it here: <a href="https://bitbucket.org/osrf/gazebo/issues/2603/texture-scaling-on-heightmaps-does-not">https://bitbucket.org/osrf/gazebo/issues/2603/texture-scaling-on-heightmaps-does-not</a></p>

<p>It looks like a rendering of about 80% width is necessary.</p>

<p>Gazebo also seems to work better with square content, this might have been an artifact from before validating the above ratio.</p>

<h1 id="developmet-tip">Developmet tip</h1>

<p>If you are changing any textures on the height map.
Whether content or meta data it is all cached.
To change anything you will need to remove the cached paging content in <code>~/.gazebo/paging/VISUAL_ELEMENT</code></p>

<p>Ticketed at: <a href="https://bitbucket.org/osrf/gazebo/issues/2604/the-default-caching-behavior-of-caching">https://bitbucket.org/osrf/gazebo/issues/2604/the-default-caching-behavior-of-caching</a></p>

<h1 id="resources">Resources:</h1>

<p>A potential other approach is to overlay in QGIS: <a href="https://opengislab.com/blog/2018/3/20/3d-dem-visualization-in-qgis-30">https://opengislab.com/blog/2018/3/20/3d-dem-visualization-in-qgis-30</a></p>

<p>gdalwarp docs: <a href="https://www.gdal.org/gdalwarp.html">https://www.gdal.org/gdalwarp.html</a></p>

<p>SDF geometry documentation: <a href="http://sdformat.org/spec?elem=geometry&amp;ver=1.6">http://sdformat.org/spec?elem=geometry&amp;ver=1.6</a></p>
</div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-indigo">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>indigo</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-ardent">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>ardent</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-jade">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>jade</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-hydro">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>hydro</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>


<script type="text/javascript">
  $(document).ready(function() {
    setupDistroSwitch("crystal");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-4 col-md-4">
          
            <a href="https://github.com/ros-infrastructure" title="Find rosindex in Github">
            <span class="icon  icon--github">
              <svg viewBox="0 0 16 16">
                <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
              </svg>
            </span>

            <span class="username">ros-infrastructure</span>
          </a>
          |
          <em>generated on 2019-05-24</em>
        
        </div>
        <div class="col-sm-8 col-md-8 text-right">
          <p class="text">a community-maintained index of robotics software
 | <a href="/privacy.txt">privacy</a></p>
        </div>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
