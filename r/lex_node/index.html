<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Index</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    <link rel="canonical" href="https://ros-infrastructure.github.io/index.ros.org//r/lex_node/">
    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie-1.4.1/jquery.cookie.js type="text/javascript"></script>

    <script type="text/javascript" src=/js/ga.js async></script>
    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">

      <div align="center">
        <br>
        <table id="topnav-table">
          <tr>
            <td valign="middle">
                ROS Resources:
              <a href="http://wiki.ros.org/">Documentation</a>
              |
              <a href="http://wiki.ros.org/Support">Support</a>
              |
              <a href="http://discourse.ros.org/">Discussion Forum</a>
              |
              <a href="http://status.ros.org/">Service Status</a>
              |
              <a href="http://answers.ros.org/">Q&A answers.ros.org</a>
            </td>
          </tr>
        </table> <!-- topnav-table -->
      </div>

      <div class="row">

        <div class="col-sm-12 col-md-9" style="margin-top: 8px">
          <div class="row">
            <!-- title -->
            <div class="col-xs-12 col-sm-3 col-md-3" style="white-space:nowrap;">
              <a class="site-title" href="/">ROS Index</a> <sup><a href="https://github.com/ros-infrastructure/rosindex/issues/new" style="vertical-align:super;" class="label label-warning" target="_blank">BETA</a></sup>
            </div>

            <!-- main links -->
            <div class="col-xs-12 col-sm-9 col-md-9 text-right">
              <ul class="list-inline" style="margin-bottom:0px;">
                <li><a class="btn btn-link" href="/about">About</a></li>

                <li class="dropdown">
                  <button id="dLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Index <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                    <li><a href="/packages/page/1/time/">Package List</a></li>
                    <li><a href="/repos/page/1/time/">Repository List</a></li>

                    <li class="hidden" class="divider"></li>


                    <li class="hidden"><a href="/srvs/">Nodes</a></li>
                    <li class="hidden"><a href="/msgs/">Messages</a></li>
                    <li class="hidden"><a href="/srvs/">Services</a></li>
                    <li class="hidden"><a href="/srvs/">Plugins</a></li>

                    <li class="divider"></li>

                    <li><a href="/deps/">System Dependencies</a></li>
                  </ul>
                </li>

                <li class="dropdown disabled">
                  <button id="dLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Doc <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                    
                    <li>
                      <a href="/doc/ros2">
                        ROS2 Overview
                      </a>
                    </li>
                    
                    <li class="hidden" class="divider"></li>

                    <li class="hidden"><a href="/doc/tutorials">Tutorials</a></li>
                    <li class="hidden"><a href="/doc/readmes">Readmes</a></li>
                    <li class="hidden"><a href="/doc/apis">APIs</a></li>
                  </ul>
                </li>

                <li><a class="btn btn-link" href="/contribute">Contribute</a></li>
                <li><a class="btn btn-link" href="/stats">Stats</a></li>
              </ul>

            </div>
          </div>
        </div>

        <!-- searchbox -->
        <div class="col-sm-12 col-md-3" style="margin-top: 12px">
          <form id="top-searchbox" action="/search/" role="form" method="get">
            <div class="input-group input-group-sm">
              <input type="text" class="form-control" name="term" placeholder="Search ROS">
              <span class="input-group-btn">
                <button class="btn btn-default btn-sm" title="Search ROS" type="submit">
                  <span class="glyphicon glyphicon-search"></span>
                </button>
                <a href="https://lunrjs.com/guides/searching.html"
                   title="Help to Search" class="btn btn-default btn-sm">
                  <span class="glyphicon glyphicon-question-sign"></span>
                </a>
              </span>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!--
    <a class="site-title" href="/">ROS Index</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        <a class="page-link" href="/packages">Packages</a>
        <a class="page-link" href="/repos">Repositories</a>
        <a class="page-link" href="/search">Search</a>
      </div>
    </nav>
    -->

  </div>
  <script type="text/javascript">
    $('#top-searchbox').submit(function() {
        return $('#top-searchbox input:text').filter(function() {
          return $(this).val() == "";
        }).length == 0;
    });
  </script>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top:20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/repos">Repos</a></li>
        <li class="active">lex_node</li>
        <!--<li class="active">lex_node</li>-->
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="crystal-option" class="distro-button btn btn-xs btn-default" href="#crystal" data="crystal">
      <input type="radio" name="options" id="crystal-radio" autocomplete="off"> crystal
    </label>
  
    <label id="bouncy-option" class="distro-button btn btn-xs btn-default" href="#bouncy" data="bouncy">
      <input type="radio" name="options" id="bouncy-radio" autocomplete="off"> bouncy
    </label>
  
    <label id="melodic-option" class="distro-button btn btn-xs btn-default" href="#melodic" data="melodic">
      <input type="radio" name="options" id="melodic-radio" autocomplete="off"> melodic
    </label>
  
    <label id="lunar-option" class="distro-button btn btn-xs btn-default" href="#lunar" data="lunar">
      <input type="radio" name="options" id="lunar-radio" autocomplete="off"> lunar
    </label>
  
    <label id="kinetic-option" class="distro-button btn btn-xs btn-primary" href="#kinetic" data="kinetic">
      <input type="radio" name="options" id="kinetic-radio" autocomplete="off"> kinetic
    </label>
  
    <label id="indigo-option" class="distro-button btn btn-xs btn-default" href="#indigo" data="indigo">
      <input type="radio" name="options" id="indigo-radio" autocomplete="off"> indigo
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-default" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="ardent" id="ardent-option" class="disabled older-distro-option"  href="#ardent">
          <a href="#ardent" data="ardent" id="ardent-button">ardent</a>
        </li>
      
        <li data="jade" id="jade-option" class="disabled older-distro-option"  href="#jade">
          <a href="#jade" data="jade" id="jade-button">jade</a>
        </li>
      
        <li data="hydro" id="hydro-option" class="disabled older-distro-option"  href="#hydro">
          <a href="#hydro" data="hydro" id="hydro-button">hydro</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
    <div class="row">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/lex_node">lex_node</a> <small>repository</small></h3>
        
      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 50px">
          <a type="button" class="btn btn-xs btn-default" data-toggle="tooltip" data-placement="left" title="View Instances" 
            href="/repos/lex_node"><span class="glyphicon glyphicon-th"></span></a>
        </div>
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-aws-robotics-lex-ros1
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-aws-robotics-lex-ros1" role="menuitem" tabindex="-1" href="/r/lex_node/github-aws-robotics-lex-ros1" data="github-aws-robotics-lex-ros1">
                    <span class="glyphicon glyphicon-star"></span>
                    github-aws-robotics-lex-ros1
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

    </div>
  </div>
</div>


  <div class="distro distro-crystal">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>crystal</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-bouncy">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>bouncy</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>melodic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-lunar">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>lunar</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-kinetic">
    <div class="container-fluid">
      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            

  <table class="table table-condensed">
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/aws-robotics/lex-ros1.git">https://github.com/aws-robotics/lex-ros1.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">master</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2019-01-08
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/lex_common_msgs/github-aws-robotics-lex-ros1">lex_common_msgs</a></td>
                    <td>1.0.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/lex_node/github-aws-robotics-lex-ros1">lex_node</a></td>
                    <td>1.0.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="lex_node">lex_node</h1>

<h2 id="overview">Overview</h2>

<p>The ROS <code>lex_node</code> node enables a robot to comprehend natural language commands by voice or textual input and respond through a set of actions, which an AWS Lex Bot maps to ROS messages. Out of the box this node provides a ROS interface to communicate with a specified Amazon Lex bot (configured via lex_config.yaml) and requires configuration of AWS credentials. The Amazon Lex bot needs to be defined with responses and slots for customer prompts. A set of default slots and mappings are demonstrated in the <a href="https://github.com/aws/aws-robomaker-sample-application-voiceinteraction">sample app</a> and include actions as “Create <location_name>,” “Go to <location_name>” and “Stop.” Additional guides on configuring bots with are available at <a href="https://docs.aws.amazon.com/lex/latest/dg/getting-started.html">Getting Started with Amazon Lex</a>.</location_name></location_name></p>

<p>Delivering a voice-enabled customer experience (e.g. “Robot, go to x”) will require dialog facilitation, wake word, and offline processing which are not yet provided by this integration. A wake word would trigger the dialog facilitation node to start recording and send the audio to Amazon Lex, then prompt the user for more information should Amazon Lex require it.</p>

<p>The ROS <code>lex_node</code>  wraps the <a href="https://github.com/aws/aws-sdk-cpp">aws-sdk-c++</a> in a ROS service API.</p>

<p><strong>Amazon Lex Summary</strong>: Amazon Lex is a service for building conversational interfaces into any application using voice and text. Amazon Lex provides the advanced deep learning functionality of automatic speech recognition (ASR) for converting speech to text, and natural language understanding (NLU) to recognize the intent of the text, to enable you to build applications with highly engaging user experiences and lifelike conversational interactions. With Amazon Lex, the same deep learning technologies that power Amazon Alexa are now available to any developer, enabling you to quickly and easily build sophisticated, natural language, conversational bots (“chatbots”).</p>

<h3 id="license">License</h3>

<p>The source code is released under an <a href="https://aws.amazon.com/apache-2-0/">Apache 2.0</a>.</p>

<p><strong>Author</strong>: AWS RoboMaker<br>
<strong>Affiliation</strong>: <a href="https://aws.amazon.com/">Amazon Web Services (AWS)</a><br>
<strong>Maintainer</strong>: AWS RoboMaker, <a href="mailto:ros-contributions@amazon.com">ros-contributions@amazon.com</a></p>

<h3 id="supported-ros-distributions">Supported ROS Distributions</h3>

<ul>
<li>Kinetic</li>
<li>Lunar</li>
</ul>

<h3 id="build-status">Build status</h3>

<ul>
<li>Travis CI: <a href="https://travis-ci.org/aws-robotics/lex-ros1"><img src="https://travis-ci.org/aws-robotics/lex-ros1.svg?branch=master" alt="Build Status"></a>

<ul>
<li>ROS build farm:</li>
<li>v1.0.0:

<ul>
<li>ROS Kinetic @ u16.04 Xenial <a href="http://build.ros.org/job/Kbin_uX64__lex_node__ubuntu_xenial_amd64__binary"><img src="http://build.ros.org/job/Kbin_uX64__lex_node__ubuntu_xenial_amd64__binary/badge/icon" alt="Build Status"></a>
</li>
</ul>
</li>
</ul>
</li>
</ul>

<h2 id="installation">Installation</h2>

<h3 id="aws-credentials">AWS Credentials</h3>

<p>You will need to create an AWS Account and configure the credentials to be able to communicate with AWS services. You may find <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-config-files.html">AWS Configuration and Credential Files</a> helpful.</p>

<p>This node requires an IAM User with the following permission policy:
- <code>AmazonLexRunBotsOnly</code></p>

<h3 id="building-from-source">Building from Source</h3>

<p>Create a ROS workspace and a source directory</p>
<div class="highlight"><pre><code class="language-" data-lang="">mkdir -p ~/ros-workspace/src
</code></pre></div>
<p>To build from source, clone the latest version from master branch and compile the package</p>

<ul>
<li>
<p>Clone the package into the source directory</p>
<div class="highlight"><pre><code class="language-" data-lang="">cd ~/ros-workspace/src
git clone https://github.com/aws-robotics/utils-common.git
git clone https://github.com/aws-robotics/utils-ros1.git
git clone https://github.com/aws-robotics/lex-ros1.git
</code></pre></div>
</li>
<li>
<p>Install dependencies</p>
<div class="highlight"><pre><code class="language-" data-lang="">cd ~/ros-workspace &amp;&amp; sudo apt-get update
rosdep install --from-paths src --ignore-src -r -y
</code></pre></div>
</li>
<li>
<p>Build the packages</p>
<div class="highlight"><pre><code class="language-" data-lang="">cd ~/ros-workspace &amp;&amp; colcon build
</code></pre></div>
</li>
<li>
<p>Configure ROS library Path</p>
<div class="highlight"><pre><code class="language-" data-lang="">source ~/ros-workspace/install/setup.bash
</code></pre></div>
</li>
<li>
<p>Build and run the unit tests</p>
<div class="highlight"><pre><code class="language-" data-lang="">colcon build --packages-select lex_node --cmake-target tests
colcon test --packages-select lex_node &amp;&amp; colcon test-result --all
</code></pre></div>
</li>
</ul>

<h2 id="launch-files">Launch Files</h2>

<p>An example launch file called <code>sample_application.launch</code> is provided.</p>

<h2 id="usage">Usage</h2>

<h3 id="resource-setup">Resource Setup</h3>

<ol>
<li>Go to Amazon Lex</li>
<li>Create sample bot: BookTrip</li>
<li>Select publish, create a new alias</li>
<li>Modify the configuration file in <code>config/sample_configuration.yaml</code> to reflect the new alias</li>
</ol>

<h3 id="run-the-node">Run the node</h3>

<ul>
<li>
<strong>With</strong> launch file using parameters in .yaml format (example provided)

<ul>
<li>ROS: <code>roslaunch lex_node sample_application.launch</code>
</li>
</ul>
</li>
</ul>

<h3 id="send-a-test-voice-message">Send a test voice message</h3>
<div class="highlight"><pre><code class="language-" data-lang="">`rosservice call /lex_node/lex_conversation "{content_type: 'text/plain; charset=utf-8', accept_type: 'text/plain; charset=utf-8', text_request: 'make a reservation', audio_request: {data: ''}}"`
</code></pre></div>
<h3 id="verify-the-test-voice-was-received">Verify the test voice was received</h3>

<ul>
<li>Receive response from Amazon Lex and continue conversation</li>
</ul>

<h2 id="configuration-file-and-parameters">Configuration File and Parameters</h2>

<p>An example configuration file called <code>sample_configuration.yaml</code> is provided. </p>

<p><strong>Client Configuration</strong><br>
<strong>Namespace</strong>:</p>

<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
</tr>
</thead>
<tbody>
<tr>
<td>region</td>
<td><em>String</em></td>
</tr>
<tr>
<td>userAgent</td>
<td><em>String</em></td>
</tr>
<tr>
<td>endpointOverride</td>
<td><em>String</em></td>
</tr>
<tr>
<td>proxyHost</td>
<td><em>String</em></td>
</tr>
<tr>
<td>proxyUserName</td>
<td><em>String</em></td>
</tr>
<tr>
<td>proxyPassword</td>
<td><em>String</em></td>
</tr>
<tr>
<td>caPath</td>
<td><em>String</em></td>
</tr>
<tr>
<td>caFile</td>
<td><em>String</em></td>
</tr>
<tr>
<td>requestTimeoutMs</td>
<td><em>int</em></td>
</tr>
<tr>
<td>connectTimeoutMs</td>
<td><em>int</em></td>
</tr>
<tr>
<td>maxConnections</td>
<td><em>int</em></td>
</tr>
<tr>
<td>proxyPort</td>
<td><em>int</em></td>
</tr>
<tr>
<td>useDualStack</td>
<td><em>bool</em></td>
</tr>
<tr>
<td>enableClockSkewAdjustment</td>
<td><em>bool</em></td>
</tr>
<tr>
<td>followRedirects</td>
<td><em>bool</em></td>
</tr>
</tbody>
</table>

<p><strong>Amazon Lex Configuration</strong><br>
<strong>Namespace</strong>:</p>

<table>
<thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>user_id</td>
<td><em>string</em></td>
<td>e.g. “lex_node”</td>
</tr>
<tr>
<td>bot_name</td>
<td><em>string</em></td>
<td>e.g. “BookTrip” (corresponds to Amazon Lex bot)</td>
</tr>
<tr>
<td>bot_alias</td>
<td><em>string</em></td>
<td>e.g. “Demo”</td>
</tr>
</tbody>
</table>

<h2 id="performance-and-benchmark-results">Performance and Benchmark Results</h2>

<p>We evaluated the performance of this node by runnning the followning scenario on a Raspberry Pi 3 Model B:</p>

<ul>
<li>Launch a baseline graph containing the talker and listener nodes from the <a href="https://wiki.ros.org/roscpp_tutorials">roscpp_tutorials package</a>, plus two additional nodes that collect CPU and memory usage statistics. Allow the nodes to run for 60 seconds. </li>
<li>Launch the ROS <code>lex_node</code> using the launch file <code>lex_node.launch</code> as described above. At the same time, make calls to the <code>/lex_node/lex_conversation</code> service by running the following script in the background: </li>
</ul>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">rosservice call /lex_node/set_logger_level <span class="s2">"{logger: 'ros.lex_node', level: 'debug'}"</span> 
rosservice call /lex_node/lex_conversation <span class="s2">"{content_type: 'text/plain; charset=utf-8', accept_type: 'text/plain; charset=utf-8', text_request: 'Make a reservation', audio_request: {data: ''}}"</span> <span class="o">&amp;&amp;</span> <span class="nb">sleep </span>1
rosservice call /lex_node/lex_conversation <span class="s2">"{content_type: 'text/plain; charset=utf-8', accept_type: 'text/plain; charset=utf-8', text_request: 'Seattle, WA', audio_request: {data: ''}}"</span> <span class="o">&amp;&amp;</span> <span class="nb">sleep </span>1
rosservice call /lex_node/lex_conversation <span class="s2">"{content_type: 'text/plain; charset=utf-8', accept_type: 'text/plain; charset=utf-8', text_request: 'Tomorrow', audio_request: {data: ''}}"</span> <span class="o">&amp;&amp;</span> <span class="nb">sleep </span>1
rosservice call /lex_node/lex_conversation <span class="s2">"{content_type: 'text/plain; charset=utf-8', accept_type: 'text/plain; charset=utf-8', text_request: 'Next Monday', audio_request: {data: ''}}"</span> <span class="o">&amp;&amp;</span> <span class="nb">sleep </span>1
rosservice call /lex_node/lex_conversation <span class="s2">"{content_type: 'text/plain; charset=utf-8', accept_type: 'text/plain; charset=utf-8', text_request: '40', audio_request: {data: ''}}"</span> <span class="o">&amp;&amp;</span> <span class="nb">sleep </span>1
rosservice call /lex_node/lex_conversation <span class="s2">"{content_type: 'text/plain; charset=utf-8', accept_type: 'text/plain; charset=utf-8', text_request: 'economy', audio_request: {data: ''}}"</span> <span class="o">&amp;&amp;</span> <span class="nb">sleep </span>1 
rosservice call /lex_node/lex_conversation <span class="s2">"{content_type: 'text/plain; charset=utf-8', accept_type: 'text/plain; charset=utf-8', text_request: 'yes', audio_request: {data: ''}}"</span>

</code></pre></div>
<ul>
<li>Allow the nodes to run for 180 seconds. </li>
<li>Terminate the ROS <code>lex_node</code>, and allow the remaining nodes to run for 60 seconds. </li>
</ul>

<p>The following graph shows the CPU usage during that scenario. The 1 minute average CPU usage starts at 15% during the launch of the baseline graph, and stabilizes around 9%. When we launch the <code>lex_node</code> node around second 85 the 1 minute average CPU increases up to a peak of 27.75%, and stabilizes around 24% while the <code>lex_node</code> node serves the service calls. After that the 1 minute average CPU usage is kept around 12% until we stop the <code>lex_node</code> node around second 360. </p>

<p><img src="https://raw.githubusercontent.com/aws-robotics/lex-ros1/master/wiki/images/cpu.svg" alt="cpu"></p>

<p>The following graph shows the memory usage during that scenario.  We start with a memory usage of around 253 MB for the baseline graph, that increases to a around 280 MB (+10.67%) after launching the <code>lex_node</code> node around second 85, and increases again to a peak of 300 (+18.58% wrt initial value) while the <code>lex_node</code> node serves the service calls. After that the memory usage decreases to around 278 MB, and keeps this way until going back to 253 MB after we stop the <code>lex_node</code> node.</p>

<p><img src="https://raw.githubusercontent.com/aws-robotics/lex-ros1/master/wiki/images/memory.svg" alt="memory"></p>

<h2 id="node">Node</h2>

<h3 id="lex_node">lex_node</h3>

<p>Enables a robot to comprehend natural language commands by voice or textual input and respond through a set of actions.</p>

<h4 id="services">Services</h4>

<p><strong>Topic</strong>: ~/lex_conversation</p>

<h4 id="audiotextconversation">AudioTextConversation</h4>

<p><strong>Request</strong>:</p>

<table>
<thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>content_type</td>
<td><em>string</em></td>
<td>The input data type to request Amazon Lex</td>
</tr>
<tr>
<td>accept_type</td>
<td><em>string</em></td>
<td>The Amazon Lex output data type desired</td>
</tr>
<tr>
<td>text_request</td>
<td><em>string</em></td>
<td>Input text data for Lex</td>
</tr>
<tr>
<td>audio_request</td>
<td><em>uint8[]</em></td>
<td>Common audio msg format, input audio data for Lex</td>
</tr>
</tbody>
</table>

<p><strong>Response</strong>:</p>

<table>
<thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>text_response</td>
<td><em>string</em></td>
<td>Output text from Lex, if accept type was text</td>
</tr>
<tr>
<td>audio_response</td>
<td><em>uint8[]</em></td>
<td>Output audio data from Lex, if accept type was audio</td>
</tr>
<tr>
<td>slots</td>
<td><em>KeyValuePair[]</em></td>
<td>Slots returned from Lex</td>
</tr>
<tr>
<td>intent_name</td>
<td><em>string</em></td>
<td>The intent Amazon Lex is attempting to fulfill</td>
</tr>
<tr>
<td>message_format_type</td>
<td><em>string</em></td>
<td>Format of output data from Lex</td>
</tr>
<tr>
<td>dialog_state</td>
<td><em>string</em></td>
<td>Amazon Lex internal dialog_state</td>
</tr>
</tbody>
</table>

<h4 id="subscribed-topics">Subscribed Topics</h4>

<p>None</p>

<h4 id="published-topics">Published Topics</h4>

<p>None</p>

<h2 id="bugs-feature-requests">Bugs &amp; Feature Requests</h2>

<p>Please contact the team directly if you would like to request a feature.</p>

<p>Please report bugs in <a href="https://github.com/aws-robotics/lex-ros1/issues">Issue Tracker</a>.</p>
</div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-indigo">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>indigo</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-ardent">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>ardent</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-jade">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>jade</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-hydro">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>hydro</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>


<script type="text/javascript">
  $(document).ready(function() {
    setupDistroSwitch("crystal");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-4 col-md-4">
          
            <a href="https://github.com/ros-infrastructure" title="Find rosindex in Github">
            <span class="icon  icon--github">
              <svg viewBox="0 0 16 16">
                <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
              </svg>
            </span>

            <span class="username">ros-infrastructure</span>
          </a>
          |
          <em>generated on 2019-01-24</em>
        
        </div>
        <div class="col-sm-8 col-md-8 text-right">
          <p class="text">a community-maintained index of robotics software
 | <a href="/privacy.txt">privacy</a></p>
        </div>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
