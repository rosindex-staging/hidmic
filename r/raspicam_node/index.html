<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Index</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    <link rel="canonical" href="https://ros-infrastructure.github.io/index.ros.org//r/raspicam_node/">
    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie-1.4.1/jquery.cookie.js type="text/javascript"></script>

    <script type="text/javascript" src=/js/ga.js async></script>
    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">

      <div align="center">
        <br>
        <table id="topnav-table">
          <tr>
            <td valign="middle">
                ROS Resources:
              <a href="http://wiki.ros.org/">Documentation</a>
              |
              <a href="http://wiki.ros.org/Support">Support</a>
              |
              <a href="http://discourse.ros.org/">Discussion Forum</a>
              |
              <a href="http://status.ros.org/">Service Status</a>
              |
              <a href="http://answers.ros.org/">Q&A answers.ros.org</a>
            </td>
          </tr>
        </table> <!-- topnav-table -->
      </div>

      <div class="row">

        <div class="col-sm-12 col-md-9" style="margin-top: 8px">
          <div class="row">
            <!-- title -->
            <div class="col-xs-12 col-sm-3 col-md-3" style="white-space:nowrap;">
              <a class="site-title" href="/">ROS Index</a> <sup><a href="https://github.com/ros-infrastructure/rosindex/issues/new" style="vertical-align:super;" class="label label-warning" target="_blank">BETA</a></sup>
            </div>

            <!-- main links -->
            <div class="col-xs-12 col-sm-9 col-md-9 text-right">
              <ul class="list-inline" style="margin-bottom:0px;">
                <li><a class="btn btn-link" href="/about">About</a></li>

                <li class="dropdown">
                  <button id="dLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Index <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                    <li><a href="/packages/page/1/time/">Package List</a></li>
                    <li><a href="/repos/page/1/time/">Repository List</a></li>

                    <li class="hidden" class="divider"></li>


                    <li class="hidden"><a href="/srvs/">Nodes</a></li>
                    <li class="hidden"><a href="/msgs/">Messages</a></li>
                    <li class="hidden"><a href="/srvs/">Services</a></li>
                    <li class="hidden"><a href="/srvs/">Plugins</a></li>

                    <li class="divider"></li>

                    <li><a href="/deps/">System Dependencies</a></li>
                  </ul>
                </li>

                <li class="dropdown disabled">
                  <button id="dLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Doc <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                    
                    <li>
                      <a href="/doc/ros2">
                        ROS2 Overview
                      </a>
                    </li>
                    
                    <li class="hidden" class="divider"></li>

                    <li class="hidden"><a href="/doc/tutorials">Tutorials</a></li>
                    <li class="hidden"><a href="/doc/readmes">Readmes</a></li>
                    <li class="hidden"><a href="/doc/apis">APIs</a></li>
                  </ul>
                </li>

                <li><a class="btn btn-link" href="/contribute">Contribute</a></li>
                <li><a class="btn btn-link" href="/stats">Stats</a></li>
              </ul>

            </div>
          </div>
        </div>

        <!-- searchbox -->
        <div class="col-sm-12 col-md-3" style="margin-top: 12px">
          <form id="top-searchbox" action="/search/" role="form" method="get">
            <div class="input-group input-group-sm">
              <input type="text" class="form-control" name="q" placeholder="Search ROS">
              <span class="input-group-btn">
                <button class="btn btn-default btn-sm" title="Search ROS" type="submit">
                  <span class="glyphicon glyphicon-search"></span>
                </button>
                <a href="https://lunrjs.com/guides/searching.html"
                   title="Help to Search" class="btn btn-default btn-sm">
                  <span class="glyphicon glyphicon-question-sign"></span>
                </a>
              </span>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!--
    <a class="site-title" href="/">ROS Index</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        <a class="page-link" href="/packages">Packages</a>
        <a class="page-link" href="/repos">Repositories</a>
        <a class="page-link" href="/search">Search</a>
      </div>
    </nav>
    -->

  </div>
  <script type="text/javascript">
    $('#top-searchbox').submit(function() {
        return $('#top-searchbox input:text').filter(function() {
          return $(this).val() == "";
        }).length == 0;
    });
  </script>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top:20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/repos">Repos</a></li>
        <li class="active">raspicam_node</li>
        <!--<li class="active">raspicam_node</li>-->
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="crystal-option" class="distro-button btn btn-xs btn-default" href="#crystal" data="crystal">
      <input type="radio" name="options" id="crystal-radio" autocomplete="off"> crystal
    </label>
  
    <label id="bouncy-option" class="distro-button btn btn-xs btn-default" href="#bouncy" data="bouncy">
      <input type="radio" name="options" id="bouncy-radio" autocomplete="off"> bouncy
    </label>
  
    <label id="melodic-option" class="distro-button btn btn-xs btn-default" href="#melodic" data="melodic">
      <input type="radio" name="options" id="melodic-radio" autocomplete="off"> melodic
    </label>
  
    <label id="lunar-option" class="distro-button btn btn-xs btn-default" href="#lunar" data="lunar">
      <input type="radio" name="options" id="lunar-radio" autocomplete="off"> lunar
    </label>
  
    <label id="kinetic-option" class="distro-button btn btn-xs btn-primary" href="#kinetic" data="kinetic">
      <input type="radio" name="options" id="kinetic-radio" autocomplete="off"> kinetic
    </label>
  
    <label id="indigo-option" class="distro-button btn btn-xs btn-primary" href="#indigo" data="indigo">
      <input type="radio" name="options" id="indigo-radio" autocomplete="off"> indigo
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-default" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="ardent" id="ardent-option" class="disabled older-distro-option"  href="#ardent">
          <a href="#ardent" data="ardent" id="ardent-button">ardent</a>
        </li>
      
        <li data="jade" id="jade-option" class="disabled older-distro-option"  href="#jade">
          <a href="#jade" data="jade" id="jade-button">jade</a>
        </li>
      
        <li data="hydro" id="hydro-option" class="disabled older-distro-option"  href="#hydro">
          <a href="#hydro" data="hydro" id="hydro-button">hydro</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
    <div class="row">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/raspicam_node">raspicam_node</a> <small>repository</small></h3>
        
      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 50px">
          <a type="button" class="btn btn-xs btn-default" data-toggle="tooltip" data-placement="left" title="View Instances" 
            href="/repos/raspicam_node"><span class="glyphicon glyphicon-th"></span></a>
        </div>
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-UbiquityRobotics-raspicam_node
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-UbiquityRobotics-raspicam_node" role="menuitem" tabindex="-1" href="/r/raspicam_node/github-UbiquityRobotics-raspicam_node" data="github-UbiquityRobotics-raspicam_node">
                    <span class="glyphicon glyphicon-star"></span>
                    github-UbiquityRobotics-raspicam_node
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

    </div>
  </div>
</div>


  <div class="distro distro-crystal">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>crystal</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-bouncy">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>bouncy</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>melodic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-lunar">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>lunar</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-kinetic">
    <div class="container-fluid">
      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            

  <table class="table table-condensed">
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/UbiquityRobotics/raspicam_node.git">https://github.com/UbiquityRobotics/raspicam_node.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">kinetic</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2018-12-03
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          <span class="label label-warning">UNMAINTAINED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-default">UNRELEASED
        </span>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/raspicam_node/github-UbiquityRobotics-raspicam_node">raspicam_node</a></td>
                    <td>0.4.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="raspicam_node">raspicam_node</h1>

<p>ROS node for the Raspberry Pi Camera Module. Works with both the V1.x and V2.x versions of the module. We recommend using the v2.x cameras as they have better auto gain, and the general image quality is better. </p>

<h2 id="installation">Installation</h2>

<p>A binary can be found at <a href="https://packages.ubiquityrobotics.com/">https://packages.ubiquityrobotics.com/</a> follow the instructions there to add the repository.</p>

<p>Then run <code>sudo apt install ros-kinetic-raspicam-node</code></p>

<h2 id="build-intructions">Build Intructions</h2>

<p>If you want to build from source instead of using the binary follow this section.</p>

<p>This node is primarily supported on ROS Kinetic, and Ubuntu 16.04, and that is what these instuctions presume.</p>

<p>Go to your catkin_ws <code>cd ~/catkin_ws/src</code>.</p>

<p>Download the source for this node by running</p>

<p><code>git clone https://github.com/UbiquityRobotics/raspicam_node.git</code></p>

<p>There are some dependencies that are not recognized by ros, so you need to create the file <code>/etc/ros/rosdep/sources.list.d/30-ubiquity.list</code> and add this to it.</p>
<div class="highlight"><pre><code class="language-" data-lang="">yaml https://raw.githubusercontent.com/UbiquityRobotics/rosdep/master/raspberry-pi.yaml

</code></pre></div>
<p>Then run <code>rosdep update</code>.</p>

<p>Install the ros dependencies, </p>
<div class="highlight"><pre><code class="language-" data-lang="">cd ~/catkin_ws
rosdep install --from-paths src --ignore-src --rosdistro=kinetic -y

</code></pre></div>
<p>Compile the code with <code>catkin_make</code>.</p>

<h2 id="running-the-node">Running the Node</h2>

<p>Once you have the node built, you can run it using a launch file.</p>

<p>For a V2.x camera, run <code>roslaunch raspicam_node camerav2_1280x960.launch</code></p>

<p>For a V1.x camera, run <code>roslaunch raspicam_node camerav1_1280x720.launch</code></p>

<p>Use <code>rqt_image_view</code> on a connected computer to view the published image.</p>

<h2 id="configuring-the-node-with-dynamic-reconfigure">Configuring the node with dynamic reconfigure</h2>

<p>The <code>raspicam_node</code> supports dynamically reconfiguring the camera parameters.</p>

<p>Run the dynamic reconfigure node on a connected computer:</p>
<div class="highlight"><pre><code class="language-" data-lang="">rosrun rqt_reconfigure rqt_reconfigure 

</code></pre></div>
<p>It should bring up a user interface like the one below.  Paramaters can be dynamically adjusted via this interface.</p>

<p><img src="https://raw.githubusercontent.com/UbiquityRobotics/raspicam_node/kinetic/reconfigure_raspicam_node.png" alt="rqt_reconfigure"></p>

<h2 id="troubleshooting">Troubleshooting</h2>

<ol>
<li><p>Make sure that your user is in the <code>video</code> group by running <code>groups|grep video</code>.</p></li>
<li><p>If you get an error saying: <code>Failed to create camera component</code>,
make sure that the camera cable is properly seated on both ends, and that the cable is not missing any pins.</p></li>
<li><p>If the publish rate of the image over the network is lower than expected, consider using a lower resolution to reduce the amount of bandwidth required.</p></li>
</ol>

<h2 id="node-information">Node Information</h2>

<p>Topics:</p>

<ul>
<li><p><code>/raspicam_node/image/compressed</code>:
Publishes <code>sensor_msgs/CompressedImage</code> with jpeg from the camera module.</p></li>
<li><p><code>/raspicam_node/image</code>:
Publishes <code>sensor_msgs/Image</code> from the camera module (if parameter <code>enable_raw</code> is set).</p></li>
<li><p><code>/raspicam_node/motion_vectors</code>:
Publishes <code>raspicam_node/MotionVectors</code> from the camera module (if parameter <code>enable_imv</code> is set).</p></li>
<li><p><code>/raspicam_node/camera_info</code>:
Publishes <code>sensor_msgs/CameraInfo</code> camera info for each frame.</p></li>
</ul>

<p>Services:</p>

<ul>
<li>
<code>/set_camera_info</code>: Used to update calibration info for the camera.</li>
</ul>

<p>Parameters:</p>

<ul>
<li><p><code>camera_frame_id</code> (tf frame): The frame identifier to associate the camera.</p></li>
<li><p><code>camera_info_url</code>: The URL of the camera calibration <code>.yaml</code> file.</p></li>
<li><p><code>camera_name</code> (string): The name of the camera, should match with name in camera_info file.</p></li>
<li><p><code>framerate</code> (fps): Framerate to capture at. Maximum 90fps</p></li>
<li><p><code>height</code> (pixels): Height to capture images at.</p></li>
<li><p><code>width</code> (pixels): Width to capture images at.</p></li>
<li><p><code>quality</code> (0-100): Quality of the captured images.</p></li>
<li><p><code>enable_raw</code> (bool): Publish a raw image (takes more CPU and memory)</p></li>
<li><p><code>enable_imv</code> (bool): Publish inline motion vectors computed by the GPU</p></li>
<li><p><code>camera_id</code> (int): The camera id (only supported on Compute Module)</p></li>
</ul>

<h2 id="calibration">Calibration</h2>

<p>The raspicam_node package contains a calibration file for the raspberry
PI camera versions 1 and 2.</p>

<p>A tutorial 
  <a href="http://wiki.ros.org/camera_calibration/Tutorials/MonocularCalibration">Monocular Camera Calibration tutorial</a>
shows how to calibrate a single camera.</p>

<p>The
  <a href="http://wiki.ros.org/camera_calibration/Tutorials/StereoCalibration?action=AttachFile&amp;do=view&amp;target=check-108.pdf">8x6 checkerboard</a>
and the
  <a href="http://wiki.ros.org/camera_calibration/Tutorials/StereoCalibration?action=AttachFile&amp;do=view&amp;target=check_7x6_108mm.pdf">7x6 checkerboard</a>
are rather large and require specialized printers to print out at
full scale.  They can be printed on more common printer sizes
with auto scaling turned on.  Be sure to carefully measure the
square size in millimeters and convert to meters by dividing by 1000.</p>

<p>Running calibration requires raw publishing enabled. Add <code>enable_raw:=true</code> to the camera roslaunch command.</p>

<p>If you are not sure which launch file to use <code>camerav2_1280x960_10fps.launch</code> is probably what you are looking for.</p>

<p>On the Pi</p>
<div class="highlight"><pre><code class="language-" data-lang="">roslaunch raspicam_node camerav2_1280x960_10fps.launch enable_raw:=true

</code></pre></div>
<p>On your workstation:</p>
<div class="highlight"><pre><code class="language-" data-lang="">rosrun camera_calibration cameracalibrator.py --size 8x6 --square 0.074 image:=/raspicam_node/image camera:=/raspicam_node

</code></pre></div>
<h2 id="motion-vectors">Motion vectors</h2>

<p>The raspicam_node is able to output <a href="https://www.raspberrypi.org/blog/vectors-from-coarse-motion-estimation/">motion vectors</a> calculated by the Raspberry Pi's hardware video encoder. These motion vectors can be used for various applications such as motion detection.</p>

<p>On the Pi, add <code>enable_imv:=true</code> to the camera roslaunch command:</p>
<div class="highlight"><pre><code class="language-" data-lang="">roslaunch raspicam_node camerav2_410x308_30fps.launch enable_imv:=true

</code></pre></div>
<p>On your workstation, build raspicam_node so that the <code>MotionVectors</code> ROS message is recognized by Python:</p>
<div class="highlight"><pre><code class="language-" data-lang="">cd ~/catkin_ws
catkin_make
source ~/catkin_ws/devel/setup.bash

</code></pre></div>
<p>Finally, run script <code>imv_view.py</code> to visualize the motion vectors:</p>
<div class="highlight"><pre><code class="language-" data-lang="">rosrun raspicam_node imv_view.py

</code></pre></div>
</div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-indigo">
    <div class="container-fluid">
      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            

  <table class="table table-condensed">
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/UbiquityRobotics/raspicam_node.git">https://github.com/UbiquityRobotics/raspicam_node.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">indigo</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2018-10-08
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          <span class="label label-warning">UNMAINTAINED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-default">UNRELEASED
        </span>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/raspicam_node/github-UbiquityRobotics-raspicam_node">raspicam_node</a></td>
                    <td>0.3.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="raspicam_node">raspicam_node</h1>

<p>ROS node for the Raspberry Pi Camera Module. Works with both the V1.x and V2.x versions of the module. We recommend using the v2.x cameras as they have better auto gain, and the general image quality is better. </p>

<h2 id="build-intructions">Build Intructions</h2>

<p>This node is primarily supported on ROS Kinetic, and Ubuntu 16.04, and that is what these instuctions presume.</p>

<p>Go to your catkin_ws <code>cd ~/catkin_ws/src</code>.</p>

<p>Download the source for this node by running</p>

<p><code>git clone https://github.com/UbiquityRobotics/raspicam_node.git</code></p>

<p>There are some dependencies that are not recognized by ros, so you need to create the file <code>/etc/ros/rosdep/sources.list.d/30-ubiquity.list</code> and add this to it.</p>
<div class="highlight"><pre><code class="language-" data-lang="">yaml https://raw.githubusercontent.com/UbiquityRobotics/rosdep/master/raspberry-pi.yaml

</code></pre></div>
<p>Then run <code>rosdep update</code>.</p>

<p>Install the ros dependencies, </p>
<div class="highlight"><pre><code class="language-" data-lang="">cd ~/catkin_ws
rosdep install --from-paths src --ignore-src --rosdistro=kinetic -y

</code></pre></div>
<p>Compile the code with <code>catkin_make</code>.</p>

<h2 id="running-the-node">Running the Node</h2>

<p>Once you have the node built, you can run it using a launch file.</p>

<p>For a V2.x camera, run <code>roslaunch raspicam_node camerav2_1280x960.launch</code></p>

<p>For a V1.x camera, run <code>roslaunch raspicam_node camerav1_1280x720.launch</code></p>

<p>Use <code>rqt_image_view</code> to view the published image.</p>

<h2 id="configuring-the-node-with-dynamic-reconfigure">Configuring the node with dynamic reconfigure</h2>

<p>This section describes how to use a second computer to dynamically adjust the paramaters of the node.
It assumes that the Raspberry PI on which the <code>raspicam_node</code> is running has a hostname of <code>raspi.local</code>
and that the reconfiguration is being run on a second computer with a hostname of <code>laptop.local</code>.</p>

<ol>
<li>Ensure that the ROS environment variables on <code>raspi.local</code> are set so that other machines can interact
with its ROS nodes.  If they varaiables contain the string <code>localhost</code>, they need to be changed.</li>
</ol>
<div class="highlight"><pre><code class="language-" data-lang="">ubuntu@raspi:~$ echo $ROS_HOSTNAME 
raspi.local
ubuntu@raspi:~$ echo $ROS_MASTER_URI 
http://raspi.local:11311

</code></pre></div>
<p>If necessary they can be adjusted thus:</p>
<div class="highlight"><pre><code class="language-" data-lang="">export ROS_HOSTNAME=`hostname`.local
export ROS_MASTER_URI=${ROS_HOSTNAME}:11311

</code></pre></div>
<p>The changes can be made persistent by adding those two lines to <code>~/.bashrc</code>.</p>

<ol>
<li>One the laptop, set the environment variable <code>ROS_MASTER_URI</code> as above:</li>
</ol>
<div class="highlight"><pre><code class="language-" data-lang="">export ROS_MASTER_URI=${ROS_HOSTNAME}:11311

</code></pre></div>
<ol>
<li>Run the dynamic reconfigure node on <code>laptop.local</code>:</li>
</ol>
<div class="highlight"><pre><code class="language-" data-lang="">rosrun rqt_reconfigure rqt_reconfigure 

</code></pre></div>
<p>It should bring up a user interface like the one below.  Paramaters can be dynamically adjusted via this interface.</p>

<p><img src="https://raw.githubusercontent.com/UbiquityRobotics/raspicam_node/indigo/reconfigure_raspicam_node.png" alt="rqt_reconfigure"></p>

<h2 id="troubleshooting">Troubleshooting</h2>

<ol>
<li><p>Make sure that your user is in the <code>video</code> group by running <code>groups|grep video</code>.</p></li>
<li><p>If you get an error saying: <code>Failed to create camera component</code>,
make sure that the camera cable is properly seated on both ends, and that the cable is not missing any pins. If this doesn't work update your firmware with <code>rpi-update</code>.</p></li>
<li><p>If the publish rate of the image over the network is lower than expected, consider using a lower resolution to reduce the amount of bandwidth required.</p></li>
</ol>

<h2 id="node-information">Node Information</h2>

<p>Topics:</p>

<ul>
<li><p><code>/raspicam_node/compressed</code>:
Publishes <code>sensor_msgs/CompressedImage</code> with jpeg from the camera module.</p></li>
<li><p><code>/raspicam_node/camera_info</code>:
Publishes <code>sensor_msgs/CameraInfo</code> camera info for each frame.</p></li>
</ul>

<p>Services:</p>

<ul>
<li>
<code>/set_camera_info</code>: Used to update calibration info for the camera.</li>
</ul>

<p>Parameters:</p>

<ul>
<li><p><code>camera_frame_id</code> (tf frame): The frame identifier to associate the camera.</p></li>
<li><p><code>camera_info_url</code>: The URL of the camera calibration <code>.yaml</code> file.</p></li>
<li><p><code>camera_name</code> (string): The name of the camera, should match with name in camera_info file.</p></li>
<li><p><code>framerate</code> (fps): Framerate to capture at. Maximum 90fps</p></li>
<li><p><code>height</code> (pixels): Height to capture images at.</p></li>
<li><p><code>width</code> (pixels): Width to capture images at.</p></li>
<li><p><code>quality</code> (0-100): Quality of the captured images.</p></li>
</ul>

<h2 id="calibration">Calibration</h2>

<p>The raspicam_node package contains a calibration file for the raspberry
PI camera versions 1 and 2.  The procedure for calibrating a camera is only necessary if you change the lens or image size used.</p>

<p>A tutorial 
  <a href="http://wiki.ros.org/camera_calibration/Tutorials/MonocularCalibration">Monocular Camera Calibration tutorial</a>
shows how to calibrate a single camera.</p>

<p>The
  <a href="http://wiki.ros.org/camera_calibration/Tutorials/StereoCalibration?action=AttachFile&amp;do=view&amp;target=check-108.pdf">8x6 checkerboard</a>
and the
  <a href="http://wiki.ros.org/camera_calibration/Tutorials/StereoCalibration?action=AttachFile&amp;do=view&amp;target=check_7x6_108mm.pdf">7x6 checkerboard</a>
are rather large and require specialized printers to print out at
full scale.  They can be printed on more common printer sizes
with auto scaling turned on.  Be sure to carefully measure the
square size in millimeters and convert to meters by dividing by 1000.</p>

<p>A camera calibration can be run with the following commands:</p>
<div class="highlight"><pre><code class="language-" data-lang="">$ rosrun image_transport republish compressed in:=/raspicam_node/image raw out:=/raspicam_node/image
$ rosrun camera_calibration cameracalibrator.py --size 8x6 --square 0.074 image:=/raspicam_node/image camera:=/raspicam_node
</code></pre></div>
<p>See <a href="http://wiki.ros.org/camera_calibration/Tutorials/MonocularCalibration">http://wiki.ros.org/camera_calibration/Tutorials/MonocularCalibration</a> for a guide on calibration</p>

<p>By default the camera calibrations are saved in the 
camera_info directory of this package.</p>
</div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-ardent">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>ardent</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-jade">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>jade</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-hydro">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>hydro</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>


<script type="text/javascript">
  $(document).ready(function() {
    setupDistroSwitch("crystal");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-4 col-md-4">
          
            <a href="https://github.com/ros-infrastructure" title="Find rosindex in Github">
            <span class="icon  icon--github">
              <svg viewBox="0 0 16 16">
                <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
              </svg>
            </span>

            <span class="username">ros-infrastructure</span>
          </a>
          |
          <em>generated on 2019-01-10</em>
        
        </div>
        <div class="col-sm-8 col-md-8 text-right">
          <p class="text">a community-maintained index of robotics software
 | <a href="/privacy.txt">privacy</a></p>
        </div>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
