<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Index</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    <link rel="canonical" href="https://ros-infrastructure.github.io/index.ros.org//r/cost_map/github-stonier-cost_map/">
    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie-1.4.1/jquery.cookie.js type="text/javascript"></script>

    <script type="text/javascript" src=/js/ga.js async></script>
    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">

      <div align="center">
        <br>
        <table id="topnav-table">
          <tr>
            <td valign="middle">
                ROS Resources:
              <a href="http://wiki.ros.org/">Documentation</a>
              |
              <a href="http://wiki.ros.org/Support">Support</a>
              |
              <a href="http://discourse.ros.org/">Discussion Forum</a>
              |
              <a href="http://status.ros.org/">Service Status</a>
              |
              <a href="http://answers.ros.org/">Q&A answers.ros.org</a>
            </td>
          </tr>
        </table> <!-- topnav-table -->
      </div>

      <div class="row">

        <div class="col-sm-12 col-md-9" style="margin-top: 8px">
          <div class="row">
            <!-- title -->
            <div class="col-xs-12 col-sm-3 col-md-3" style="white-space:nowrap;">
              <a class="site-title" href="/">ROS Index</a> <sup><a href="https://github.com/ros-infrastructure/rosindex/issues/new" style="vertical-align:super;" class="label label-warning" target="_blank">BETA</a></sup>
            </div>

            <!-- main links -->
            <div class="col-xs-12 col-sm-9 col-md-9 text-right">
              <ul class="list-inline" style="margin-bottom:0px;">
                <li><a class="btn btn-link" href="/about">About</a></li>

                <li class="dropdown">
                  <button id="dLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Index <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                    <li><a href="/packages/page/1/time/">Package List</a></li>
                    <li><a href="/repos/page/1/time/">Repository List</a></li>

                    <li class="hidden" class="divider"></li>


                    <li class="hidden"><a href="/srvs/">Nodes</a></li>
                    <li class="hidden"><a href="/msgs/">Messages</a></li>
                    <li class="hidden"><a href="/srvs/">Services</a></li>
                    <li class="hidden"><a href="/srvs/">Plugins</a></li>

                    <li class="divider"></li>

                    <li><a href="/deps/">System Dependencies</a></li>
                  </ul>
                </li>

                <li class="dropdown disabled">
                  <button id="dLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Doc <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                    
                    <li>
                      <a href="/doc/ros2">
                        ROS2 Overview
                      </a>
                    </li>
                    
                    <li class="hidden" class="divider"></li>

                    <li class="hidden"><a href="/doc/tutorials">Tutorials</a></li>
                    <li class="hidden"><a href="/doc/readmes">Readmes</a></li>
                    <li class="hidden"><a href="/doc/apis">APIs</a></li>
                  </ul>
                </li>

                <li><a class="btn btn-link" href="/contribute">Contribute</a></li>
                <li><a class="btn btn-link" href="/stats">Stats</a></li>
              </ul>

            </div>
          </div>
        </div>

        <!-- searchbox -->
        <div class="col-sm-12 col-md-3" style="margin-top: 12px">
          <form id="top-searchbox" action="/search/" role="form" method="get">
            <div class="input-group input-group-sm">
              <input type="text" class="form-control" name="q" placeholder="Search ROS Packages">
              <span class="input-group-btn">
                <button class="btn btn-default btn-sm" title="Search ROS Packages" type="submit"><span class="glyphicon glyphicon-search"></span></button>
              </span>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!--
    <a class="site-title" href="/">ROS Index</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        <a class="page-link" href="/packages">Packages</a>
        <a class="page-link" href="/repos">Repositories</a>
        <a class="page-link" href="/search">Search</a>
      </div>
    </nav>
    -->

  </div>
  <script type="text/javascript">
    $('#top-searchbox').submit(function() {
        return $('#top-searchbox input:text').filter(function() {
          return $(this).val() == "";
        }).length == 0;
    });
  </script>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top:20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/repos">Repos</a></li>
        <li class="active">cost_map</li>
        <!--<li class="active">cost_map</li>-->
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="crystal-option" class="distro-button btn btn-xs btn-default" href="#crystal" data="crystal">
      <input type="radio" name="options" id="crystal-radio" autocomplete="off"> crystal
    </label>
  
    <label id="bouncy-option" class="distro-button btn btn-xs btn-default" href="#bouncy" data="bouncy">
      <input type="radio" name="options" id="bouncy-radio" autocomplete="off"> bouncy
    </label>
  
    <label id="melodic-option" class="distro-button btn btn-xs btn-default" href="#melodic" data="melodic">
      <input type="radio" name="options" id="melodic-radio" autocomplete="off"> melodic
    </label>
  
    <label id="lunar-option" class="distro-button btn btn-xs btn-default" href="#lunar" data="lunar">
      <input type="radio" name="options" id="lunar-radio" autocomplete="off"> lunar
    </label>
  
    <label id="kinetic-option" class="distro-button btn btn-xs btn-primary" href="#kinetic" data="kinetic">
      <input type="radio" name="options" id="kinetic-radio" autocomplete="off"> kinetic
    </label>
  
    <label id="indigo-option" class="distro-button btn btn-xs btn-primary" href="#indigo" data="indigo">
      <input type="radio" name="options" id="indigo-radio" autocomplete="off"> indigo
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-default" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="ardent" id="ardent-option" class="disabled older-distro-option"  href="#ardent">
          <a href="#ardent" data="ardent" id="ardent-button">ardent</a>
        </li>
      
        <li data="jade" id="jade-option" class="disabled older-distro-option"  href="#jade">
          <a href="#jade" data="jade" id="jade-button">jade</a>
        </li>
      
        <li data="hydro" id="hydro-option" class="disabled older-distro-option"  href="#hydro">
          <a href="#hydro" data="hydro" id="hydro-button">hydro</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
    <div class="row">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/cost_map">cost_map</a> <small>repository</small></h3>
        
      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 50px">
          <a type="button" class="btn btn-xs btn-default" data-toggle="tooltip" data-placement="left" title="View Instances" 
            href="/repos/cost_map"><span class="glyphicon glyphicon-th"></span></a>
        </div>
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-stonier-cost_map
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-stonier-cost_map" role="menuitem" tabindex="-1" href="/r/cost_map/github-stonier-cost_map" data="github-stonier-cost_map">
                    <span class="glyphicon glyphicon-star"></span>
                    github-stonier-cost_map
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

    </div>
  </div>
</div>


  <div class="distro distro-crystal">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>crystal</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-bouncy">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>bouncy</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>melodic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-lunar">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>lunar</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-kinetic">
    <div class="container-fluid">
      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            

  <table class="table table-condensed">
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/stonier/cost_map.git">https://github.com/stonier/cost_map.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">devel</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2018-01-01
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/cost_map/github-stonier-cost_map">cost_map</a></td>
                    <td>0.3.3</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/cost_map_core/github-stonier-cost_map">cost_map_core</a></td>
                    <td>0.3.3</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/cost_map_cv/github-stonier-cost_map">cost_map_cv</a></td>
                    <td>0.3.3</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/cost_map_demos/github-stonier-cost_map">cost_map_demos</a></td>
                    <td>0.3.3</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/cost_map_msgs/github-stonier-cost_map">cost_map_msgs</a></td>
                    <td>0.3.3</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/cost_map_ros/github-stonier-cost_map">cost_map_ros</a></td>
                    <td>0.3.3</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/cost_map_visualisations/github-stonier-cost_map">cost_map_visualisations</a></td>
                    <td>0.3.3</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="cost-map">Cost Map</h1>

<p>This is a C++ library directly analogous to ETHZ ASL's <a href="https://github.com/ethz-asl/grid_map">GridMap</a> library,
but designed for use with costs where the data element is an unsigned char (as opposed to grid_map's doubles).</p>

<h2 id="table-of-contents">Table of Contents</h2>

<ol>
<li><a href="https://github.com/stonier/cost_map/tree/devel/#packages-overview">Packages Overview</a></li>
<li><a href="https://github.com/stonier/cost_map/tree/devel/#costmap">CostMap</a></li>
<li><a href="https://github.com/stonier/cost_map/tree/devel/#publishing-and-subscribing">Publishing and Subscribing</a></li>
<li><a href="https://github.com/stonier/cost_map/tree/devel/#visualisations">Visualisations</a></li>
<li><a href="https://github.com/stonier/cost_map/tree/devel/#saving-and-loading">Saving and Loading</a></li>
<li><a href="https://github.com/stonier/cost_map/tree/devel/#costmap2dros-conversions">Costmap2DROS Conversions</a></li>
<li><a href="https://github.com/stonier/cost_map/tree/devel/#other-conversions">Other Conversions</a></li>
<li><a href="https://github.com/stonier/cost_map/tree/devel/#inflation-computers">Inflation Computers</a></li>
</ol>

<h2 id="packages-overview">Packages Overview</h2>

<ul>
<li>
<strong><em>cost_map</em></strong> : meta-package for the grid map library.</li>
<li>
<strong><em>cost_map_core</em></strong> : core interfaces and algorithms of the cost map library, this package has no <a href="http://www.ros.org">ROS</a> dependencies.</li>
<li>
<strong><em>cost_map_ros</em></strong> : converters and utilities for cost maps in a <a href="http://www.ros.org">ROS</a> ecosystem - Image Bundles, CostMap2DROS, OccupancyGrid, CostMap messsages.</li>
<li>
<strong><em>cost_map_cv</em></strong> : conversions from and to <a href="http://opencv.org/">OpenCV</a> image types.</li>
<li>
<strong><em>cost_map_msgs</em></strong> : <a href="http://www.ros.org">ROS</a> message definitions related to the <a href="http://docs.ros.org/api/cost_map_msgs/html/msg/CostMap.html">cost_map_msgs/CostMap</a> type.</li>
<li>
<strong><em>cost_map_visualisations</em></strong> : helper nodes that bridge cost maps to <a href="http://wiki.ros.org/rviz">RViz</a>.</li>
<li>
<strong><em>cost_map_demos</em></strong> : several nodes for demonstration purposes and a test suite.</li>
</ul>

<p>The source code is released under a <a href="https://github.com/stonier/cost_map/tree/devel/LICENSE">BSD 3-Clause license</a>.</p>

<h2 id="costmap">CostMap</h2>

<p>The core <code>cost_map::CostMap</code> class is designed to maintain as close a compatibility
to grid maps as possible. This compatibility extends to conventions, definitions and API.
For convenience, an illustrative reference of a few of the conventions that hold for both
cost maps and grid maps is provided below.</p>

<p><a href="https://github.com/stonier/cost_map/tree/devel/cost_map_core/doc/grid_map_layers.pdf"><img src="https://raw.githubusercontent.com/stonier/cost_map/devel/cost_map_core/doc/grid_map_layers.png" alt="Layers"></a></p>

<p><a href="https://github.com/stonier/cost_map/tree/devel/cost_map_core/doc/grid_map_conventions.pdf"><img src="https://raw.githubusercontent.com/stonier/cost_map/devel/cost_map_core/doc/grid_map_conventions.png" alt="Conventions"></a></p>

<p>Please refer to the <a href="https://github.com/ethz-asl/grid_map/blob/master/README.md">GridMap README</a> for a
more comprehensive outline of what is possible with cost maps and grid maps.</p>

<p>Doxygen documentation for the cost map API's is served via the <em>Code API</em> links on the
<a href="http://wiki.ros.org/cost_map">ROS wiki</a> for each respective release/package. In addition
the latest doxygen documentation can always be found for each package at:</p>

<ul>
<li><a href="http://docs.ros.org/api/cost_map_core/html/annotated.html">cost_map_core</a></li>
<li><a href="http://docs.ros.org/api/cost_map_ros/html/annotated.html">cost_map_ros</a></li>
<li><a href="http://docs.ros.org/api/cost_map_visualisations/html/annotated.html">cost_map_visualisations</a></li>
</ul>

<h2 id="publishing-and-subscribing">Publishing and Subscribing</h2>

<p>Use the <code>cost_map::toMessage()/fromMessage(...)</code> methods.</p>
<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="c1">// Publishing</span>

<span class="cp">#include &lt;cost_map_ros/converter.hpp&gt;
</span>
<span class="kt">void</span> <span class="nf">publishCostMap</span><span class="p">(</span><span class="k">const</span> <span class="n">cost_map</span><span class="o">::</span><span class="n">CostMap</span><span class="o">&amp;</span> <span class="n">cost_map</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">cost_map_msgs</span><span class="o">::</span><span class="n">CostMap</span> <span class="n">msg</span><span class="p">;</span>
  <span class="n">toMessage</span><span class="p">(</span><span class="n">cost_map</span><span class="p">,</span> <span class="n">msg</span><span class="p">);</span>
  <span class="n">publisher</span><span class="p">.</span><span class="n">publish</span><span class="p">(</span><span class="n">msg</span><span class="p">);</span>
<span class="p">}</span>

</code></pre></div>
<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="c1">// Subscribing</span>

<span class="cp">#include &lt;cost_map_ros/converter.hpp&gt;
</span>
<span class="kt">void</span> <span class="nf">costMapCallback</span><span class="p">(</span><span class="k">const</span> <span class="n">cost_map_msgs</span><span class="o">::</span><span class="n">CostMap</span><span class="o">::</span><span class="n">ConstPtr</span><span class="o">&amp;</span> <span class="n">msg</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">cost_map</span><span class="o">::</span><span class="n">CostMap</span> <span class="n">cost_map</span><span class="p">;</span>
  <span class="n">cost_map</span><span class="o">::</span><span class="n">fromMessage</span><span class="p">(</span><span class="o">*</span><span class="n">msg</span><span class="p">,</span> <span class="n">cost_map</span><span class="p">);</span>
<span class="p">}</span>

</code></pre></div>
<h2 id="visualisations">Visualisations</h2>

<p>As with grid maps, the method employed to visualise is to drop in a relay node between
the cost map publisher and rviz to convert it to the appropriate type for visualisation.
This spares you from having to write any gui-related code in the cost maps or the
planners/controllers that use the cost maps.</p>

<p><code>cost_map_visualisations</code> has a relay node that converts each layer of a subscribed
cost map topic to a <code>nav_msgs/OccupancyGrid</code> topic for rviz. Simply include and
remap the input cost map topic in your launcher, for example:</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;launch&gt;</span>
  <span class="c">&lt;!-- node that publishes cost maps --&gt;</span>

  <span class="nt">&lt;node</span> <span class="na">pkg=</span><span class="s">"cost_map_visualisations"</span> <span class="na">type=</span><span class="s">"node"</span> <span class="na">name=</span><span class="s">"cost_map_visualisation"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;remap</span> <span class="na">from=</span><span class="s">"cost_map_visualisation/cost_map"</span> <span class="na">to=</span><span class="s">"funky_cost_maps/cost_map"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/node&gt;</span>

  <span class="c">&lt;!-- rviz, with a pre-loaded configuration that loads the resulting occupancy grid maps --&gt;</span>
  <span class="nt">&lt;node</span> <span class="na">name=</span><span class="s">"rviz"</span> <span class="na">pkg=</span><span class="s">"rviz"</span> <span class="na">type=</span><span class="s">"rviz"</span> <span class="na">args=</span><span class="s">"-d $(find funky_demos)/rviz/funky_cost_maps.rviz"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/launch&gt;</span>

</code></pre></div>
<p>An example of a relay in action is in the image bundle demo below.</p>

<h2 id="saving-and-loading">Saving and Loading</h2>

<h3 id="image-bundles">Image Bundles</h3>

<p>Image bundles provide an easy way to load and save cost maps to and from files on disk.
An image bundle consists of data stored in two parts - 1) meta-information about a costmap in
a yaml file and 2) layer data that is stored alongside in grayscale images.</p>

<p>A typical meta yaml for an image bundle:</p>
<div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="c1"># frame in the world that this map is attached to</span>
<span class="na">frame_id</span><span class="pi">:</span> <span class="s">map</span>
<span class="c1"># co-ordinates of the centre of the map relative to the frame_id</span>
<span class="na">centre_x</span><span class="pi">:</span> <span class="s">0</span>
<span class="na">centre_y</span><span class="pi">:</span> <span class="s">0</span>
<span class="c1"># dimensional properties of the map</span>
<span class="na">resolution</span><span class="pi">:</span> <span class="s">0.05</span>
<span class="na">number_of_cells_x</span><span class="pi">:</span> <span class="s">200</span>
<span class="na">number_of_cells_y</span><span class="pi">:</span> <span class="s">200</span>
<span class="c1"># data layers</span>
<span class="na">layers</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">layer_name</span><span class="pi">:</span> <span class="s">obstacle_costs</span>
    <span class="na">layer_data</span><span class="pi">:</span> <span class="s">obstacle_costs.png</span>
  <span class="pi">-</span> <span class="na">layer_name</span><span class="pi">:</span> <span class="s">static_costs</span>
    <span class="na">layer_data</span><span class="pi">:</span> <span class="s">can_be_some_other_name.png</span>

</code></pre></div>
<p>See <a href="https://github.com/stonier/cost_map/tree/devel/cost_map_ros/image_bundles/example.yaml">cost_map_ros/image_bundles/example.yaml</a> for a real example.</p>

<h3 id="imagebundle-demo">ImageBundle Demo</h3>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># load an image bundle and visualise the cost map</span>
roslaunch cost_map_demos load_image_bundle.launch <span class="nt">--screen</span>

</code></pre></div>
<h3 id="imagebundle-command-line-utilities">ImageBundle Command Line Utilities</h3>

<p>There exist two command line utilities for loading and saving to and from a cost map topic:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># load and publish to '/foo/cost_map'</span>
rosrun cost_map_ros load_image_bundle <span class="nt">-t</span> /foo/cost_map example.yaml
<span class="c"># subscribe and save from '/foo/cost_map' to foo.yaml</span>
<span class="nb">mkdir </span>foo
<span class="nb">cd </span>foo
rosrun cost_map_ros save_image_bundle /foo/cost_map foo.yaml

</code></pre></div>
<h3 id="imagebundle-methods">ImageBundle Methods</h3>

<ul>
<li>
<code>cost_map::toImageBundle(...)</code> : save a cost map to an image bundle</li>
<li>
<code>cost_map::fromImageBundle(...)</code> : load an image bundle into a cost map object</li>
</ul>

<p>See the <a href="https://github.com/stonier/cost_map/tree/devel/cost_map_ros/src/lib/image_bundles.cpp#L203">LoadImageBundle</a>/<a href="https://github.com/stonier/cost_map/tree/devel/cost_map_ros/src/lib/image_bundles.cpp#L235">SaveImageBundle</a>
classes which illustrate how the command line utilities use these api.</p>

<h2 id="costmap2dros-conversions">Costmap2DROS Conversions</h2>

<p>The ROS Navistack uses <code>costmap_2d::Costmap2DROS</code> objects and it is sometimes necessary
to make conversions from these to provide new style cost maps to other libraries. Methods are
available for both full map conversion as well as subwindows centred on the pose of the robot itself.</p>

<h3 id="costmap2dros-vs-costmap">Costmap2DROS vs CostMap</h3>

<p><a href="https://github.com/stonier/cost_map/tree/devel/cost_map_ros/doc/image_loading_coordinates.png"><img src="https://raw.githubusercontent.com/stonier/cost_map/devel/cost_map_ros/doc/image_loading_coordinates_preview.png" alt="CostMap"></a></p>

<h3 id="costmap2dros-demo">Costmap2DROS Demo</h3>

<table>
<thead>
<tr>
<th style="text-align: center">Costmap2DROS</th>
<th style="text-align: center">Full/Partial Copies</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center"><a href="https://github.com/stonier/cost_map/tree/devel/cost_map_demos/doc/images/from_ros_costmaps/from_ros_costmaps.png"><img src="https://raw.githubusercontent.com/stonier/cost_map/devel/cost_map_demos/doc/images/from_ros_costmaps/from_ros_costmaps_preview.png" alt="Costmap2DROS"></a></td>
<td style="text-align: center"><a href="https://github.com/stonier/cost_map/tree/devel/cost_map_demos/doc/images/from_ros_costmaps/from_ros_costmaps_copied.png"><img src="https://raw.githubusercontent.com/stonier/cost_map/devel/cost_map_demos/doc/images/from_ros_costmaps/from_ros_costmaps_copied_preview.png" alt="CostMap"></a></td>
</tr>
</tbody>
</table>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># load several ros costmaps and copy full/sub windows to new style costmaps</span>
roslaunch cost_map_demos from_ros_costmaps.launch <span class="nt">--screen</span>

</code></pre></div>
<h3 id="costmap2dros-methods">Costmap2DROS Methods</h3>

<ul>
<li>
<code>cost_map::fromCostmap2DROS(...)</code> : create a cost map from a Costmap2DROS</li>
<li>
<code>cost_map::fromCostmap2DROSAtRobotPose(...)</code> : create a cost map from a subwindow around the robot pose in a Costmap2DROS</li>
</ul>

<p>See the <a href="https://github.com/stonier/cost_map/tree/devel/cost_map_demos/src/applications/from_ros_costmaps.cpp">from_ros_costmaps demo program</a>
which illustrates how to use these api. Additionally you can directly use the <code>grid_map::Costmap2DConverter</code> template class for more atomic operations.</p>

<h2 id="other-conversions">Other Conversions</h2>

<ul>
<li>
<code>cost_map::toGridMap(...)</code> : convert to a float based grid map by normalising values between 0.0 and 100.0</li>
<li>
<code>cost_map::addLayerFromROSImage(...)</code> : add a layer from ros immage message type (sensor_msgs::Image)</li>
</ul>

<h2 id="inflation-computers">Inflation Computers</h2>

<h3 id="inflation-demo">Inflation Demo</h3>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># load an image bundle and visualise the cost map</span>
roslaunch cost_map_demos inflations.launch <span class="nt">--screen</span>

</code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: center">Obstacle Layer</th>
<th style="text-align: center">Inflated Layer</th>
<th style="text-align: center">Deflated Layer</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center"><a href="https://github.com/stonier/cost_map/tree/devel/cost_map_demos/doc/images/inflation/obstacle_layer.png"><img src="https://raw.githubusercontent.com/stonier/cost_map/devel/cost_map_demos/doc/images/inflation/obstacle_layer_preview.png" alt="Obstacle Layer"></a></td>
<td style="text-align: center"><a href="https://github.com/stonier/cost_map/tree/devel/cost_map_demos/doc/images/inflation/inflation_layer.png"><img src="https://raw.githubusercontent.com/stonier/cost_map/devel/cost_map_demos/doc/images/inflation/inflation_layer_preview.png" alt="Inflated Layer"></a></td>
<td style="text-align: center"><a href="https://github.com/stonier/cost_map/tree/devel/cost_map_demos/doc/images/inflation/deflated_layer.png"><img src="https://raw.githubusercontent.com/stonier/cost_map/devel/cost_map_demos/doc/images/inflation/deflated_layer_preview.png" alt="Deflated Layer"></a></td>
</tr>
</tbody>
</table>

<h3 id="inflation-classes">Inflation Classes</h3>

<ul>
<li>
<code>cost_map::Inflate</code> : functor that executes (with the assistance of an inflation computer) the inflation process</li>
<li>
<code>cost_map::ROSInflationComputer</code> : emulates the ROS inflation algorithm</li>
<li>
<code>cost_map::Deflate</code> : functor reverses an inflation computation</li>
</ul>

<p>See the <a href="https://github.com/stonier/cost_map/tree/devel/cost_map_demos/src/applications/inflations.cpp">inflation demo program</a>
which illustrates how to use these classes.</p>
</div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-indigo">
    <div class="container-fluid">
      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            

  <table class="table table-condensed">
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/stonier/cost_map.git">https://github.com/stonier/cost_map.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">devel</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2018-01-01
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-success">
          
          DEVELOPED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-primary"><span class="glyphicon glyphicon-flash"></span> RELEASED
        </span>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/cost_map/github-stonier-cost_map">cost_map</a></td>
                    <td>0.3.3</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/cost_map_core/github-stonier-cost_map">cost_map_core</a></td>
                    <td>0.3.3</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/cost_map_cv/github-stonier-cost_map">cost_map_cv</a></td>
                    <td>0.3.3</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/cost_map_demos/github-stonier-cost_map">cost_map_demos</a></td>
                    <td>0.3.3</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/cost_map_msgs/github-stonier-cost_map">cost_map_msgs</a></td>
                    <td>0.3.3</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/cost_map_ros/github-stonier-cost_map">cost_map_ros</a></td>
                    <td>0.3.3</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/cost_map_visualisations/github-stonier-cost_map">cost_map_visualisations</a></td>
                    <td>0.3.3</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="cost-map">Cost Map</h1>

<p>This is a C++ library directly analogous to ETHZ ASL's <a href="https://github.com/ethz-asl/grid_map">GridMap</a> library,
but designed for use with costs where the data element is an unsigned char (as opposed to grid_map's doubles).</p>

<h2 id="table-of-contents">Table of Contents</h2>

<ol>
<li><a href="https://github.com/stonier/cost_map/tree/devel/#packages-overview">Packages Overview</a></li>
<li><a href="https://github.com/stonier/cost_map/tree/devel/#costmap">CostMap</a></li>
<li><a href="https://github.com/stonier/cost_map/tree/devel/#publishing-and-subscribing">Publishing and Subscribing</a></li>
<li><a href="https://github.com/stonier/cost_map/tree/devel/#visualisations">Visualisations</a></li>
<li><a href="https://github.com/stonier/cost_map/tree/devel/#saving-and-loading">Saving and Loading</a></li>
<li><a href="https://github.com/stonier/cost_map/tree/devel/#costmap2dros-conversions">Costmap2DROS Conversions</a></li>
<li><a href="https://github.com/stonier/cost_map/tree/devel/#other-conversions">Other Conversions</a></li>
<li><a href="https://github.com/stonier/cost_map/tree/devel/#inflation-computers">Inflation Computers</a></li>
</ol>

<h2 id="packages-overview">Packages Overview</h2>

<ul>
<li>
<strong><em>cost_map</em></strong> : meta-package for the grid map library.</li>
<li>
<strong><em>cost_map_core</em></strong> : core interfaces and algorithms of the cost map library, this package has no <a href="http://www.ros.org">ROS</a> dependencies.</li>
<li>
<strong><em>cost_map_ros</em></strong> : converters and utilities for cost maps in a <a href="http://www.ros.org">ROS</a> ecosystem - Image Bundles, CostMap2DROS, OccupancyGrid, CostMap messsages.</li>
<li>
<strong><em>cost_map_cv</em></strong> : conversions from and to <a href="http://opencv.org/">OpenCV</a> image types.</li>
<li>
<strong><em>cost_map_msgs</em></strong> : <a href="http://www.ros.org">ROS</a> message definitions related to the <a href="http://docs.ros.org/api/cost_map_msgs/html/msg/CostMap.html">cost_map_msgs/CostMap</a> type.</li>
<li>
<strong><em>cost_map_visualisations</em></strong> : helper nodes that bridge cost maps to <a href="http://wiki.ros.org/rviz">RViz</a>.</li>
<li>
<strong><em>cost_map_demos</em></strong> : several nodes for demonstration purposes and a test suite.</li>
</ul>

<p>The source code is released under a <a href="https://github.com/stonier/cost_map/tree/devel/LICENSE">BSD 3-Clause license</a>.</p>

<h2 id="costmap">CostMap</h2>

<p>The core <code>cost_map::CostMap</code> class is designed to maintain as close a compatibility
to grid maps as possible. This compatibility extends to conventions, definitions and API.
For convenience, an illustrative reference of a few of the conventions that hold for both
cost maps and grid maps is provided below.</p>

<p><a href="https://github.com/stonier/cost_map/tree/devel/cost_map_core/doc/grid_map_layers.pdf"><img src="https://raw.githubusercontent.com/stonier/cost_map/devel/cost_map_core/doc/grid_map_layers.png" alt="Layers"></a></p>

<p><a href="https://github.com/stonier/cost_map/tree/devel/cost_map_core/doc/grid_map_conventions.pdf"><img src="https://raw.githubusercontent.com/stonier/cost_map/devel/cost_map_core/doc/grid_map_conventions.png" alt="Conventions"></a></p>

<p>Please refer to the <a href="https://github.com/ethz-asl/grid_map/blob/master/README.md">GridMap README</a> for a
more comprehensive outline of what is possible with cost maps and grid maps.</p>

<p>Doxygen documentation for the cost map API's is served via the <em>Code API</em> links on the
<a href="http://wiki.ros.org/cost_map">ROS wiki</a> for each respective release/package. In addition
the latest doxygen documentation can always be found for each package at:</p>

<ul>
<li><a href="http://docs.ros.org/api/cost_map_core/html/annotated.html">cost_map_core</a></li>
<li><a href="http://docs.ros.org/api/cost_map_ros/html/annotated.html">cost_map_ros</a></li>
<li><a href="http://docs.ros.org/api/cost_map_visualisations/html/annotated.html">cost_map_visualisations</a></li>
</ul>

<h2 id="publishing-and-subscribing">Publishing and Subscribing</h2>

<p>Use the <code>cost_map::toMessage()/fromMessage(...)</code> methods.</p>
<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="c1">// Publishing</span>

<span class="cp">#include &lt;cost_map_ros/converter.hpp&gt;
</span>
<span class="kt">void</span> <span class="nf">publishCostMap</span><span class="p">(</span><span class="k">const</span> <span class="n">cost_map</span><span class="o">::</span><span class="n">CostMap</span><span class="o">&amp;</span> <span class="n">cost_map</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">cost_map_msgs</span><span class="o">::</span><span class="n">CostMap</span> <span class="n">msg</span><span class="p">;</span>
  <span class="n">toMessage</span><span class="p">(</span><span class="n">cost_map</span><span class="p">,</span> <span class="n">msg</span><span class="p">);</span>
  <span class="n">publisher</span><span class="p">.</span><span class="n">publish</span><span class="p">(</span><span class="n">msg</span><span class="p">);</span>
<span class="p">}</span>

</code></pre></div>
<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="c1">// Subscribing</span>

<span class="cp">#include &lt;cost_map_ros/converter.hpp&gt;
</span>
<span class="kt">void</span> <span class="nf">costMapCallback</span><span class="p">(</span><span class="k">const</span> <span class="n">cost_map_msgs</span><span class="o">::</span><span class="n">CostMap</span><span class="o">::</span><span class="n">ConstPtr</span><span class="o">&amp;</span> <span class="n">msg</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">cost_map</span><span class="o">::</span><span class="n">CostMap</span> <span class="n">cost_map</span><span class="p">;</span>
  <span class="n">cost_map</span><span class="o">::</span><span class="n">fromMessage</span><span class="p">(</span><span class="o">*</span><span class="n">msg</span><span class="p">,</span> <span class="n">cost_map</span><span class="p">);</span>
<span class="p">}</span>

</code></pre></div>
<h2 id="visualisations">Visualisations</h2>

<p>As with grid maps, the method employed to visualise is to drop in a relay node between
the cost map publisher and rviz to convert it to the appropriate type for visualisation.
This spares you from having to write any gui-related code in the cost maps or the
planners/controllers that use the cost maps.</p>

<p><code>cost_map_visualisations</code> has a relay node that converts each layer of a subscribed
cost map topic to a <code>nav_msgs/OccupancyGrid</code> topic for rviz. Simply include and
remap the input cost map topic in your launcher, for example:</p>
<div class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;launch&gt;</span>
  <span class="c">&lt;!-- node that publishes cost maps --&gt;</span>

  <span class="nt">&lt;node</span> <span class="na">pkg=</span><span class="s">"cost_map_visualisations"</span> <span class="na">type=</span><span class="s">"node"</span> <span class="na">name=</span><span class="s">"cost_map_visualisation"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;remap</span> <span class="na">from=</span><span class="s">"cost_map_visualisation/cost_map"</span> <span class="na">to=</span><span class="s">"funky_cost_maps/cost_map"</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;/node&gt;</span>

  <span class="c">&lt;!-- rviz, with a pre-loaded configuration that loads the resulting occupancy grid maps --&gt;</span>
  <span class="nt">&lt;node</span> <span class="na">name=</span><span class="s">"rviz"</span> <span class="na">pkg=</span><span class="s">"rviz"</span> <span class="na">type=</span><span class="s">"rviz"</span> <span class="na">args=</span><span class="s">"-d $(find funky_demos)/rviz/funky_cost_maps.rviz"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/launch&gt;</span>

</code></pre></div>
<p>An example of a relay in action is in the image bundle demo below.</p>

<h2 id="saving-and-loading">Saving and Loading</h2>

<h3 id="image-bundles">Image Bundles</h3>

<p>Image bundles provide an easy way to load and save cost maps to and from files on disk.
An image bundle consists of data stored in two parts - 1) meta-information about a costmap in
a yaml file and 2) layer data that is stored alongside in grayscale images.</p>

<p>A typical meta yaml for an image bundle:</p>
<div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="c1"># frame in the world that this map is attached to</span>
<span class="na">frame_id</span><span class="pi">:</span> <span class="s">map</span>
<span class="c1"># co-ordinates of the centre of the map relative to the frame_id</span>
<span class="na">centre_x</span><span class="pi">:</span> <span class="s">0</span>
<span class="na">centre_y</span><span class="pi">:</span> <span class="s">0</span>
<span class="c1"># dimensional properties of the map</span>
<span class="na">resolution</span><span class="pi">:</span> <span class="s">0.05</span>
<span class="na">number_of_cells_x</span><span class="pi">:</span> <span class="s">200</span>
<span class="na">number_of_cells_y</span><span class="pi">:</span> <span class="s">200</span>
<span class="c1"># data layers</span>
<span class="na">layers</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">layer_name</span><span class="pi">:</span> <span class="s">obstacle_costs</span>
    <span class="na">layer_data</span><span class="pi">:</span> <span class="s">obstacle_costs.png</span>
  <span class="pi">-</span> <span class="na">layer_name</span><span class="pi">:</span> <span class="s">static_costs</span>
    <span class="na">layer_data</span><span class="pi">:</span> <span class="s">can_be_some_other_name.png</span>

</code></pre></div>
<p>See <a href="https://github.com/stonier/cost_map/tree/devel/cost_map_ros/image_bundles/example.yaml">cost_map_ros/image_bundles/example.yaml</a> for a real example.</p>

<h3 id="imagebundle-demo">ImageBundle Demo</h3>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># load an image bundle and visualise the cost map</span>
roslaunch cost_map_demos load_image_bundle.launch <span class="nt">--screen</span>

</code></pre></div>
<h3 id="imagebundle-command-line-utilities">ImageBundle Command Line Utilities</h3>

<p>There exist two command line utilities for loading and saving to and from a cost map topic:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># load and publish to '/foo/cost_map'</span>
rosrun cost_map_ros load_image_bundle <span class="nt">-t</span> /foo/cost_map example.yaml
<span class="c"># subscribe and save from '/foo/cost_map' to foo.yaml</span>
<span class="nb">mkdir </span>foo
<span class="nb">cd </span>foo
rosrun cost_map_ros save_image_bundle /foo/cost_map foo.yaml

</code></pre></div>
<h3 id="imagebundle-methods">ImageBundle Methods</h3>

<ul>
<li>
<code>cost_map::toImageBundle(...)</code> : save a cost map to an image bundle</li>
<li>
<code>cost_map::fromImageBundle(...)</code> : load an image bundle into a cost map object</li>
</ul>

<p>See the <a href="https://github.com/stonier/cost_map/tree/devel/cost_map_ros/src/lib/image_bundles.cpp#L203">LoadImageBundle</a>/<a href="https://github.com/stonier/cost_map/tree/devel/cost_map_ros/src/lib/image_bundles.cpp#L235">SaveImageBundle</a>
classes which illustrate how the command line utilities use these api.</p>

<h2 id="costmap2dros-conversions">Costmap2DROS Conversions</h2>

<p>The ROS Navistack uses <code>costmap_2d::Costmap2DROS</code> objects and it is sometimes necessary
to make conversions from these to provide new style cost maps to other libraries. Methods are
available for both full map conversion as well as subwindows centred on the pose of the robot itself.</p>

<h3 id="costmap2dros-vs-costmap">Costmap2DROS vs CostMap</h3>

<p><a href="https://github.com/stonier/cost_map/tree/devel/cost_map_ros/doc/image_loading_coordinates.png"><img src="https://raw.githubusercontent.com/stonier/cost_map/devel/cost_map_ros/doc/image_loading_coordinates_preview.png" alt="CostMap"></a></p>

<h3 id="costmap2dros-demo">Costmap2DROS Demo</h3>

<table>
<thead>
<tr>
<th style="text-align: center">Costmap2DROS</th>
<th style="text-align: center">Full/Partial Copies</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center"><a href="https://github.com/stonier/cost_map/tree/devel/cost_map_demos/doc/images/from_ros_costmaps/from_ros_costmaps.png"><img src="https://raw.githubusercontent.com/stonier/cost_map/devel/cost_map_demos/doc/images/from_ros_costmaps/from_ros_costmaps_preview.png" alt="Costmap2DROS"></a></td>
<td style="text-align: center"><a href="https://github.com/stonier/cost_map/tree/devel/cost_map_demos/doc/images/from_ros_costmaps/from_ros_costmaps_copied.png"><img src="https://raw.githubusercontent.com/stonier/cost_map/devel/cost_map_demos/doc/images/from_ros_costmaps/from_ros_costmaps_copied_preview.png" alt="CostMap"></a></td>
</tr>
</tbody>
</table>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># load several ros costmaps and copy full/sub windows to new style costmaps</span>
roslaunch cost_map_demos from_ros_costmaps.launch <span class="nt">--screen</span>

</code></pre></div>
<h3 id="costmap2dros-methods">Costmap2DROS Methods</h3>

<ul>
<li>
<code>cost_map::fromCostmap2DROS(...)</code> : create a cost map from a Costmap2DROS</li>
<li>
<code>cost_map::fromCostmap2DROSAtRobotPose(...)</code> : create a cost map from a subwindow around the robot pose in a Costmap2DROS</li>
</ul>

<p>See the <a href="https://github.com/stonier/cost_map/tree/devel/cost_map_demos/src/applications/from_ros_costmaps.cpp">from_ros_costmaps demo program</a>
which illustrates how to use these api. Additionally you can directly use the <code>grid_map::Costmap2DConverter</code> template class for more atomic operations.</p>

<h2 id="other-conversions">Other Conversions</h2>

<ul>
<li>
<code>cost_map::toGridMap(...)</code> : convert to a float based grid map by normalising values between 0.0 and 100.0</li>
<li>
<code>cost_map::addLayerFromROSImage(...)</code> : add a layer from ros immage message type (sensor_msgs::Image)</li>
</ul>

<h2 id="inflation-computers">Inflation Computers</h2>

<h3 id="inflation-demo">Inflation Demo</h3>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># load an image bundle and visualise the cost map</span>
roslaunch cost_map_demos inflations.launch <span class="nt">--screen</span>

</code></pre></div>
<table>
<thead>
<tr>
<th style="text-align: center">Obstacle Layer</th>
<th style="text-align: center">Inflated Layer</th>
<th style="text-align: center">Deflated Layer</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center"><a href="https://github.com/stonier/cost_map/tree/devel/cost_map_demos/doc/images/inflation/obstacle_layer.png"><img src="https://raw.githubusercontent.com/stonier/cost_map/devel/cost_map_demos/doc/images/inflation/obstacle_layer_preview.png" alt="Obstacle Layer"></a></td>
<td style="text-align: center"><a href="https://github.com/stonier/cost_map/tree/devel/cost_map_demos/doc/images/inflation/inflation_layer.png"><img src="https://raw.githubusercontent.com/stonier/cost_map/devel/cost_map_demos/doc/images/inflation/inflation_layer_preview.png" alt="Inflated Layer"></a></td>
<td style="text-align: center"><a href="https://github.com/stonier/cost_map/tree/devel/cost_map_demos/doc/images/inflation/deflated_layer.png"><img src="https://raw.githubusercontent.com/stonier/cost_map/devel/cost_map_demos/doc/images/inflation/deflated_layer_preview.png" alt="Deflated Layer"></a></td>
</tr>
</tbody>
</table>

<h3 id="inflation-classes">Inflation Classes</h3>

<ul>
<li>
<code>cost_map::Inflate</code> : functor that executes (with the assistance of an inflation computer) the inflation process</li>
<li>
<code>cost_map::ROSInflationComputer</code> : emulates the ROS inflation algorithm</li>
<li>
<code>cost_map::Deflate</code> : functor reverses an inflation computation</li>
</ul>

<p>See the <a href="https://github.com/stonier/cost_map/tree/devel/cost_map_demos/src/applications/inflations.cpp">inflation demo program</a>
which illustrates how to use these classes.</p>
</div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-ardent">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>ardent</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-jade">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>jade</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-hydro">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>hydro</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>


<script type="text/javascript">
  $(document).ready(function() {
    setupDistroSwitch("crystal");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-4 col-md-4">
          
            <a href="https://github.com/ros-infrastructure" title="Find rosindex in Github">
            <span class="icon  icon--github">
              <svg viewBox="0 0 16 16">
                <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
              </svg>
            </span>

            <span class="username">ros-infrastructure</span>
          </a>
          |
          <em>generated on 2019-01-22</em>
        
        </div>
        <div class="col-sm-8 col-md-8 text-right">
          <p class="text">a community-maintained index of robotics software
 | <a href="/privacy.txt">privacy</a></p>
        </div>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
