<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>ROS Index</title>
    <meta name="description" content="a community-maintained index of robotics software
">

    
    <link rel="canonical" href="https://ros-infrastructure.github.io/index.ros.org//r/omip/">
    
    <link rel="stylesheet" type="text/css" href="/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/sphinx.css">
    

    <script type="text/javascript" src=/js/jquery.js></script>
    <script src=/bootstrap/js/bootstrap.min.js type="text/javascript"></script>
    <script src=/js/jquery-cookie-1.4.1/jquery.cookie.js type="text/javascript"></script>

    <script type="text/javascript" src=/js/ga.js async></script>
    <script type="text/javascript" src=/js/toc.js></script>

    <script src=/js/distro_switch.js></script>
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">
    <div class="container-fluid" style="margin-bottom: 10px">

      <div align="center">
        <br>
        <table id="topnav-table">
          <tr>
            <td valign="middle">
                ROS Resources:
              <a href="http://wiki.ros.org/">Documentation</a>
              |
              <a href="http://wiki.ros.org/Support">Support</a>
              |
              <a href="http://discourse.ros.org/">Discussion Forum</a>
              |
              <a href="http://status.ros.org/">Service Status</a>
              |
              <a href="http://answers.ros.org/">Q&A answers.ros.org</a>
            </td>
          </tr>
        </table> <!-- topnav-table -->
      </div>

      <div class="row">

        <div class="col-sm-12 col-md-9" style="margin-top: 8px">
          <div class="row">
            <!-- title -->
            <div class="col-xs-12 col-sm-3 col-md-3" style="white-space:nowrap;">
              <a class="site-title" href="/">ROS Index</a> <sup><a href="https://github.com/ros-infrastructure/rosindex/issues/new" style="vertical-align:super;" class="label label-warning" target="_blank">BETA</a></sup>
            </div>

            <!-- main links -->
            <div class="col-xs-12 col-sm-9 col-md-9 text-right">
              <ul class="list-inline" style="margin-bottom:0px;">
                <li><a class="btn btn-link" href="/about">About</a></li>

                <li class="dropdown">
                  <button id="dLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Index <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                    <li><a href="/packages/page/1/time/">Package List</a></li>
                    <li><a href="/repos/page/1/time/">Repository List</a></li>

                    <li class="hidden" class="divider"></li>


                    <li class="hidden"><a href="/srvs/">Nodes</a></li>
                    <li class="hidden"><a href="/msgs/">Messages</a></li>
                    <li class="hidden"><a href="/srvs/">Services</a></li>
                    <li class="hidden"><a href="/srvs/">Plugins</a></li>

                    <li class="divider"></li>

                    <li><a href="/deps/">System Dependencies</a></li>
                  </ul>
                </li>

                <li class="dropdown disabled">
                  <button id="dLabel" class="btn btn-link" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Doc <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                    
                    <li>
                      <a href="/doc/ros2">
                        ROS2 Overview
                      </a>
                    </li>
                    
                    <li class="hidden" class="divider"></li>

                    <li class="hidden"><a href="/doc/tutorials">Tutorials</a></li>
                    <li class="hidden"><a href="/doc/readmes">Readmes</a></li>
                    <li class="hidden"><a href="/doc/apis">APIs</a></li>
                  </ul>
                </li>

                <li><a class="btn btn-link" href="/contribute">Contribute</a></li>
                <li><a class="btn btn-link" href="/stats">Stats</a></li>
              </ul>

            </div>
          </div>
        </div>

        <!-- searchbox -->
        <div class="col-sm-12 col-md-3" style="margin-top: 12px">
          <form id="top-searchbox" action="/search/" role="form" method="get">
            <div class="input-group input-group-sm">
              <input type="text" class="form-control" name="term" placeholder="Search ROS">
              <span class="input-group-btn">
                <button class="btn btn-default btn-sm" title="Search ROS" type="submit">
                  <span class="glyphicon glyphicon-search"></span>
                </button>
                <a href="https://lunrjs.com/guides/searching.html"
                   title="Help to Search" class="btn btn-default btn-sm">
                  <span class="glyphicon glyphicon-question-sign"></span>
                </a>
              </span>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!--
    <a class="site-title" href="/">ROS Index</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        <a class="page-link" href="/packages">Packages</a>
        <a class="page-link" href="/repos">Repositories</a>
        <a class="page-link" href="/search">Search</a>
      </div>
    </nav>
    -->

  </div>
  <script type="text/javascript">
    $('#top-searchbox').submit(function() {
        return $('#top-searchbox input:text').filter(function() {
          return $(this).val() == "";
        }).length == 0;
    });
  </script>
</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="container-fluid" style="margin-top:20px">
  <div class="container-fluid">
    <div class="row">
      <ol class="breadcrumb">
        <li><a href="/">Home</a></li>
        <li><a href="/repos">Repos</a></li>
        <li class="active">omip</li>
        <!--<li class="active">omip</li>-->
      </ol>
    </div>
    <div class="row">
      

<div id="distro-switch" class="btn-group btn-group-justified" data-toggle="buttons">
  
    <label id="crystal-option" class="distro-button btn btn-xs btn-default" href="#crystal" data="crystal">
      <input type="radio" name="options" id="crystal-radio" autocomplete="off"> crystal
    </label>
  
    <label id="bouncy-option" class="distro-button btn btn-xs btn-default" href="#bouncy" data="bouncy">
      <input type="radio" name="options" id="bouncy-radio" autocomplete="off"> bouncy
    </label>
  
    <label id="melodic-option" class="distro-button btn btn-xs btn-default" href="#melodic" data="melodic">
      <input type="radio" name="options" id="melodic-radio" autocomplete="off"> melodic
    </label>
  
    <label id="lunar-option" class="distro-button btn btn-xs btn-default" href="#lunar" data="lunar">
      <input type="radio" name="options" id="lunar-radio" autocomplete="off"> lunar
    </label>
  
    <label id="kinetic-option" class="distro-button btn btn-xs btn-primary" href="#kinetic" data="kinetic">
      <input type="radio" name="options" id="kinetic-radio" autocomplete="off"> kinetic
    </label>
  
    <label id="indigo-option" class="distro-button btn btn-xs btn-primary" href="#indigo" data="indigo">
      <input type="radio" name="options" id="indigo-radio" autocomplete="off"> indigo
    </label>
  

  <!-- Older distros -->
  <div class="btn-group dropdown">
    <label type="button" class="btn btn-xs dropdown-toggle btn-default" data-toggle="dropdown" id="older-distro-button">
        <input type="radio" name="options" autocomplete="off">
      <span id="older-label">Older</span>
      <span class="caret"></span>
    </label>
    <ul class="dropdown-menu" role="menu">
      
        <li data="ardent" id="ardent-option" class="disabled older-distro-option"  href="#ardent">
          <a href="#ardent" data="ardent" id="ardent-button">ardent</a>
        </li>
      
        <li data="jade" id="jade-option" class="disabled older-distro-option"  href="#jade">
          <a href="#jade" data="jade" id="jade-button">jade</a>
        </li>
      
        <li data="hydro" id="hydro-option" class="disabled older-distro-option"  href="#hydro">
          <a href="#hydro" data="hydro" id="hydro-button">hydro</a>
        </li>
      
    </ul>
  </div>
</div>

    </div>
    <div class="row">
      &nbsp;
    </div>
    <div class="row">
      <div class="well well-sm">
  <div>
    
  </div>
  
  <table class="table">
    <tr>
      <td width="100px" class="text-center">
        <img style="width: 80px;" src="/assets/repo.png">
      </td>
      <td>
        <h3><a style="text-decoration:none;" href="/r/omip">omip</a> <small>repository</small></h3>
        
      </td>
    </tr>
  </table>
  <div class="top-buffer">
    
    
<table class="table table-condensed instance-switch">
  <tr>
    <td>
      <div id="repo-switch" class="btn-group btn-group-justified" role="group">
        <div class="btn-group" style="width: 50px">
          <a type="button" class="btn btn-xs btn-default" data-toggle="tooltip" data-placement="left" title="View Instances" 
            href="/repos/omip"><span class="glyphicon glyphicon-th"></span></a>
        </div>
        <div class="btn-group" style="width: 90%" role="group">
          <div class="dropdown">
            <!-- TODO: add disabled when only 1 version is known? -->
            <button class="btn btn-xs btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" title="Select Instance">
              <span class="pull-left" style="width: 100%; text-align: left">
                <span class="pull-right"><span class="caret"></span></span> 
              <span class="glyphicon glyphicon-star"></span>
                  github-tu-rbo-omip
              </span>
            </button>
            <ul class="dropdown-menu" role="menu">
              
                <li role="presentation">
                  <a id="github-tu-rbo-omip" role="menuitem" tabindex="-1" href="/r/omip/github-tu-rbo-omip" data="github-tu-rbo-omip">
                    <span class="glyphicon glyphicon-star"></span>
                    github-tu-rbo-omip
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    </td>
  </tr>
</table>

  </div>
  <div class="top-buffer">
  </div>
</div>

    </div>
  </div>
</div>


  <div class="distro distro-crystal">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>crystal</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-bouncy">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>bouncy</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-melodic">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>melodic</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-lunar">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>lunar</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-kinetic">
    <div class="container-fluid">
      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            

  <table class="table table-condensed">
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/tu-rbo/omip.git">https://github.com/tu-rbo/omip.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">kinetic</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2017-01-26
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-default">UNRELEASED
        </span>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/feature_tracker/github-tu-rbo-omip">feature_tracker</a></td>
                    <td>1.0.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/joint_tracker/github-tu-rbo-omip">joint_tracker</a></td>
                    <td>1.0.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/lgsm/github-tu-rbo-omip">lgsm</a></td>
                    <td>0.0.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/omip/github-tu-rbo-omip">omip</a></td>
                    <td>1.0.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/omip_common/github-tu-rbo-omip">omip_common</a></td>
                    <td>1.0.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/omip_launch/github-tu-rbo-omip">omip_launch</a></td>
                    <td>1.0.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rb_tracker/github-tu-rbo-omip">rb_tracker</a></td>
                    <td>1.0.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="online-multimodal-interactive-perception-omip">Online Multimodal Interactive Perception - OMIP</h1>

<h3 id="authors-and-contact">Authors and contact</h3>

<p>(Main author) Roberto Martín-Martin (<a href="mailto:roberto.martinmartin@tu-berlin.de">roberto.martinmartin@tu-berlin.de</a>, <a href="mailto:rmartinmar@gmail.com">rmartinmar@gmail.com</a>)</p>

<p>Sebastian Höfer (<a href="mailto:sebastian.hoefer@tu-berlin.de">sebastian.hoefer@tu-berlin.de</a>, <a href="mailto:sebastianhoefer83@googlemail.com">sebastianhoefer83@googlemail.com</a>)</p>

<p>Oliver Brock (<a href="mailto:oliver.brock@tu-berlin.de">oliver.brock@tu-berlin.de</a>)</p>

<h3 id="a-framework-to-perceive-the-world-through-interactions">A framework to perceive the world through interactions</h3>

<p>OMIP creates a interconnected group of recursive loops that cooperate to quickly perceive robot's environment using knowledge about interactions and how they affect the sensor signals.
The framework is based on the work presented <a href="http://www.robotics.tu-berlin.de/fileadmin/fg170/Publikationen_pdf/martinmartin_ip_iros_2014.pdf">here</a> and <a href="http://www.redaktion.tu-berlin.de/fileadmin/fg170/Publikationen_pdf/martin_hoefer_15_iros_sr_opt.pdf">here</a>.</p>

<h2 id="installation">Installation</h2>

<p>This code has been tested with ROS Indigo on Ubuntu 14.04 LTS. You are now using a less tested Ubuntu 16.04 ROS Kinetic version (kinetic branch). Assuming you already have installed ROS and have created a catkin environment.
- Check out OMIP and omip_msgs from the repository in your catkin environment:<br></p>

<p><code>git clone https://github.com/tu-rbo/omip.git
</code><br></p>

<p><code>git clone https://github.com/tu-rbo/omip_msgs.git
</code>
- Install dependencies:<br>
 - Boost, Eigen library. The version of Eigen3 that is currently in the Ubuntu 16.04 package manager is a beta version and it causes the LGSM library (library for Lie algebra-group computation) to not compile. We included a deb file with an older working version of libeigen3 in omip/omip/third_party/libeigen3-dev_3.2.5-4_all.deb. Be careful! It could affect other programs using the beta version of eigen. To force to install it:<br></p>

<p><code>sudo dpkg --force-downgrade -i omip/omip/third_party/libeigen3-dev_3.2.5-4_all.deb
</code><br>
 - Terminator: allows to split a window into several terminals. When you install it, it will be probably set as default when you open new terminals. If you want to go back to the default gnome terminal, execute after installing terminator:<br></p>

<p><code>gsettings set org.gnome.desktop.default-applications.terminal exec 'gnome-terminal'
</code><br>
 - Create a backup of the config file for terminator and then copy omip_launch/cfg/terminator/config to ~/.config/terminator/ . This file contains predefine configurations to launch OMIP within a single terminator window.<br></p>

<p><code>cp ~/.config/terminator/config ~/.config/terminator/config.bak
</code><br>
Create the folder ~/.config/terminator before copying the file if it does not exist.</p>

<p><code>cp omip/omip_launch/cfg/terminator/config ~/.config/terminator/
</code><br>
 - ROS packages OpenCV, PCL, openni, openni2, cmake-modules, BFL:<br></p>

<p><code>sudo apt-get install ros-kinetic-pcl-ros ros-kinetic-openni-launch ros-kinetic-openni-camera
ros-kinetic-openni2-launch ros-kinetic-openni2-camera ros-kinetic-cmake-modules
</code><br>
 - Bayesian Filter Library by TU Leuven:<br></p>

<p><code>sudo apt-get install ros-kinetic-bfl
</code><br>
then copy omip/thirdparty/bflConfig.cmake into your_ros_install_dir/share/bfl with:<br></p>

<p><code>sudo cp omip/omip/third_party/bflConfig.cmake /opt/ros/kinetic/share/bfl/
</code><br>
 - [Optional to run the occlusion detector] RVIZ plugin to compute the area of the image occluded by the robot (you will need a URDF model of your robot!):<br></p>

<p><code>git clone https://github.com/roberto-martinmartin/rviz_plugin_camerarenderpublisher.git
</code><br>
 - [Optional to visualize the estimated rigid body poses with covariance in RVIZ] RVIZ plugin by LAAS-CNRS Toulousse:<br></p>

<p><code>git clone https://github.com/laas/rviz_plugin_covariance.git
</code><br>
then switch to Indigo branch.
 - Shape tracker requires a package (libpointmatcher) that is not available for ROS kinetic. You can try to install Libpointmatcher directly from source. Currently, shape tracker will be ignore by catkin. If you want to try to compile and use it, remove the CATKIN_IGNORE file in the shape_tracker folder:<br></p>

<p><code>rm omip/shape_tracker/CATKIN_IGNORE
</code>
 - Shape reconstruction uses some VTK files that does not compile on this Ubuntu-ROS version. Currently, shape reconstruction will be ignore by catkin. If you want to try to compile and use it, remove the CATKIN_IGNORE file in the shape_roconstruction folder:<br></p>

<p><code>rm omip/shape_reconstruction/CATKIN_IGNORE
</code>
- Build the packages:<br></p>

<p><code>catkin build (omip)
</code>
- Download one of the the demo rosbags from <a href="https://owncloud.tu-berlin.de/index.php/s/uDSTdI3FDQagfL1">here</a> (several GB!) or start an openni node. The rosbags are compressed, you will need to decompress them with:<br></p>

<p><code>rosbag decompress rosbagname.bag
</code><br>
puma_demo is the smallest bag.
- Start a roscore
- Run OMIP. For example:<br></p>

<p><code>rosrun omip_launch omip.sh --omip=1 --rgbd=0
</code><br>
The options --omip=1 launches only the feature-based tracker and no shape reconstruction, and --rgbd=0 avoids launching an openni node. To see other options run:<br></p>

<p><code>rosrun omip_launch omip.sh --help
</code>
- Play the demo bag or use the RGB-D stream provided by the openni node:<br></p>

<p><code>rosbag play rosbagname.bag
</code><br></p>

<p>You can launch OMIP with 3 different system architectures:</p>

<ol>
<li><p><strong>Main architecture</strong>. Three estimation levels: feature tracking, feature-based rigid body tracking, kinematic model estimation. This option can execute only using RGB-D images and therefore requires less computational power. 
To try this option, download one of the rosbags with the "_imgs" suffix and launch OMIP using the option "--omip=1" (or "--omip=2" if you want that the terminals 
remain open after finishing the execution, for debugging purposes).</p></li>
<li><p>Four estimation levels: feature tracking, feature-based rigid body tracking, kinematic model estimation, shape reconstruction. This option requires point clouds and is therefore computationally more expensive. 
To try this option, download one of the rosbags with the "_full" suffix and launch OMIP using the option "--omip=3".</p></li>
<li><p>Five estimation levels: feature tracking, feature-based rigid body tracking, kinematic model estimation, shape reconstruction, shape-based rigid body tracking. This option requires also point clouds and is therefore computationally more expensive. 
To try this option, download one of the rosbags with the "_full" suffix and launch OMIP using the option "--omip=4".</p></li>
</ol>

<p>For more information on how to use OMIP and activate/deactivate modules, checkout out the documentation, the wiki pages or run:<br></p>

<p><code>rosrun omip_launch omip.sh --help
</code></p>

<p>More frequent problem: The feature tracking is not running and looks like frozen -&gt; Check in feature_tracker/cfg/feature_tracker_cfg.yaml the depth_img_topic name. Depending if you are using
openni or openni2 (or rosbags generated from one or the other package) the name of the topic for the depth maps is different.</p>

<h3 id="what-is-omip">What is OMIP?</h3>

<p>Online Multimodal Interactive Perception (OMIP) is a framework to exploit the interaction capabilites of a robot to reveal and perceive its environment. 
The information to perceive this environment is contained in the high dimensional, continuous, multimodal sensor stream of the robot.
Our framework offers a way to interpret this stream based on prior knowledge encoded into recursive estimation loops. 
The prior knowledge used for perception includes physics laws (rigid body physics, kinematics, ...) and knowledge about the correlation between robot actions and responses of the environment.</p>

<p>Based on the recursive estimation schema - prediction/correction -  our framework can cope with the high amount of data provided by the robot's sensors <strong>in an online manner</strong>.
The key (and the main idea of our framework) is to factorize the perceptual problem into smaller <em>perceptual units</em>, solve them with single recursive estimation loops and connect all the loops tightly. 
The connection of the loops defines a bidirectional information flow between loops: a bottom-up flow to pass estimations as measurements to more abstract levels, and a top-down flow to pass predicted measurements as predicted next states to less abstract levels.
By connecting the loops our framework can interpret the combined sensor-action stream as evidence of concepts of different level of abstraction.</p>

<p>In the given demo, an RGB-D stream of an interaction is interpreted simultaneously as a moving visual field (motion of features and surfaces), multiple moving rigid bodies and changes in the kinematic state of an articulated object.</p>

<h2 id="structure">Structure</h2>

<p>OMIP is designed to work in ROS (Robot Operating System). 
ROS provides a suitable message-passing architecture to interconnect recursive estimation loops and propagate their information (estimations and predictions).</p>

<p>Each recursive estimation level is realized as a ROS node that implements the interface <em>RecursiveEstimatorNodeInterface</em>. 
A recursive estimation level is defined by:
- Measurement
- State
- Priors:
 - About the relation between measurements and state (measurement model)
 - About the relation between the state at time t and t+1 (forward model)
 - About the uncertainty (of measurements and predicted states)</p>

<p>An iteration of our recursive estimation levels begin when a new measurement arrives (execute-on-demand). This behavior is encoded using callbacks.
An iteration of a recursive estimation level implies correcting the state, predicting the next state and publishing the results. 
Note that we invert the classical order predict-correct; this allows us to make us of the predictions already in an earlier point in time! 
This <em>trick</em> is crucial in our system: the predictions are passed to other levels and can be used as alternative forward models based on extra priors.</p>

<p>Internally, each level contains at least one recursive estimation filter. These filters implement the interface <em>RecursiveEstimatorFilterInterface</em>.
The levels call the corresponding correct-predict methods of the filters and pass the measurements/states up and down.</p>

<p>You can extend the OMIP framework with new recursive loops. To do that, create a filter that implements the filter interface. Then create a node that implements the node interface and contains an instance of the filter interface. Connect your new node to existing nodes and sensors.</p>
</div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-indigo">
    <div class="container-fluid">
      
        
        <div class="panel panel-default">
          
          <div class="panel-heading"><h3 class="panel-title">Repository Summary</h3></div>
          <div class="panel-body" style="overflow-x: auto">
            

  <table class="table table-condensed">
    <tr>
      <td style="width:100px;" class="text-right"><b>Checkout URI</b></td>
      <td><a class="label label-default" href="https://github.com/tu-rbo/omip.git">https://github.com/tu-rbo/omip.git</a></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Type</b></td>
      <td><span class="label label-default">git</span></td>
    </tr>
    <tr>
      <td class="text-right"><b>VCS Version</b></td>
      <td><span class="label label-default">indigo</span></td>
    </tr>
    <tr>
      <td style="white-space: nowrap;" class="text-right"><b>Last Updated</b></div>
      <td>
        
          <span class="label label-default"><span class="glyphicon glyphicon-time"></span> 2017-01-27
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Dev Status</b></td>
      <td>
        
          
            <span class="label label-primary">
          
          MAINTAINED
        </span>
      </td>
    </tr>
    <tr>
      <td class="text-right"><b>Released</b></td>
      <td>
        
          <span class="label label-default">UNRELEASED
        </span>
      </td>
    </tr>
  </table>

          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">Packages</h3></div>
          <div class="panel-body">
            
            
              <table class="table table-condensed table-hover table-striped">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Version</th>
                  </tr>
                </thead>
                <tbody>
                
                  <tr>
                    <td><a href="/p/feature_tracker/github-tu-rbo-omip">feature_tracker</a></td>
                    <td>1.0.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/joint_tracker/github-tu-rbo-omip">joint_tracker</a></td>
                    <td>1.0.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/lgsm/github-tu-rbo-omip">lgsm</a></td>
                    <td>0.0.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/omip/github-tu-rbo-omip">omip</a></td>
                    <td>1.0.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/omip_common/github-tu-rbo-omip">omip_common</a></td>
                    <td>1.0.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/omip_launch/github-tu-rbo-omip">omip_launch</a></td>
                    <td>1.0.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/rb_tracker/github-tu-rbo-omip">rb_tracker</a></td>
                    <td>1.0.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/shape_reconstruction/github-tu-rbo-omip">shape_reconstruction</a></td>
                    <td>0.0.0</td>
                  </tr>
                
                  <tr>
                    <td><a href="/p/shape_tracker/github-tu-rbo-omip">shape_tracker</a></td>
                    <td>0.0.0</td>
                  </tr>
                
                </tbody>
              </table>
            
          </div>
        </div>

        <div class="panel panel-default">
          <div class="panel-heading"><h3 class="panel-title">README</h3></div>
          <div class="panel-body">
            
              <div class="rendered-markdown">
<h1 id="online-multimodal-interactive-perception-omip">Online Multimodal Interactive Perception - OMIP</h1>

<h3 id="authors-and-contact">Authors and contact</h3>

<p>(Main author) Roberto Martín-Martin (<a href="mailto:roberto.martinmartin@tu-berlin.de">roberto.martinmartin@tu-berlin.de</a>, <a href="mailto:rmartinmar@gmail.com">rmartinmar@gmail.com</a>)</p>

<p>Sebastian Höfer (<a href="mailto:sebastian.hoefer@tu-berlin.de">sebastian.hoefer@tu-berlin.de</a>, <a href="mailto:sebastianhoefer83@googlemail.com">sebastianhoefer83@googlemail.com</a>)</p>

<p>Oliver Brock (<a href="mailto:oliver.brock@tu-berlin.de">oliver.brock@tu-berlin.de</a>)</p>

<h3 id="a-framework-to-perceive-the-world-through-interactions">A framework to perceive the world through interactions</h3>

<p>OMIP creates a interconnected group of recursive loops that cooperate to quickly perceive robot's environment using knowledge about interactions and how they affect the sensor signals.
The framework is based on the work presented <a href="http://www.robotics.tu-berlin.de/fileadmin/fg170/Publikationen_pdf/martinmartin_ip_iros_2014.pdf">here</a> and <a href="http://www.redaktion.tu-berlin.de/fileadmin/fg170/Publikationen_pdf/martin_hoefer_15_iros_sr_opt.pdf">here</a>.</p>

<h2 id="installation">Installation</h2>

<p>This code has been tested with ROS Indigo on Ubuntu 14.04 LTS. For a less tested Ubuntu 16.04 ROS Kinetic version, switch from master to kinetic branch. Assuming you already have installed ROS and have created a catkin environment.
- Check out OMIP and omip_msgs from the repository in your catkin environment:<br></p>

<p><code>git clone https://github.com/tu-rbo/omip.git
</code><br></p>

<p><code>git clone https://github.com/tu-rbo/omip_msgs.git
</code>
- Install dependencies:<br>
 - Boost, Eigen library.
 - Terminator: allows to split a window into several terminals. When you install it, it will be probably set as default when you open new terminals. If you want to go back to the default gnome terminal, execute after installing terminator:<br></p>

<p><code>gsettings set org.gnome.desktop.default-applications.terminal exec 'gnome-terminal'
</code><br>
 - Create a backup of the config file for terminator and then copy omip_launch/cfg/terminator/config to ~/.config/terminator/ . This file contains predefine configurations to launch OMIP within a single terminator window.<br></p>

<p><code>cp ~/.config/terminator/config ~/.config/terminator/config.bak
</code><br></p>

<p><code>cp omip/omip_launch/cfg/terminator/config ~/.config/terminator/
</code><br>
Create the folder ~/.config/terminator before copying the file if it does not exist.
 - ROS packages OpenCV, PCL, openni, openni2, cmake-modules, BFL:<br></p>

<p><code>sudo apt-get install ros-indigo-pcl-ros ros-indigo-openni-launch ros-indigo-openni-camera
ros-indigo-openni2-launch ros-indigo-openni2-camera ros-indigo-cmake-modules
</code><br>
 - Bayesian Filter Library by TU Leuven:<br></p>

<p><code>sudo apt-get install ros-indigo-bfl
</code><br>
then copy omip/thirdparty/bflConfig.cmake into your_ros_install_dir/share/bfl with:<br></p>

<p><code>sudo cp omip/omip/third_party/bflConfig.cmake /opt/ros/indigo/share/bfl/
</code><br>
 - [Optional to run the occlusion detector] RVIZ plugin to compute the area of the image occluded by the robot (you will need a URDF model of your robot!):<br></p>

<p><code>git clone https://github.com/roberto-martinmartin/rviz_plugin_camerarenderpublisher.git
</code><br>
 - [Optional to visualize the estimated rigid body poses with covariance in RVIZ] RVIZ plugin by LAAS-CNRS Toulousse:<br></p>

<p><code>git clone https://github.com/laas/rviz_plugin_covariance.git
</code><br>
then switch to Indigo branch.
 - [Optional to run the latest version of the shape-based tracker] Libpointmatcher by ETH Zurich:<br></p>

<p><code>sudo apt-get install ros-indigo-libpointmatcher
</code><br>
then create a backup of the libpointmatcherConfig.cmake in your_ros_install_dir/share/libpointmacher and copy the one in omip/omip/third_party:<br></p>

<p><code>sudo cp /opt/ros/indigo/share/libpointmacher/cmake/libpointmatcherConfig.cmake /opt/ros/indigo/share/libpointmacher/cmake/libpointmatcherConfig.cmake.bak
</code><br>
and<br></p>

<p><code>sudo cp omip/omip/third_party/libpointmatcherConfig.cmake /opt/ros/indigo/share/libpointmacher/cmake/
</code><br>
You can skip this step if you only want to use the feature-based tracker by adding a CATKIN_IGNORE file into the shape_tracker package:<br></p>

<p><code>touch omip/shape_tracker/CATKIN_IGNORE
</code>
- Build the packages:<br></p>

<p><code>catkin build (omip)
</code>
- Download one of the the demo rosbags from <a href="https://owncloud.tu-berlin.de/index.php/s/uDSTdI3FDQagfL1">here</a> (several GB!) or start an openni node. The rosbags are compressed, you will need to decompress them with:<br></p>

<p><code>rosbag decompress rosbagname.bag
</code><br>
puma_demo is the smallest bag.
- Start a roscore
- Run OMIP. For example:<br></p>

<p><code>rosrun omip_launch omip.sh --omip=1 --rgbd=0
</code><br>
The options --omip=1 launches only the feature-based tracker and no shape reconstruction, and --rgbd=0 avoids launching an openni node. To see other options run:<br></p>

<p><code>rosrun omip_launch omip.sh --help
</code>
- Play the demo bag or use the RGB-D stream provided by the openni node:<br></p>

<p><code>rosbag play rosbagname.bag
</code><br></p>

<p>You can launch OMIP with 3 different system architectures:</p>

<ol>
<li><p><strong>Main architecture</strong>. Three estimation levels: feature tracking, feature-based rigid body tracking, kinematic model estimation. This option can execute only using RGB-D images and therefore requires less computational power. 
To try this option, download one of the rosbags with the "_imgs" suffix and launch OMIP using the option "--omip=1" (or "--omip=2" if you want that the terminals 
remain open after finishing the execution, for debugging purposes).</p></li>
<li><p>Four estimation levels: feature tracking, feature-based rigid body tracking, kinematic model estimation, shape reconstruction. This option requires point clouds and is therefore computationally more expensive. 
To try this option, download one of the rosbags with the "_full" suffix and launch OMIP using the option "--omip=3".</p></li>
<li><p>Five estimation levels: feature tracking, feature-based rigid body tracking, kinematic model estimation, shape reconstruction, shape-based rigid body tracking. This option requires also point clouds and is therefore computationally more expensive. 
To try this option, download one of the rosbags with the "_full" suffix and launch OMIP using the option "--omip=4".</p></li>
</ol>

<p>For more information on how to use OMIP and activate/deactivate modules, checkout out the documentation, the wiki pages or run:<br></p>

<p><code>rosrun omip_launch omip.sh --help
</code></p>

<p>More frequent problem: The feature tracking is not running and looks like frozen -&gt; Check in feature_tracker/cfg/feature_tracker_cfg.yaml the depth_img_topic name. Depending if you are using
openni or openni2 (or rosbags generated from one or the other package) the name of the topic for the depth maps is different.</p>

<h3 id="what-is-omip">What is OMIP?</h3>

<p>Online Multimodal Interactive Perception (OMIP) is a framework to exploit the interaction capabilites of a robot to reveal and perceive its environment. 
The information to perceive this environment is contained in the high dimensional, continuous, multimodal sensor stream of the robot.
Our framework offers a way to interpret this stream based on prior knowledge encoded into recursive estimation loops. 
The prior knowledge used for perception includes physics laws (rigid body physics, kinematics, ...) and knowledge about the correlation between robot actions and responses of the environment.</p>

<p>Based on the recursive estimation schema - prediction/correction -  our framework can cope with the high amount of data provided by the robot's sensors <strong>in an online manner</strong>.
The key (and the main idea of our framework) is to factorize the perceptual problem into smaller <em>perceptual units</em>, solve them with single recursive estimation loops and connect all the loops tightly. 
The connection of the loops defines a bidirectional information flow between loops: a bottom-up flow to pass estimations as measurements to more abstract levels, and a top-down flow to pass predicted measurements as predicted next states to less abstract levels.
By connecting the loops our framework can interpret the combined sensor-action stream as evidence of concepts of different level of abstraction.</p>

<p>In the given demo, an RGB-D stream of an interaction is interpreted simultaneously as a moving visual field (motion of features and surfaces), multiple moving rigid bodies and changes in the kinematic state of an articulated object.</p>

<h2 id="structure">Structure</h2>

<p>OMIP is designed to work in ROS (Robot Operating System). 
ROS provides a suitable message-passing architecture to interconnect recursive estimation loops and propagate their information (estimations and predictions).</p>

<p>Each recursive estimation level is realized as a ROS node that implements the interface <em>RecursiveEstimatorNodeInterface</em>. 
A recursive estimation level is defined by:
- Measurement
- State
- Priors:
 - About the relation between measurements and state (measurement model)
 - About the relation between the state at time t and t+1 (forward model)
 - About the uncertainty (of measurements and predicted states)</p>

<p>An iteration of our recursive estimation levels begin when a new measurement arrives (execute-on-demand). This behavior is encoded using callbacks.
An iteration of a recursive estimation level implies correcting the state, predicting the next state and publishing the results. 
Note that we invert the classical order predict-correct; this allows us to make us of the predictions already in an earlier point in time! 
This <em>trick</em> is crucial in our system: the predictions are passed to other levels and can be used as alternative forward models based on extra priors.</p>

<p>Internally, each level contains at least one recursive estimation filter. These filters implement the interface <em>RecursiveEstimatorFilterInterface</em>.
The levels call the corresponding correct-predict methods of the filters and pass the measurements/states up and down.</p>

<p>You can extend the OMIP framework with new recursive loops. To do that, create a filter that implements the filter interface. Then create a node that implements the node interface and contains an instance of the filter interface. Connect your new node to existing nodes and sensors.</p>
</div>
            
          </div>
        </div>

        
        
      
    </div>
  </div>

  <div class="distro distro-ardent">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>ardent</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-jade">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>jade</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>

  <div class="distro distro-hydro">
    <div class="container-fluid">
      
        <div class="alert alert-warning" role="alert">No version for distro <strong>hydro</strong>. Known supported distros are highlighted in the buttons above.</div>
      
    </div>
  </div>


<script type="text/javascript">
  $(document).ready(function() {
    setupDistroSwitch("crystal");
  });
</script>

      </div>
    </div>

    <footer class="site-footer">
  <div class="wrapper">
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-4 col-md-4">
          
            <a href="https://github.com/ros-infrastructure" title="Find rosindex in Github">
            <span class="icon  icon--github">
              <svg viewBox="0 0 16 16">
                <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
              </svg>
            </span>

            <span class="username">ros-infrastructure</span>
          </a>
          |
          <em>generated on 2019-05-24</em>
        
        </div>
        <div class="col-sm-8 col-md-8 text-right">
          <p class="text">a community-maintained index of robotics software
 | <a href="/privacy.txt">privacy</a></p>
        </div>
      </div>
    </div>
  </div>

</footer>


  </body>

</html>
